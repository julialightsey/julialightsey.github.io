<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="utf-8" />
		<title>[th&#601;_her&#601;tik]</title>
		<link rel="shortcut icon" href="./source/image/chamomile.ico" />
		<link rel="stylesheet" type="text/css" href="./source/common.css" />
	</head>
	<body>
		<table style="border-collapse: collapse; margin-top:0px; width:100%" >
			<tr>
				<td style="padding-left:25px; padding-right:25px;">
					<table class="header">
						<tr>
							<td >
								<iframe src="./header.html" style="border-collapse: collapse; width:100%; overflow:hidden; border:0; margin:0 auto; display:block;" height="325" ></iframe>
							</td>
						</tr>
					</table>
				</td>
			</tr>
		</table>
		<table style="border-collapse: collapse;  margin-bottom:0px; margin-top:-25px; width:100%" >
			<tr>
				<td style="padding-left:25px; padding-right:25px;">
					<table class="content">
						<tr>
							<td class="content">
								<iframe src="./menu__home.html" style="border-collapse: collapse; width:100%; overflow:hidden; border:0;" height="50" ></iframe>
							</td>
						</tr>
						<tr>
							<td class="content">
								<iframe src="./menu__presentation.html" style="border-collapse: collapse; width:100%; overflow:hidden;  border:0;" height="50" ></iframe>
							</td>
						</tr> 
					</table>
				</td>
			</tr>
		</table>
		<table style="border-collapse: collapse;  margin-top:0px; margin-top:-15px; width:100%" >
			<tr>
				<td style="padding-left:25px; padding-right:25px;">
					<!--  -->
					<!-- begin content table --> 
          <table class="content">
            <tr>
              <td>
			  <h1><a href="http://technet.microsoft.com/en-us/library/ms190215(v=sql.105).aspx">Using uniqueidentifier Data</a></h1>

	
	<p><a href="http://www.regular-expressions.info/xml.html">XML Schema Regular Expressions</a>
	<p><a href="http://msdn.microsoft.com/en-us/library/4edbef7e(v=vs.110).aspx">Character Escapes in Regular Expressions</a>
	<p><a href="http://www.regular-expressions.info/shorthand.html#xml">XML Character Classes</a>
	<p><a href="http://www.freeformatter.com/regex-tester.html#examples">Regular Expression Tester</a>
<div><span style="font-family: Courier New; font-size: 10pt;">
<span style="color: green; font-style: italic; ">/*
<br/>&nbsp;&nbsp;All&nbsp;content&nbsp;is&nbsp;licensed&nbsp;as&nbsp;[chamomile]&nbsp;(http://www.KELightsey.com/license.html)&nbsp;and&nbsp;
<br/>&nbsp;&nbsp;&nbsp;&nbsp;copyright&nbsp;Katherine&nbsp;Elizabeth&nbsp;Lightsey,&nbsp;1959-2014&nbsp;(aka;&nbsp;my&nbsp;life),&nbsp;all&nbsp;rights&nbsp;reserved,
<br/>&nbsp;&nbsp;&nbsp;&nbsp;and&nbsp;as&nbsp;open&nbsp;source&nbsp;under&nbsp;the&nbsp;GNU&nbsp;Affero&nbsp;GPL&nbsp;(http://www.gnu.org/licenses/agpl-3.0.html).
<br/>&nbsp;&nbsp;---------------------------------------------
<br/>
<br/>&nbsp;&nbsp;--&nbsp;todo&nbsp;-&nbsp;add
<br/>&nbsp;&nbsp;---------------------------------------------
<br/>&nbsp;&nbsp;FLWOR&nbsp;Statement&nbsp;and&nbsp;Iteration&nbsp;(XQuery)&nbsp;-&nbsp;http://msdn.microsoft.com/en-us/library/ms190945.aspx
<br/>&nbsp;&nbsp;XQuery&nbsp;-&nbsp;http://www.datypic.com/books/xquery/chapter07.html
<br/>
<br/>&nbsp;&nbsp;--
<br/>&nbsp;&nbsp;--&nbsp;&nbsp;description
<br/>&nbsp;&nbsp;---------------------------------------------
<br/>&nbsp;&nbsp;&nbsp;&nbsp;XQuery&nbsp;is&nbsp;a&nbsp;complete&nbsp;languaged&nbsp;defined&nbsp;by&nbsp;the&nbsp;W3C&nbsp;and&nbsp;adopted,&nbsp;implemented,&nbsp;and&nbsp;extended&nbsp;by&nbsp;various&nbsp;organizations&nbsp;
<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;such&nbsp;as&nbsp;Microsoft,&nbsp;Oracle,&nbsp;etc.&nbsp;in&nbsp;the&nbsp;same&nbsp;manner&nbsp;that&nbsp;the&nbsp;SQL&nbsp;language&nbsp;was&nbsp;adopted,&nbsp;implemented,&nbsp;and&nbsp;extended.
<br/>
<br/>&nbsp;&nbsp;&nbsp;&nbsp;[xml]&nbsp;can&nbsp;be&nbsp;used&nbsp;to&nbsp;store&nbsp;and&nbsp;present&nbsp;COMPLEX&nbsp;and&nbsp;HETEROGENEOUS&nbsp;data&nbsp;in&nbsp;a&nbsp;ROBUST&nbsp;and&nbsp;FLEXIBLE&nbsp;manner.&nbsp;XQUERY&nbsp;is&nbsp;the
<br/>&nbsp;&nbsp;&nbsp;&nbsp;languaged&nbsp;used&nbsp;to&nbsp;manage&nbsp;[xml].
<br/>
<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;HETEROGENOUS
<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;1.&nbsp;Different&nbsp;in&nbsp;kind;&nbsp;unlike;&nbsp;incongruous.
<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;2.&nbsp;Composed&nbsp;of&nbsp;parts&nbsp;of&nbsp;different&nbsp;kinds;&nbsp;having&nbsp;widely&nbsp;dissimilar&nbsp;elements&nbsp;or&nbsp;constituents.
<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;COMPLEX
<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;1.&nbsp;Composed&nbsp;of&nbsp;many&nbsp;interconnected&nbsp;parts;&nbsp;compound;&nbsp;composite.
<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;2.&nbsp;Characterized&nbsp;by&nbsp;a&nbsp;very&nbsp;complicated&nbsp;or&nbsp;involved&nbsp;arrangement&nbsp;of&nbsp;parts,&nbsp;units,&nbsp;etc.
<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;3.&nbsp;So&nbsp;complicated&nbsp;or&nbsp;intricate&nbsp;as&nbsp;to&nbsp;be&nbsp;hard&nbsp;to&nbsp;understand&nbsp;or&nbsp;deal&nbsp;with.
<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ROBUST
<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;1.&nbsp;Capable&nbsp;of&nbsp;recovery:&nbsp;describes&nbsp;a&nbsp;computer&nbsp;program&nbsp;or&nbsp;system&nbsp;that&nbsp;is&nbsp;able&nbsp;to&nbsp;recover&nbsp;from&nbsp;unexpected&nbsp;
<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;conditions&nbsp;during&nbsp;operation.
<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;2.&nbsp;Strongly&nbsp;constructed:&nbsp;built,&nbsp;constructed,&nbsp;or&nbsp;designed&nbsp;to&nbsp;be&nbsp;sturdy,&nbsp;durable,&nbsp;or&nbsp;hard-wearing.
<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;FLEXIBLE
<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;1.&nbsp;Able&nbsp;to&nbsp;adapt&nbsp;to&nbsp;new&nbsp;situation:&nbsp;able&nbsp;to&nbsp;change&nbsp;or&nbsp;be&nbsp;changed&nbsp;according&nbsp;to&nbsp;circumstances.
<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;2.&nbsp;Subject&nbsp;to&nbsp;influence:&nbsp;able&nbsp;to&nbsp;be&nbsp;persuaded&nbsp;or&nbsp;influenced.
<br/>
<br/>&nbsp;&nbsp;--
<br/>&nbsp;&nbsp;--&nbsp;&nbsp;notes
<br/>&nbsp;&nbsp;---------------------------------------------
<br/>&nbsp;&nbsp;&nbsp;&nbsp;this&nbsp;presentation&nbsp;is&nbsp;designed&nbsp;to&nbsp;be&nbsp;run&nbsp;incrementally&nbsp;a&nbsp;code&nbsp;block&nbsp;at&nbsp;a&nbsp;time.&nbsp;
<br/>&nbsp;&nbsp;&nbsp;&nbsp;code&nbsp;blocks&nbsp;are&nbsp;delineated&nbsp;as:
<br/>
<br/>&nbsp;&nbsp;&nbsp;&nbsp;--
<br/>&nbsp;&nbsp;&nbsp;&nbsp;--&nbsp;code&nbsp;block&nbsp;begin
<br/>&nbsp;&nbsp;&nbsp;&nbsp;-----------------------------------------
<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<run&nbsp;code&nbsp;here>
<br/>&nbsp;&nbsp;&nbsp;&nbsp;-----------------------------------------
<br/>&nbsp;&nbsp;&nbsp;&nbsp;--&nbsp;code&nbsp;block&nbsp;end
<br/>&nbsp;&nbsp;&nbsp;&nbsp;--
<br/>
<br/>&nbsp;&nbsp;--
<br/>&nbsp;&nbsp;--&nbsp;references
<br/>&nbsp;&nbsp;---------------------------------------------
<br/>&nbsp;&nbsp;&nbsp;&nbsp;XQuery&nbsp;Language&nbsp;Reference&nbsp;(SQL&nbsp;Server):&nbsp;http://msdn.microsoft.com/en-us/library/ms189075.aspx
<br/>&nbsp;&nbsp;&nbsp;&nbsp;Understanding&nbsp;[xml]&nbsp;in&nbsp;SQL&nbsp;Server:&nbsp;http://msdn.microsoft.com/en-us/library/bb522493(v=SQL.105).aspx
<br/>&nbsp;&nbsp;&nbsp;&nbsp;[xml]&nbsp;Support&nbsp;in&nbsp;Microsoft&nbsp;SQL&nbsp;Server&nbsp;2005:&nbsp;http://msdn.microsoft.com/en-us/library/ms345117(SQL.90).aspx&nbsp;
<br/>&nbsp;&nbsp;&nbsp;&nbsp;CREATE&nbsp;[xml]&nbsp;INDEX:&nbsp;http://msdn.microsoft.com/en-us/library/bb934097.aspx
<br/>&nbsp;&nbsp;&nbsp;&nbsp;[xml]&nbsp;Indexes:&nbsp;http://msdn.microsoft.com/en-us/library/ms191497.aspx
<br/>&nbsp;&nbsp;&nbsp;&nbsp;Data&nbsp;Type&nbsp;Coercions&nbsp;and&nbsp;the&nbsp;sql:datatype&nbsp;Annotation:&nbsp;http://msdn.microsoft.com/en-us/library/aa258643(v=SQL.80).aspx
<br/>&nbsp;&nbsp;&nbsp;&nbsp;Writing&nbsp;Typed&nbsp;Data:&nbsp;http://msdn.microsoft.com/en-us/library/vstudio/bft97s8e(v=vs.100).aspx
<br/>&nbsp;&nbsp;&nbsp;&nbsp;Mapping&nbsp;SQL&nbsp;datatypes&nbsp;to&nbsp;[xml]&nbsp;Schema&nbsp;datatypes:
<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;http://www.w3.org/2001/sw/rdb2rdf/wiki/Mapping_SQL_datatypes_to_XML_Schema_datatypes
<br/>&nbsp;&nbsp;&nbsp;&nbsp;[xml]&nbsp;Schema&nbsp;Definition&nbsp;Tool&nbsp;(Xsd.exe):&nbsp;http://msdn.microsoft.com/en-us/library/x6c1kb0s(v=VS.71).aspx
<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(Installed&nbsp;in&nbsp;\\dfs.com\root\Dept-IT\_EDM\users\KatherineELightsey\Tools\XSD)
<br/>&nbsp;&nbsp;&nbsp;&nbsp;W3C&nbsp;[xml]&nbsp;Query&nbsp;(XQuery):&nbsp;http://www.w3.org/[xml]/Query/
<br/>&nbsp;&nbsp;&nbsp;&nbsp;XQUERY&nbsp;Wiki:&nbsp;http://en.wikipedia.org/wiki/XQuery
<br/>&nbsp;&nbsp;&nbsp;&nbsp;Create&nbsp;Indexes&nbsp;with&nbsp;Included&nbsp;Columns:&nbsp;http://msdn.microsoft.com/en-us/library/ms190806(v=sql.110).aspx
<br/>&nbsp;&nbsp;&nbsp;&nbsp;W3C&nbsp;[xml]&nbsp;Query&nbsp;(XQuery):&nbsp;http://www.w3.org/[xml]/Query/
<br/>*/</span>
<br/><span style="color: green; font-style: italic; ">&#45;&#45;</span>
<br/><span style="color: green; font-style: italic; ">&#45;&#45;&nbsp;code&nbsp;block&nbsp;begin</span>
<br/><span style="color: blue; ">use</span>&nbsp;<span style="color: maroon; ">[chamomile]</span><span style="color: silver; ">;</span>
<br/><span style="color: maroon; ">go</span>
<br/><span style="color: blue; ">if</span>&nbsp;<span style="color: #FF0080; font-weight: bold; ">schema_id</span><span style="color: maroon; ">(</span><span style="color: red; ">N'xquery_demo'</span><span style="color: maroon; ">)</span>&nbsp;<span style="color: blue; ">is</span>&nbsp;<span style="color: blue; ">null</span>
<br/>&nbsp;&nbsp;<span style="color: blue; ">execute</span>&nbsp;<span style="color: maroon; ">(</span><span style="color: red; ">N'create&nbsp;schema&nbsp;xquery_demo'</span><span style="color: maroon; ">)</span><span style="color: silver; ">;</span>
<br/><span style="color: maroon; ">go</span>
<br/><span style="color: green; font-style: italic; ">&#45;&#45;&nbsp;code&nbsp;block&nbsp;end</span>
<br/><span style="color: green; font-style: italic; ">&#45;&#45;</span>
<br/><span style="color: green; font-style: italic; ">&#45;&#45;&nbsp;BUILD&nbsp;TEST&nbsp;DATA</span>
<br/><span style="color: green; font-style: italic; ">&#45;&#45;&nbsp;Build&nbsp;test&nbsp;data&nbsp;for&nbsp;this&nbsp;presentation</span>
<br/><span style="color: green; font-style: italic; ">&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;</span>
<br/><span style="color: green; font-style: italic; ">&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;</span>
<br/><span style="color: green; font-style: italic; ">&#45;&#45;</span>
<br/><span style="color: green; font-style: italic; ">&#45;&#45;&nbsp;code&nbsp;block&nbsp;begin</span>
<br/><span style="color: blue; ">use</span>&nbsp;<span style="color: maroon; ">[chamomile]</span><span style="color: silver; ">;</span>
<br/><span style="color: maroon; ">go</span>
<br/><span style="color: blue; ">if</span>&nbsp;<span style="color: #FF0080; font-weight: bold; ">Schema_id</span><span style="color: maroon; ">(</span><span style="color: red; ">N'xquery_demo'</span><span style="color: maroon; ">)</span>&nbsp;<span style="color: blue; ">is</span>&nbsp;<span style="color: blue; ">null</span>
<br/>&nbsp;&nbsp;<span style="color: blue; ">execute</span>&nbsp;<span style="color: maroon; ">(</span><span style="color: red; ">N'create&nbsp;schema&nbsp;xquery_demo'</span><span style="color: maroon; ">)</span><span style="color: silver; ">;</span>
<br/><span style="color: maroon; ">go</span>
<br/><span style="color: green; font-style: italic; ">&#45;&#45;</span>
<br/><span style="color: green; font-style: italic; ">&#45;&#45;&nbsp;DROP&nbsp;ALL&nbsp;OBJECTS</span>
<br/><span style="color: green; font-style: italic; ">&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;</span>
<br/><span style="color: blue; ">if</span>&nbsp;<span style="color: fuchsia; font-style: italic; ">object_id</span><span style="color: maroon; ">(</span><span style="color: red; ">'[xquery_demo].[set.log]'</span><span style="color: silver; ">,</span>&nbsp;<span style="color: red; ">N'P'</span><span style="color: maroon; ">)</span>&nbsp;<span style="color: blue; ">is</span>&nbsp;<span style="color: blue; ">not</span>&nbsp;<span style="color: blue; ">null</span>
<br/>&nbsp;&nbsp;<span style="color: blue; ">drop</span>&nbsp;<span style="color: blue; ">procedure</span>&nbsp;<span style="color: maroon; ">[xquery_demo]</span><span style="color: silver; ">.</span><span style="color: maroon; ">[set.log]</span><span style="color: silver; ">;</span>
<br/><span style="color: maroon; ">go</span>
<br/><span style="color: blue; ">if</span>&nbsp;<span style="color: fuchsia; font-style: italic; ">object_id</span><span style="color: maroon; ">(</span><span style="color: red; ">N'[xquery_demo].[address]'</span><span style="color: silver; ">,</span>&nbsp;<span style="color: red; ">N'U'</span><span style="color: maroon; ">)</span>&nbsp;<span style="color: blue; ">is</span>&nbsp;<span style="color: blue; ">not</span>&nbsp;<span style="color: blue; ">null</span>
<br/>&nbsp;&nbsp;<span style="color: blue; ">drop</span>&nbsp;<span style="color: blue; ">table</span>&nbsp;<span style="color: maroon; ">[xquery_demo]</span><span style="color: silver; ">.</span><span style="color: maroon; ">[address]</span><span style="color: silver; ">;</span>
<br/><span style="color: maroon; ">go</span>
<br/><span style="color: blue; ">if</span>&nbsp;<span style="color: fuchsia; font-style: italic; ">object_id</span><span style="color: maroon; ">(</span><span style="color: red; ">N'[xquery_demo].[get_person]'</span><span style="color: silver; ">,</span>&nbsp;<span style="color: red; ">N'FN'</span><span style="color: maroon; ">)</span>&nbsp;<span style="color: blue; ">is</span>&nbsp;<span style="color: blue; ">not</span>&nbsp;<span style="color: blue; ">null</span>
<br/>&nbsp;&nbsp;<span style="color: blue; ">drop</span>&nbsp;<span style="color: blue; ">function</span>&nbsp;<span style="color: maroon; ">[xquery_demo]</span><span style="color: silver; ">.</span><span style="color: maroon; ">[get_person]</span><span style="color: silver; ">;</span>
<br/><span style="color: maroon; ">go</span>
<br/><span style="color: blue; ">if</span>&nbsp;<span style="color: fuchsia; font-style: italic; ">object_id</span><span style="color: maroon; ">(</span><span style="color: red; ">N'[xquery_demo].[log]'</span><span style="color: silver; ">,</span>&nbsp;<span style="color: red; ">N'U'</span><span style="color: maroon; ">)</span>&nbsp;<span style="color: blue; ">is</span>&nbsp;<span style="color: blue; ">not</span>&nbsp;<span style="color: blue; ">null</span>
<br/>&nbsp;&nbsp;<span style="color: blue; ">drop</span>&nbsp;<span style="color: blue; ">table</span>&nbsp;<span style="color: maroon; ">[xquery_demo]</span><span style="color: silver; ">.</span><span style="color: maroon; ">[log]</span><span style="color: silver; ">;</span>
<br/><span style="color: maroon; ">go</span>
<br/><span style="color: blue; ">if</span>&nbsp;<span style="color: blue; ">exists</span>
<br/>&nbsp;&nbsp;&nbsp;<span style="color: maroon; ">(</span><span style="color: blue; ">select</span>&nbsp;<span style="color: maroon; ">xml_collection_id</span>
<br/>&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: blue; ">from</span>&nbsp;&nbsp;&nbsp;<span style="color: maroon; ">sys</span><span style="color: silver; ">.</span><span style="color: maroon; ">xml_schema_collections</span>&nbsp;<span style="color: blue; ">as</span>&nbsp;<span style="color: maroon; ">xsc</span>
<br/>&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: blue; ">where</span>&nbsp;&nbsp;<span style="color: maroon; ">xsc</span><span style="color: silver; ">.</span><span style="color: blue; ">name</span>&nbsp;<span style="color: silver; ">=</span>&nbsp;<span style="color: red; ">'xsd_log'</span>
<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: blue; ">and</span>&nbsp;<span style="color: maroon; ">xsc</span><span style="color: silver; ">.</span><span style="color: maroon; ">schema_id</span>&nbsp;<span style="color: silver; ">=</span>&nbsp;<span style="color: #FF0080; font-weight: bold; ">Schema_id</span><span style="color: maroon; ">(</span><span style="color: red; ">N'xquery_demo'</span><span style="color: maroon; ">)</span><span style="color: maroon; ">)</span>
<br/>&nbsp;&nbsp;<span style="color: blue; ">drop</span>&nbsp;<span style="color: maroon; ">xml</span>&nbsp;<span style="color: blue; ">schema</span>&nbsp;<span style="color: maroon; ">collection</span>&nbsp;<span style="color: maroon; ">[xquery_demo]</span><span style="color: silver; ">.</span><span style="color: maroon; ">[xsd_log]</span><span style="color: silver; ">;</span>
<br/><span style="color: maroon; ">go</span>
<br/><span style="color: blue; ">if</span>&nbsp;<span style="color: blue; ">exists</span>
<br/>&nbsp;&nbsp;&nbsp;<span style="color: maroon; ">(</span><span style="color: blue; ">select</span>&nbsp;<span style="color: maroon; ">xml_collection_id</span>
<br/>&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: blue; ">from</span>&nbsp;&nbsp;&nbsp;<span style="color: maroon; ">sys</span><span style="color: silver; ">.</span><span style="color: maroon; ">xml_schema_collections</span>&nbsp;<span style="color: blue; ">as</span>&nbsp;<span style="color: maroon; ">xsc</span>
<br/>&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: blue; ">where</span>&nbsp;&nbsp;<span style="color: maroon; ">xsc</span><span style="color: silver; ">.</span><span style="color: blue; ">name</span>&nbsp;<span style="color: silver; ">=</span>&nbsp;<span style="color: red; ">'xsd_log_business_application_01'</span>
<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: blue; ">and</span>&nbsp;<span style="color: maroon; ">xsc</span><span style="color: silver; ">.</span><span style="color: maroon; ">schema_id</span>&nbsp;<span style="color: silver; ">=</span>&nbsp;<span style="color: #FF0080; font-weight: bold; ">Schema_id</span><span style="color: maroon; ">(</span><span style="color: red; ">N'xquery_demo'</span><span style="color: maroon; ">)</span><span style="color: maroon; ">)</span>
<br/>&nbsp;&nbsp;<span style="color: blue; ">drop</span>&nbsp;<span style="color: maroon; ">xml</span>&nbsp;<span style="color: blue; ">schema</span>&nbsp;<span style="color: maroon; ">collection</span>&nbsp;<span style="color: maroon; ">[xquery_demo]</span><span style="color: silver; ">.</span><span style="color: maroon; ">[xsd_log_business_application_01]</span><span style="color: silver; ">;</span>
<br/><span style="color: maroon; ">go</span>
<br/><span style="color: blue; ">if</span>&nbsp;<span style="color: blue; ">exists</span>
<br/>&nbsp;&nbsp;&nbsp;<span style="color: maroon; ">(</span><span style="color: blue; ">select</span>&nbsp;<span style="color: maroon; ">xml_collection_id</span>
<br/>&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: blue; ">from</span>&nbsp;&nbsp;&nbsp;<span style="color: maroon; ">sys</span><span style="color: silver; ">.</span><span style="color: maroon; ">xml_schema_collections</span>&nbsp;<span style="color: blue; ">as</span>&nbsp;<span style="color: maroon; ">xsc</span>
<br/>&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: blue; ">where</span>&nbsp;&nbsp;<span style="color: maroon; ">xsc</span><span style="color: silver; ">.</span><span style="color: blue; ">name</span>&nbsp;<span style="color: silver; ">=</span>&nbsp;<span style="color: red; ">'xsd_log_business_application_02'</span>
<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: blue; ">and</span>&nbsp;<span style="color: maroon; ">xsc</span><span style="color: silver; ">.</span><span style="color: maroon; ">schema_id</span>&nbsp;<span style="color: silver; ">=</span>&nbsp;<span style="color: #FF0080; font-weight: bold; ">Schema_id</span><span style="color: maroon; ">(</span><span style="color: red; ">N'xquery_demo'</span><span style="color: maroon; ">)</span><span style="color: maroon; ">)</span>
<br/>&nbsp;&nbsp;<span style="color: blue; ">drop</span>&nbsp;<span style="color: maroon; ">xml</span>&nbsp;<span style="color: blue; ">schema</span>&nbsp;<span style="color: maroon; ">collection</span>&nbsp;<span style="color: maroon; ">[xquery_demo]</span><span style="color: silver; ">.</span><span style="color: maroon; ">xsd_log_business_application_02</span><span style="color: silver; ">;</span>
<br/><span style="color: maroon; ">go</span>
<br/><span style="color: blue; ">if</span>&nbsp;<span style="color: fuchsia; font-style: italic; ">object_id</span><span style="color: maroon; ">(</span><span style="color: red; ">'[xquery_demo].[set.log]'</span><span style="color: silver; ">,</span>&nbsp;<span style="color: red; ">N'P'</span><span style="color: maroon; ">)</span>&nbsp;<span style="color: blue; ">is</span>&nbsp;<span style="color: blue; ">not</span>&nbsp;<span style="color: blue; ">null</span>
<br/>&nbsp;&nbsp;<span style="color: blue; ">drop</span>&nbsp;<span style="color: blue; ">procedure</span>&nbsp;<span style="color: maroon; ">[xquery_demo]</span><span style="color: silver; ">.</span><span style="color: maroon; ">[set.log]</span><span style="color: silver; ">;</span>
<br/><span style="color: maroon; ">go</span>
<br/><span style="color: blue; ">if</span>&nbsp;<span style="color: blue; ">exists</span>
<br/>&nbsp;&nbsp;&nbsp;<span style="color: maroon; ">(</span><span style="color: blue; ">select</span>&nbsp;<span style="color: maroon; ">xml_collection_id</span>
<br/>&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: blue; ">from</span>&nbsp;&nbsp;&nbsp;<span style="color: maroon; ">sys</span><span style="color: silver; ">.</span><span style="color: maroon; ">xml_schema_collections</span>&nbsp;<span style="color: blue; ">as</span>&nbsp;<span style="color: maroon; ">xsc</span>
<br/>&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: blue; ">where</span>&nbsp;&nbsp;<span style="color: maroon; ">xsc</span><span style="color: silver; ">.</span><span style="color: blue; ">name</span>&nbsp;<span style="color: silver; ">=</span>&nbsp;<span style="color: red; ">'xsd_test_02'</span>
<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: blue; ">and</span>&nbsp;<span style="color: maroon; ">xsc</span><span style="color: silver; ">.</span><span style="color: maroon; ">schema_id</span>&nbsp;<span style="color: silver; ">=</span>&nbsp;<span style="color: #FF0080; font-weight: bold; ">Schema_id</span><span style="color: maroon; ">(</span><span style="color: red; ">N'xquery_demo'</span><span style="color: maroon; ">)</span><span style="color: maroon; ">)</span>
<br/>&nbsp;&nbsp;<span style="color: blue; ">drop</span>&nbsp;<span style="color: maroon; ">xml</span>&nbsp;<span style="color: blue; ">schema</span>&nbsp;<span style="color: maroon; ">collection</span>&nbsp;<span style="color: maroon; ">[xquery_demo]</span><span style="color: silver; ">.</span><span style="color: maroon; ">[xsd_test_02]</span><span style="color: silver; ">;</span>
<br/><span style="color: maroon; ">go</span>
<br/><span style="color: blue; ">if</span>&nbsp;<span style="color: fuchsia; font-style: italic; ">indexproperty</span>&nbsp;<span style="color: maroon; ">(</span><span style="color: fuchsia; font-style: italic; ">object_id</span><span style="color: maroon; ">(</span><span style="color: red; ">'[xquery_demo].[log]'</span><span style="color: maroon; ">)</span><span style="color: silver; ">,</span>&nbsp;<span style="color: red; ">'ix_xquery_demo_log_xlog'</span><span style="color: silver; ">,</span>&nbsp;<span style="color: red; ">'IndexID'</span><span style="color: maroon; ">)</span>&nbsp;<span style="color: blue; ">is</span>&nbsp;<span style="color: blue; ">not</span>&nbsp;<span style="color: blue; ">null</span>
<br/>&nbsp;&nbsp;<span style="color: blue; ">drop</span>&nbsp;<span style="color: blue; ">index</span>&nbsp;<span style="color: maroon; ">[ix_xquery_demo_log_xlog]</span>&nbsp;<span style="color: blue; ">on</span>&nbsp;<span style="color: maroon; ">[xquery_demo]</span><span style="color: silver; ">.</span><span style="color: maroon; ">[log]</span><span style="color: silver; ">;</span>
<br/><span style="color: maroon; ">go</span>
<br/><span style="color: blue; ">if</span>&nbsp;<span style="color: fuchsia; font-style: italic; ">indexproperty</span>&nbsp;<span style="color: maroon; ">(</span><span style="color: fuchsia; font-style: italic; ">object_id</span><span style="color: maroon; ">(</span><span style="color: red; ">'[xquery_demo].[log]'</span><span style="color: maroon; ">)</span><span style="color: silver; ">,</span>&nbsp;<span style="color: red; ">'ix_xquery_demo_log_xlog_value'</span><span style="color: silver; ">,</span>&nbsp;<span style="color: red; ">'IndexID'</span><span style="color: maroon; ">)</span>&nbsp;<span style="color: blue; ">is</span>&nbsp;<span style="color: blue; ">not</span>&nbsp;<span style="color: blue; ">null</span>
<br/>&nbsp;&nbsp;<span style="color: blue; ">drop</span>&nbsp;<span style="color: blue; ">index</span>&nbsp;<span style="color: maroon; ">[ix_xquery_demo_log_xlog_value]</span>&nbsp;<span style="color: blue; ">on</span>&nbsp;<span style="color: maroon; ">[xquery_demo]</span><span style="color: silver; ">.</span><span style="color: maroon; ">[log]</span><span style="color: silver; ">;</span>
<br/><span style="color: maroon; ">go</span>
<br/><span style="color: blue; ">if</span>&nbsp;<span style="color: fuchsia; font-style: italic; ">indexproperty</span>&nbsp;<span style="color: maroon; ">(</span><span style="color: fuchsia; font-style: italic; ">object_id</span><span style="color: maroon; ">(</span><span style="color: red; ">'[xquery_demo].[log]'</span><span style="color: maroon; ">)</span><span style="color: silver; ">,</span>&nbsp;<span style="color: red; ">'ix_xquery_demo_log_xlog_property]'</span><span style="color: silver; ">,</span>&nbsp;<span style="color: red; ">'IndexID'</span><span style="color: maroon; ">)</span>&nbsp;<span style="color: blue; ">is</span>&nbsp;<span style="color: blue; ">not</span>&nbsp;<span style="color: blue; ">null</span>
<br/>&nbsp;&nbsp;<span style="color: blue; ">drop</span>&nbsp;<span style="color: blue; ">index</span>&nbsp;<span style="color: maroon; ">[ix_xquery_demo_log_xlog_property]</span>&nbsp;<span style="color: blue; ">on</span>&nbsp;<span style="color: maroon; ">[xquery_demo]</span><span style="color: silver; ">.</span><span style="color: maroon; ">[log]</span><span style="color: silver; ">;</span>
<br/><span style="color: maroon; ">go</span>
<br/><span style="color: blue; ">if</span>&nbsp;<span style="color: fuchsia; font-style: italic; ">indexproperty</span>&nbsp;<span style="color: maroon; ">(</span><span style="color: fuchsia; font-style: italic; ">object_id</span><span style="color: maroon; ">(</span><span style="color: red; ">'[xquery_demo].[log]'</span><span style="color: maroon; ">)</span><span style="color: silver; ">,</span>&nbsp;<span style="color: red; ">'ix_xquery_demo_log_xlog_path]'</span><span style="color: silver; ">,</span>&nbsp;<span style="color: red; ">'IndexID'</span><span style="color: maroon; ">)</span>&nbsp;<span style="color: blue; ">is</span>&nbsp;<span style="color: blue; ">not</span>&nbsp;<span style="color: blue; ">null</span>
<br/>&nbsp;&nbsp;<span style="color: blue; ">drop</span>&nbsp;<span style="color: blue; ">index</span>&nbsp;<span style="color: maroon; ">[ix_xquery_demo_log_xlog_path]</span>&nbsp;<span style="color: blue; ">on</span>&nbsp;<span style="color: maroon; ">[xquery_demo]</span><span style="color: silver; ">.</span><span style="color: maroon; ">[log]</span><span style="color: silver; ">;</span>
<br/><span style="color: maroon; ">go</span>
<br/><span style="color: blue; ">if</span>&nbsp;<span style="color: fuchsia; font-style: italic; ">object_id</span><span style="color: maroon; ">(</span><span style="color: red; ">N'[xquery_demo].[address]'</span><span style="color: silver; ">,</span>&nbsp;<span style="color: red; ">N'U'</span><span style="color: maroon; ">)</span>&nbsp;<span style="color: blue; ">is</span>&nbsp;<span style="color: blue; ">not</span>&nbsp;<span style="color: blue; ">null</span>
<br/>&nbsp;&nbsp;<span style="color: blue; ">drop</span>&nbsp;<span style="color: blue; ">table</span>&nbsp;<span style="color: maroon; ">[xquery_demo]</span><span style="color: silver; ">.</span><span style="color: maroon; ">[address]</span><span style="color: silver; ">;</span>
<br/><span style="color: maroon; ">go</span>
<br/><span style="color: blue; ">if</span>&nbsp;<span style="color: fuchsia; font-style: italic; ">object_id</span><span style="color: maroon; ">(</span><span style="color: red; ">N'[xquery_demo].pr_application'</span><span style="color: silver; ">,</span>&nbsp;<span style="color: red; ">N'P'</span><span style="color: maroon; ">)</span>&nbsp;<span style="color: blue; ">is</span>&nbsp;<span style="color: blue; ">not</span>&nbsp;<span style="color: blue; ">null</span>
<br/>&nbsp;&nbsp;<span style="color: blue; ">drop</span>&nbsp;<span style="color: blue; ">procedure</span>&nbsp;<span style="color: maroon; ">[xquery_demo]</span><span style="color: silver; ">.</span><span style="color: maroon; ">[pr_application]</span><span style="color: silver; ">;</span>
<br/><span style="color: maroon; ">go</span>
<br/><span style="color: blue; ">if</span>&nbsp;<span style="color: fuchsia; font-style: italic; ">object_id</span><span style="color: maroon; ">(</span><span style="color: red; ">N'[xquery_demo].[test02]'</span><span style="color: silver; ">,</span>&nbsp;<span style="color: red; ">N'U'</span><span style="color: maroon; ">)</span>&nbsp;<span style="color: blue; ">is</span>&nbsp;<span style="color: blue; ">not</span>&nbsp;<span style="color: blue; ">null</span>
<br/>&nbsp;&nbsp;<span style="color: blue; ">drop</span>&nbsp;<span style="color: blue; ">table</span>&nbsp;<span style="color: maroon; ">[xquery_demo]</span><span style="color: silver; ">.</span><span style="color: maroon; ">[test02]</span><span style="color: silver; ">;</span>
<br/><span style="color: maroon; ">go</span>
<br/><span style="color: blue; ">if</span>&nbsp;<span style="color: blue; ">exists</span>
<br/>&nbsp;&nbsp;&nbsp;<span style="color: maroon; ">(</span><span style="color: blue; ">select</span>&nbsp;<span style="color: silver; ">*</span>
<br/>&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: blue; ">from</span>&nbsp;&nbsp;&nbsp;<span style="color: maroon; ">sys</span><span style="color: silver; ">.</span><span style="color: maroon; ">triggers</span>&nbsp;<span style="color: blue; ">as</span>&nbsp;<span style="color: maroon; ">trg</span>
<br/>&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: blue; ">where</span>&nbsp;&nbsp;<span style="color: maroon; ">trg</span><span style="color: silver; ">.</span><span style="color: blue; ">name</span>&nbsp;<span style="color: silver; ">=</span>&nbsp;<span style="color: red; ">N'tr_DocumentationRepositoryUpdate'</span><span style="color: maroon; ">)</span>
<br/>&nbsp;&nbsp;<span style="color: blue; ">drop</span>&nbsp;<span style="color: blue; ">trigger</span>&nbsp;<span style="color: maroon; ">[tr_documentationrepositoryupdate]</span>&nbsp;<span style="color: blue; ">on</span>&nbsp;<span style="color: blue; ">database</span><span style="color: silver; ">;</span>
<br/><span style="color: maroon; ">go</span>
<br/><span style="color: blue; ">if</span>&nbsp;<span style="color: fuchsia; font-style: italic; ">object_id</span><span style="color: maroon; ">(</span><span style="color: red; ">N'[xquery_demo].[get]'</span><span style="color: silver; ">,</span>&nbsp;<span style="color: red; ">N'FN'</span><span style="color: maroon; ">)</span>&nbsp;<span style="color: blue; ">is</span>&nbsp;<span style="color: blue; ">not</span>&nbsp;<span style="color: blue; ">null</span>
<br/>&nbsp;&nbsp;<span style="color: blue; ">drop</span>&nbsp;<span style="color: blue; ">function</span>&nbsp;<span style="color: maroon; ">[xquery_demo]</span><span style="color: silver; ">.</span><span style="color: maroon; ">[get]</span><span style="color: silver; ">;</span>
<br/><span style="color: maroon; ">go</span>
<br/><span style="color: blue; ">if</span>&nbsp;<span style="color: fuchsia; font-style: italic; ">object_id</span><span style="color: maroon; ">(</span><span style="color: red; ">N'[xquery_demo].[pr_get]'</span><span style="color: silver; ">,</span>&nbsp;<span style="color: red; ">N'U'</span><span style="color: maroon; ">)</span>&nbsp;<span style="color: blue; ">is</span>&nbsp;<span style="color: blue; ">not</span>&nbsp;<span style="color: blue; ">null</span>
<br/>&nbsp;&nbsp;<span style="color: blue; ">drop</span>&nbsp;<span style="color: blue; ">procedure</span>&nbsp;<span style="color: maroon; ">[xquery_demo]</span><span style="color: silver; ">.</span><span style="color: maroon; ">[pr_get]</span><span style="color: silver; ">;</span>
<br/><span style="color: maroon; ">go</span>
<br/><span style="color: blue; ">if</span>&nbsp;<span style="color: fuchsia; font-style: italic; ">object_id</span><span style="color: maroon; ">(</span><span style="color: red; ">N'[xquery_demo].[get_xml_data]'</span><span style="color: silver; ">,</span>&nbsp;<span style="color: red; ">N'U'</span><span style="color: maroon; ">)</span>&nbsp;<span style="color: blue; ">is</span>&nbsp;<span style="color: blue; ">not</span>&nbsp;<span style="color: blue; ">null</span>
<br/>&nbsp;&nbsp;<span style="color: blue; ">drop</span>&nbsp;<span style="color: blue; ">procedure</span>&nbsp;<span style="color: maroon; ">[xquery_demo]</span><span style="color: silver; ">.</span><span style="color: maroon; ">[get_xml_data]</span><span style="color: silver; ">;</span>
<br/><span style="color: maroon; ">go</span>
<br/><span style="color: green; font-style: italic; ">&#45;&#45;&nbsp;code&nbsp;block&nbsp;end</span>
<br/><span style="color: green; font-style: italic; ">&#45;&#45;&nbsp;</span>
<br/><span style="color: green; font-style: italic; ">&#45;&#45;&nbsp;CREATE&nbsp;A&nbsp;UTILITY&nbsp;FUNCTION&nbsp;TO&nbsp;BUILD&nbsp;A&nbsp;TEST&nbsp;[xml]&nbsp;TREE</span>
<br/><span style="color: green; font-style: italic; ">&#45;&#45;&nbsp;The&nbsp;utility&nbsp;function&nbsp;will&nbsp;be&nbsp;used&nbsp;throughout&nbsp;this&nbsp;presentation&nbsp;to&nbsp;build&nbsp;an&nbsp;[xml]&nbsp;tree&nbsp;to&nbsp;demonstrate&nbsp;methods&nbsp;on</span>
<br/><span style="color: green; font-style: italic; ">&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;</span>
<br/><span style="color: green; font-style: italic; ">&#45;&#45;&nbsp;begin&nbsp;code&nbsp;block</span>
<br/><span style="color: blue; ">if</span>&nbsp;<span style="color: fuchsia; font-style: italic; ">object_id</span><span style="color: maroon; ">(</span><span style="color: red; ">N'[xquery_demo].[get_person]'</span><span style="color: silver; ">,</span>&nbsp;<span style="color: red; ">N'FN'</span><span style="color: maroon; ">)</span>&nbsp;<span style="color: blue; ">is</span>&nbsp;<span style="color: blue; ">not</span>&nbsp;<span style="color: blue; ">null</span>
<br/>&nbsp;&nbsp;<span style="color: blue; ">drop</span>&nbsp;<span style="color: blue; ">function</span>&nbsp;<span style="color: maroon; ">[xquery_demo]</span><span style="color: silver; ">.</span><span style="color: maroon; ">[get_person]</span><span style="color: silver; ">;</span>
<br/><span style="color: maroon; ">go</span>
<br/><span style="color: blue; ">create</span>&nbsp;<span style="color: blue; ">function</span>&nbsp;<span style="color: maroon; ">[xquery_demo]</span><span style="color: silver; ">.</span><span style="color: #FF0080; font-weight: bold; ">[get_person]</span><span style="color: maroon; ">(</span><span style="color: maroon; ">)</span>
<br/><span style="color: maroon; ">returns</span>&nbsp;<span style="color: black; font-style: italic; ">[xml]</span>
<br/><span style="color: blue; ">as</span>
<br/>&nbsp;&nbsp;<span style="color: blue; ">begin</span>
<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: blue; ">declare</span>&nbsp;<span style="color: #8000FF; ">@return</span>&nbsp;<span style="color: black; font-style: italic; ">[xml]</span>&nbsp;<span style="color: silver; ">=</span>&nbsp;<span style="color: maroon; ">(</span><span style="color: blue; ">select</span>&nbsp;<span style="color: maroon; ">[person]</span><span style="color: silver; ">.</span><span style="color: maroon; ">[firstname]</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: blue; ">as</span>&nbsp;<span style="color: red; ">N'@first_name'</span>
<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: silver; ">,</span>&nbsp;<span style="color: maroon; ">[person]</span><span style="color: silver; ">.</span><span style="color: maroon; ">[middlename]</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: blue; ">as</span>&nbsp;<span style="color: red; ">N'@middle_name'</span>
<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: silver; ">,</span>&nbsp;<span style="color: maroon; ">[person]</span><span style="color: silver; ">.</span><span style="color: maroon; ">[lastname]</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: blue; ">as</span>&nbsp;<span style="color: red; ">N'@last_name'</span>
<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: silver; ">,</span>&nbsp;<span style="color: maroon; ">[address]</span><span style="color: silver; ">.</span><span style="color: maroon; ">[addressline1]</span>
<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: silver; ">+</span>&nbsp;<span style="color: #FF0080; font-weight: bold; ">isnull</span><span style="color: maroon; ">(</span><span style="color: red; ">N',&nbsp;'</span>&nbsp;<span style="color: silver; ">+</span>&nbsp;<span style="color: maroon; ">[address]</span><span style="color: silver; ">.</span><span style="color: maroon; ">[addressline2]</span><span style="color: silver; ">,</span>&nbsp;<span style="color: red; ">N''</span><span style="color: maroon; ">)</span>&nbsp;<span style="color: blue; ">as</span>&nbsp;<span style="color: red; ">N'@address'</span>
<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: silver; ">,</span>&nbsp;<span style="color: maroon; ">[address]</span><span style="color: silver; ">.</span><span style="color: maroon; ">[city]</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: blue; ">as</span>&nbsp;<span style="color: red; ">N'@city'</span>
<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: silver; ">,</span>&nbsp;<span style="color: maroon; ">[address]</span><span style="color: silver; ">.</span><span style="color: maroon; ">[postalcode]</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: blue; ">as</span>&nbsp;<span style="color: red; ">N'@zip_code'</span>
<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: silver; ">,</span>&nbsp;<span style="color: maroon; ">[state]</span><span style="color: silver; ">.</span><span style="color: maroon; ">[name]</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: blue; ">as</span>&nbsp;<span style="color: red; ">N'@state'</span>
<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: silver; ">,</span>&nbsp;<span style="color: maroon; ">[sales_person]</span><span style="color: silver; ">.</span><span style="color: maroon; ">[bonus]</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: blue; ">as</span>&nbsp;<span style="color: red; ">N'@bonus'</span>
<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: blue; ">from</span>&nbsp;&nbsp;&nbsp;<span style="color: maroon; ">[adventureworks2012]</span><span style="color: silver; ">.</span><span style="color: maroon; ">[person]</span><span style="color: silver; ">.</span><span style="color: maroon; ">[person]</span>&nbsp;<span style="color: blue; ">as</span>&nbsp;<span style="color: maroon; ">[person]</span>
<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: blue; ">join</span>&nbsp;<span style="color: maroon; ">[adventureworks2012]</span><span style="color: silver; ">.</span><span style="color: maroon; ">[person]</span><span style="color: silver; ">.</span><span style="color: maroon; ">[businessentityaddress]</span>&nbsp;<span style="color: blue; ">as</span>&nbsp;<span style="color: maroon; ">[business_address]</span>
<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: blue; ">on</span>&nbsp;<span style="color: maroon; ">[person]</span><span style="color: silver; ">.</span><span style="color: maroon; ">[businessentityid]</span>&nbsp;<span style="color: silver; ">=</span>&nbsp;<span style="color: maroon; ">[business_address]</span><span style="color: silver; ">.</span><span style="color: maroon; ">[businessentityid]</span>
<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: blue; ">join</span>&nbsp;<span style="color: maroon; ">[adventureworks2012]</span><span style="color: silver; ">.</span><span style="color: maroon; ">[person]</span><span style="color: silver; ">.</span><span style="color: maroon; ">[address]</span>&nbsp;<span style="color: blue; ">as</span>&nbsp;<span style="color: maroon; ">[address]</span>
<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: blue; ">on</span>&nbsp;<span style="color: maroon; ">[address]</span><span style="color: silver; ">.</span><span style="color: maroon; ">[addressid]</span>&nbsp;<span style="color: silver; ">=</span>&nbsp;<span style="color: maroon; ">[business_address]</span><span style="color: silver; ">.</span><span style="color: maroon; ">[addressid]</span>
<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: blue; ">join</span>&nbsp;<span style="color: maroon; ">[adventureworks2012]</span><span style="color: silver; ">.</span><span style="color: maroon; ">[person]</span><span style="color: silver; ">.</span><span style="color: maroon; ">[stateprovince]</span>&nbsp;<span style="color: blue; ">as</span>&nbsp;<span style="color: maroon; ">[state]</span>
<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: blue; ">on</span>&nbsp;<span style="color: maroon; ">[state]</span><span style="color: silver; ">.</span><span style="color: maroon; ">[stateprovinceid]</span>&nbsp;<span style="color: silver; ">=</span>&nbsp;<span style="color: maroon; ">[address]</span><span style="color: silver; ">.</span><span style="color: maroon; ">[stateprovinceid]</span>
<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: blue; ">join</span>&nbsp;<span style="color: maroon; ">[adventureworks2012]</span><span style="color: silver; ">.</span><span style="color: maroon; ">[sales]</span><span style="color: silver; ">.</span><span style="color: maroon; ">[salesperson]</span>&nbsp;<span style="color: blue; ">as</span>&nbsp;<span style="color: maroon; ">[sales_person]</span>
<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: blue; ">on</span>&nbsp;<span style="color: maroon; ">[sales_person]</span><span style="color: silver; ">.</span><span style="color: maroon; ">[businessentityid]</span>&nbsp;<span style="color: silver; ">=</span>&nbsp;<span style="color: maroon; ">[person]</span><span style="color: silver; ">.</span><span style="color: maroon; ">[businessentityid]</span>
<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: blue; ">order</span>&nbsp;&nbsp;<span style="color: blue; ">by</span>&nbsp;<span style="color: maroon; ">[address]</span><span style="color: silver; ">.</span><span style="color: maroon; ">[city]</span>
<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: silver; ">,</span>&nbsp;<span style="color: maroon; ">[person]</span><span style="color: silver; ">.</span><span style="color: maroon; ">[lastname]</span>
<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: silver; ">,</span>&nbsp;<span style="color: maroon; ">[person]</span><span style="color: silver; ">.</span><span style="color: maroon; ">[firstname]</span>
<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: blue; ">for</span>&nbsp;<span style="color: maroon; ">xml</span>&nbsp;<span style="color: maroon; ">path</span><span style="color: maroon; ">(</span><span style="color: red; ">'application'</span><span style="color: maroon; ">)</span><span style="color: silver; ">,</span>&nbsp;<span style="color: maroon; ">root</span>&nbsp;<span style="color: maroon; ">(</span><span style="color: red; ">'application_tree'</span><span style="color: maroon; ">)</span><span style="color: maroon; ">)</span><span style="color: silver; ">;</span>
<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: blue; ">return</span>&nbsp;<span style="color: #8000FF; ">@return</span><span style="color: silver; ">;</span>
<br/>&nbsp;&nbsp;<span style="color: blue; ">end</span>
<br/><span style="color: maroon; ">go</span>
<br/><span style="color: green; font-style: italic; ">&#45;&#45;</span>
<br/><span style="color: green; font-style: italic; ">&#45;&#45;&nbsp;Now&nbsp;test&nbsp;data&nbsp;can&nbsp;be&nbsp;accessed&nbsp;by&nbsp;a&nbsp;straight&nbsp;select&nbsp;or&nbsp;by&nbsp;declaration&nbsp;of&nbsp;a&nbsp;variable</span>
<br/><span style="color: blue; ">select</span>&nbsp;<span style="color: fuchsia; font-style: italic; ">convert</span><span style="color: maroon; ">(</span><span style="color: black; font-style: italic; ">[nvarchar]</span><span style="color: maroon; ">(</span><span style="color: maroon; ">max</span><span style="color: maroon; ">)</span><span style="color: silver; ">,</span>&nbsp;<span style="color: maroon; ">[xquery_demo]</span><span style="color: silver; ">.</span><span style="color: #FF0080; font-weight: bold; ">[get_person]</span><span style="color: maroon; ">(</span><span style="color: maroon; ">)</span><span style="color: maroon; ">)</span><span style="color: silver; ">;</span>
<br/><span style="color: blue; ">declare</span>&nbsp;<span style="color: #8000FF; ">@application</span>&nbsp;<span style="color: black; font-style: italic; ">[xml]</span>&nbsp;<span style="color: silver; ">=</span>&nbsp;<span style="color: maroon; ">[xquery_demo]</span><span style="color: silver; ">.</span><span style="color: #FF0080; font-weight: bold; ">[get_person]</span><span style="color: maroon; ">(</span><span style="color: maroon; ">)</span><span style="color: silver; ">;</span>
<br/><span style="color: blue; ">select</span>&nbsp;<span style="color: #8000FF; ">@application</span>
<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: silver; ">,</span>&nbsp;<span style="color: maroon; ">[xquery_demo]</span><span style="color: silver; ">.</span><span style="color: #FF0080; font-weight: bold; ">[get_person]</span><span style="color: maroon; ">(</span><span style="color: maroon; ">)</span><span style="color: silver; ">;</span>
<br/><span style="color: maroon; ">go</span>
<br/><span style="color: green; font-style: italic; ">&#45;&#45;&nbsp;code&nbsp;block&nbsp;end</span>
<br/><span style="color: green; font-style: italic; ">&#45;&#45;</span>
<br/><span style="color: green; font-style: italic; ">&#45;&#45;&nbsp;&nbsp;XQUERY&nbsp;CONSISTS&nbsp;OF&nbsp;FIVE&nbsp;METHODS&nbsp;-&nbsp;query(),&nbsp;value(),&nbsp;exist(),&nbsp;nodes(),&nbsp;modify();</span>
<br/><span style="color: green; font-style: italic; ">&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;</span>
<br/><span style="color: green; font-style: italic; ">&#45;&#45;&nbsp;code&nbsp;block&nbsp;begin</span>
<br/><span style="color: green; font-style: italic; ">&#45;&#45;</span>
<br/><span style="color: green; font-style: italic; ">&#45;&#45;&nbsp;FILTERED&nbsp;DATA</span>
<br/><span style="color: green; font-style: italic; ">&#45;&#45;&nbsp;The&nbsp;query()&nbsp;method</span>
<br/><span style="color: green; font-style: italic; ">&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;</span>
<br/><span style="color: green; font-style: italic; ">&#45;&#45;</span>
<br/><span style="color: green; font-style: italic; ">&#45;&#45;&nbsp;Get&nbsp;all&nbsp;records&nbsp;with&nbsp;a&nbsp;city&nbsp;attribute&nbsp;of&nbsp;"Yonkers"</span>
<br/><span style="color: blue; ">declare</span>&nbsp;<span style="color: #8000FF; ">@application</span>&nbsp;<span style="color: black; font-style: italic; ">[xml]</span>&nbsp;<span style="color: silver; ">=</span>&nbsp;<span style="color: maroon; ">[xquery_demo]</span><span style="color: silver; ">.</span><span style="color: #FF0080; font-weight: bold; ">[get_person]</span><span style="color: maroon; ">(</span><span style="color: maroon; ">)</span><span style="color: silver; ">;</span>
<br/><span style="color: blue; ">select</span>&nbsp;<span style="color: #8000FF; ">@application</span><span style="color: silver; ">.</span><span style="color: #FF0080; font-weight: bold; ">query</span><span style="color: maroon; ">(</span><span style="color: red; ">'application_tree/application[@city=&quot;Bellevue&quot;]'</span><span style="color: maroon; ">)</span><span style="color: silver; ">;</span>
<br/><span style="color: blue; ">select</span>&nbsp;<span style="color: maroon; ">[xquery_demo]</span><span style="color: silver; ">.</span><span style="color: #FF0080; font-weight: bold; ">[get_person]</span><span style="color: maroon; ">(</span><span style="color: maroon; ">)</span><span style="color: silver; ">.</span><span style="color: #FF0080; font-weight: bold; ">query</span><span style="color: maroon; ">(</span><span style="color: red; ">'application_tree/application[@city=&quot;Bellevue&quot;]'</span><span style="color: maroon; ">)</span><span style="color: silver; ">;</span>
<br/><span style="color: maroon; ">go</span>
<br/><span style="color: green; font-style: italic; ">&#45;&#45;&nbsp;code&nbsp;block&nbsp;end</span>
<br/><span style="color: green; font-style: italic; ">&#45;&#45;&nbsp;code&nbsp;block&nbsp;begin</span>
<br/><span style="color: green; font-style: italic; ">&#45;&#45;</span>
<br/><span style="color: green; font-style: italic; ">&#45;&#45;&nbsp;NOTE&nbsp;THAT&nbsp;THIS&nbsp;DOES&nbsp;NOT&nbsp;WORK!!!!&nbsp;XQUERY&nbsp;IS&nbsp;CASE&nbsp;SENSITIVE</span>
<br/><span style="color: blue; ">declare</span>&nbsp;<span style="color: #8000FF; ">@application</span>&nbsp;<span style="color: black; font-style: italic; ">[xml]</span>&nbsp;<span style="color: silver; ">=</span>&nbsp;<span style="color: maroon; ">[xquery_demo]</span><span style="color: silver; ">.</span><span style="color: #FF0080; font-weight: bold; ">[get_person]</span><span style="color: maroon; ">(</span><span style="color: maroon; ">)</span><span style="color: silver; ">;</span>
<br/><span style="color: blue; ">select</span>&nbsp;<span style="color: #8000FF; ">@application</span><span style="color: silver; ">.</span><span style="color: #FF0080; font-weight: bold; ">query</span><span style="color: maroon; ">(</span><span style="color: red; ">'application_tree/application[@city=&quot;BELLEVUE&quot;]'</span><span style="color: maroon; ">)</span><span style="color: silver; ">;</span>
<br/><span style="color: maroon; ">go</span>
<br/><span style="color: green; font-style: italic; ">&#45;&#45;&nbsp;code&nbsp;block&nbsp;end</span>
<br/><span style="color: green; font-style: italic; ">&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;</span>
<br/><span style="color: green; font-style: italic; ">&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;</span>
<br/><span style="color: green; font-style: italic; ">&#45;&#45;&nbsp;MULTIPLE&nbsp;FILTERS</span>
<br/><span style="color: green; font-style: italic; ">&#45;&#45;&nbsp;The&nbsp;query()&nbsp;method</span>
<br/><span style="color: green; font-style: italic; ">&#45;&#45;&nbsp;Multiple&nbsp;filters&nbsp;can&nbsp;be&nbsp;used&nbsp;within&nbsp;one&nbsp;query</span>
<br/><span style="color: green; font-style: italic; ">&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;</span>
<br/><span style="color: green; font-style: italic; ">&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;</span>
<br/><span style="color: green; font-style: italic; ">&#45;&#45;</span>
<br/><span style="color: green; font-style: italic; ">&#45;&#45;&nbsp;code&nbsp;block&nbsp;begin</span>
<br/><span style="color: green; font-style: italic; ">&#45;&#45;&nbsp;Get&nbsp;all&nbsp;records&nbsp;with&nbsp;a&nbsp;first_name&nbsp;attribute&nbsp;of&nbsp;"Alberts"&nbsp;and&nbsp;last_name&nbsp;attribute&nbsp;of&nbsp;"Alberts"</span>
<br/><span style="color: blue; ">select</span>&nbsp;<span style="color: maroon; ">[xquery_demo]</span><span style="color: silver; ">.</span><span style="color: #FF0080; font-weight: bold; ">[get_person]</span><span style="color: maroon; ">(</span><span style="color: maroon; ">)</span><span style="color: silver; ">.</span><span style="color: #FF0080; font-weight: bold; ">query</span><span style="color: maroon; ">(</span><span style="color: red; ">'application_tree/application[@first_name=&quot;Amy&quot;][@last_name=&quot;Alberts&quot;]'</span><span style="color: maroon; ">)</span><span style="color: silver; ">;</span>
<br/><span style="color: maroon; ">go</span>
<br/><span style="color: green; font-style: italic; ">&#45;&#45;&nbsp;code&nbsp;block&nbsp;end</span>
<br/><span style="color: green; font-style: italic; ">&#45;&#45;&nbsp;begin&nbsp;code&nbsp;block</span>
<br/><span style="color: green; font-style: italic; ">&#45;&#45;&nbsp;find&nbsp;nodes&nbsp;by&nbsp;local&nbsp;name</span>
<br/><span style="color: blue; ">declare</span>&nbsp;<span style="color: #8000FF; ">@application</span>&nbsp;<span style="color: black; font-style: italic; ">[xml]</span>&nbsp;<span style="color: silver; ">=</span>&nbsp;<span style="color: red; ">N'
<br/>		&#60;test_stack&nbsp;object_count=&quot;0&quot;&nbsp;test_count=&quot;0&quot;&nbsp;pass_count=&quot;0&quot;&nbsp;environment=&quot;[LOIS].[LOIS].[KATE_01].[chamomile].[test].[run].[LOIS]&quot;&nbsp;user=&quot;Lois\Katherine&quot;&nbsp;timestamp=&quot;2014-02-13&nbsp;16:46:11.327&quot;>
<br/>		&nbsp;&nbsp;&#60;log&nbsp;xmlns:noetic=&quot;http://www.katherinelightsey.com/&quot;&nbsp;user=&quot;Lois\Katherine&quot;&nbsp;timestamp=&quot;2014-02-13T16:46:11.33&quot;>
<br/>			&#60;object_fqn&nbsp;environment=&quot;[LOIS].[LOIS].[KATE_01].[chamomile].[utility_test].[log.xsc]&quot;&nbsp;/>
<br/>			&#60;log_entry&nbsp;object_type=&quot;result&quot;>
<br/>			&nbsp;&nbsp;&#60;any_valid_xml>test&#60;no_matter&nbsp;/>&#60;how_complex>it&nbsp;is&#60;/how_complex>&#60;/any_valid_xml>
<br/>			&#60;/log_entry>
<br/>		&nbsp;&nbsp;&#60;/log>
<br/>		&nbsp;&nbsp;&#60;log&nbsp;user=&quot;Lois\Katherine&quot;&nbsp;timestamp=&quot;2014-02-13T16:46:11.333&quot;>
<br/>			&#60;object_fqn&nbsp;environment=&quot;[LOIS].[LOIS].[KATE_01].[chamomile].[utility_test].[log.set]&quot;&nbsp;/>
<br/>			&#60;log_entry&nbsp;object_type=&quot;result&quot;>
<br/>			&nbsp;&nbsp;&#60;any_valid_xml>test&#60;no_matter&nbsp;/>&#60;how_complex>it&nbsp;is&#60;/how_complex>&#60;/any_valid_xml>
<br/>			&#60;/log_entry>
<br/>		&nbsp;&nbsp;&#60;/log>
<br/>		&#60;/test_stack>'</span><span style="color: silver; ">;</span>
<br/><span style="color: blue; ">select</span>&nbsp;<span style="color: #8000FF; ">@application</span><span style="color: silver; ">.</span><span style="color: #FF0080; font-weight: bold; ">exist</span><span style="color: maroon; ">(</span><span style="color: red; ">'//*[local-name()=&quot;log_entry&quot;]'</span><span style="color: maroon; ">)</span><span style="color: silver; ">;</span>
<br/><span style="color: blue; ">select</span>&nbsp;<span style="color: #8000FF; ">@application</span><span style="color: silver; ">.</span><span style="color: #FF0080; font-weight: bold; ">value</span><span style="color: maroon; ">(</span><span style="color: red; ">'(//*[local-name()=&quot;log_entry&quot;]/@object_type)[1]'</span><span style="color: silver; ">,</span>&nbsp;<span style="color: red; ">N'[sysname]'</span><span style="color: maroon; ">)</span><span style="color: silver; ">;</span>
<br/><span style="color: blue; ">select</span>&nbsp;<span style="color: #8000FF; ">@application</span><span style="color: silver; ">.</span><span style="color: #FF0080; font-weight: bold; ">query</span><span style="color: maroon; ">(</span><span style="color: red; ">'//*[local-name()=&quot;log_entry&quot;][@object_type=&quot;result&quot;]'</span><span style="color: maroon; ">)</span><span style="color: silver; ">;</span>
<br/><span style="color: blue; ">select</span>&nbsp;<span style="color: #8000FF; ">@application</span><span style="color: silver; ">.</span><span style="color: #FF0080; font-weight: bold; ">value</span><span style="color: maroon; ">(</span><span style="color: red; ">'count&nbsp;(//*[local-name()=&quot;log_entry&quot;][@object_type=&quot;result&quot;])[1]'</span><span style="color: silver; ">,</span>&nbsp;<span style="color: red; ">N'[int]'</span><span style="color: maroon; ">)</span><span style="color: silver; ">;</span>
<br/><span style="color: maroon; ">go</span>
<br/><span style="color: green; font-style: italic; ">&#45;&#45;&nbsp;end&nbsp;code&nbsp;block</span>
<br/><span style="color: green; font-style: italic; ">&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;</span>
<br/><span style="color: green; font-style: italic; ">&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;</span>
<br/><span style="color: green; font-style: italic; ">&#45;&#45;&nbsp;USING&nbsp;THE&nbsp;VALUE()&nbsp;METHOD:&nbsp;SUM&nbsp;AND&nbsp;COUNT</span>
<br/><span style="color: green; font-style: italic; ">&#45;&#45;&nbsp;[xml]&nbsp;FUNCTIONS:&nbsp;http://msdn.microsoft.com/en-us/library/ms189254.aspx</span>
<br/><span style="color: green; font-style: italic; ">&#45;&#45;&nbsp;Some&nbsp;of&nbsp;the&nbsp;[xml]&nbsp;functions&nbsp;available&nbsp;include&nbsp;ceiling,&nbsp;floor,&nbsp;round,&nbsp;concat,&nbsp;contains,&nbsp;substring,&nbsp;lower-case,</span>
<br/><span style="color: green; font-style: italic; ">&#45;&#45;&nbsp;&nbsp;string-length,&nbsp;upper-case,&nbsp;not,&nbsp;number,&nbsp;local-name,&nbsp;namespace-uri,&nbsp;last,&nbsp;position,&nbsp;empty,&nbsp;distinct-values,</span>
<br/><span style="color: green; font-style: italic; ">&#45;&#45;&nbsp;&nbsp;id,&nbsp;count,&nbsp;avg,&nbsp;min,&nbsp;max,&nbsp;sum,&nbsp;string,&nbsp;data,&nbsp;true,&nbsp;false,&nbsp;expanded-QName,&nbsp;local-name-from-QName,</span>
<br/><span style="color: green; font-style: italic; ">&#45;&#45;&nbsp;&nbsp;namespace-uri-from-QName,&nbsp;sql:column(),&nbsp;sql:variable().</span>
<br/><span style="color: green; font-style: italic; ">&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;</span>
<br/><span style="color: green; font-style: italic; ">&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;</span>
<br/><span style="color: green; font-style: italic; ">&#45;&#45;&nbsp;begin&nbsp;code&nbsp;block</span>
<br/><span style="color: blue; ">declare</span>&nbsp;<span style="color: #8000FF; ">@application</span>&nbsp;<span style="color: black; font-style: italic; ">[xml]</span>&nbsp;<span style="color: silver; ">=</span>&nbsp;<span style="color: maroon; ">[xquery_demo]</span><span style="color: silver; ">.</span><span style="color: #FF0080; font-weight: bold; ">[get_person]</span><span style="color: maroon; ">(</span><span style="color: maroon; ">)</span><span style="color: silver; ">;</span>
<br/><span style="color: blue; ">select</span>&nbsp;<span style="color: #8000FF; ">@application</span><span style="color: silver; ">;</span>
<br/><span style="color: green; font-style: italic; ">&#45;&#45;</span>
<br/><span style="color: green; font-style: italic; ">&#45;&#45;&nbsp;Use&nbsp;the&nbsp;"sum"&nbsp;function&nbsp;to&nbsp;get&nbsp;the&nbsp;sum&nbsp;of&nbsp;all&nbsp;bonuses</span>
<br/><span style="color: blue; ">select</span>&nbsp;<span style="color: #8000FF; ">@application</span><span style="color: silver; ">.</span><span style="color: #FF0080; font-weight: bold; ">value</span><span style="color: maroon; ">(</span><span style="color: red; ">'sum&nbsp;(/application_tree/application/@bonus)'</span><span style="color: silver; ">,</span>&nbsp;<span style="color: red; ">'float'</span><span style="color: maroon; ">)</span><span style="color: silver; ">;</span>
<br/><span style="color: green; font-style: italic; ">&#45;&#45;</span>
<br/><span style="color: green; font-style: italic; ">&#45;&#45;&nbsp;Use&nbsp;the&nbsp;"count"&nbsp;function&nbsp;to&nbsp;get&nbsp;the&nbsp;count&nbsp;of&nbsp;all&nbsp;sales&nbsp;persons</span>
<br/><span style="color: blue; ">select</span>&nbsp;<span style="color: #8000FF; ">@application</span><span style="color: silver; ">.</span><span style="color: #FF0080; font-weight: bold; ">value</span><span style="color: maroon; ">(</span><span style="color: red; ">'count&nbsp;(/application_tree/application)'</span><span style="color: silver; ">,</span>&nbsp;<span style="color: red; ">'[int]'</span><span style="color: maroon; ">)</span><span style="color: silver; ">;</span>
<br/><span style="color: maroon; ">go</span>
<br/><span style="color: green; font-style: italic; ">&#45;&#45;&nbsp;end&nbsp;code&nbsp;block</span>
<br/><span style="color: green; font-style: italic; ">&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;</span>
<br/><span style="color: green; font-style: italic; ">&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;</span>
<br/><span style="color: green; font-style: italic; ">&#45;&#45;&nbsp;BUILDING&nbsp;A&nbsp;TREE&nbsp;-&nbsp;ADDING&nbsp;NODES&nbsp;AND&nbsp;ATTRIBUTES&nbsp;AND&nbsp;GETTING&nbsp;SUM&nbsp;AND&nbsp;COUNT</span>
<br/><span style="color: green; font-style: italic; ">&#45;&#45;&nbsp;The&nbsp;modify()&nbsp;methods</span>
<br/><span style="color: green; font-style: italic; ">&#45;&#45;&nbsp;Using&nbsp;modify()&nbsp;to&nbsp;add&nbsp;data&nbsp;to&nbsp;a&nbsp;tree</span>
<br/><span style="color: green; font-style: italic; ">&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;</span>
<br/><span style="color: green; font-style: italic; ">&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;</span>
<br/><span style="color: green; font-style: italic; ">&#45;&#45;&nbsp;begin&nbsp;code&nbsp;block</span>
<br/><span style="color: blue; ">declare</span>&nbsp;<span style="color: #8000FF; ">@application</span>&nbsp;<span style="color: black; font-style: italic; ">[xml]</span>&nbsp;<span style="color: silver; ">=</span>&nbsp;<span style="color: maroon; ">[xquery_demo]</span><span style="color: silver; ">.</span><span style="color: #FF0080; font-weight: bold; ">[get_person]</span><span style="color: maroon; ">(</span><span style="color: maroon; ">)</span><span style="color: silver; ">;</span>
<br/><span style="color: green; font-style: italic; ">&#45;&#45;</span>
<br/><span style="color: green; font-style: italic; ">&#45;&#45;&nbsp;build&nbsp;sum&nbsp;and&nbsp;count&nbsp;to&nbsp;insert&nbsp;as&nbsp;attributes&nbsp;into&nbsp;application</span>
<br/><span style="color: blue; ">declare</span>&nbsp;<span style="color: #8000FF; ">@sum</span>&nbsp;<span style="color: black; font-style: italic; ">numeric</span><span style="color: maroon; ">(</span><span style="color: black; ">38</span><span style="color: silver; ">,</span>&nbsp;<span style="color: black; ">2</span><span style="color: maroon; ">)</span>&nbsp;<span style="color: silver; ">=</span>&nbsp;<span style="color: #8000FF; ">@application</span><span style="color: silver; ">.</span><span style="color: #FF0080; font-weight: bold; ">value</span><span style="color: maroon; ">(</span><span style="color: red; ">'sum&nbsp;(/application_tree/application/@bonus)'</span><span style="color: silver; ">,</span>&nbsp;<span style="color: red; ">'float'</span><span style="color: maroon; ">)</span><span style="color: silver; ">;</span>
<br/><span style="color: blue; ">declare</span>&nbsp;<span style="color: #8000FF; ">@count</span>&nbsp;<span style="color: black; font-style: italic; ">[int]</span>&nbsp;<span style="color: silver; ">=</span>&nbsp;<span style="color: #8000FF; ">@application</span><span style="color: silver; ">.</span><span style="color: #FF0080; font-weight: bold; ">value</span><span style="color: maroon; ">(</span><span style="color: red; ">'count&nbsp;(/application_tree/application)'</span><span style="color: silver; ">,</span>&nbsp;<span style="color: red; ">'[int]'</span><span style="color: maroon; ">)</span><span style="color: silver; ">;</span>
<br/><span style="color: green; font-style: italic; ">&#45;&#45;</span>
<br/><span style="color: green; font-style: italic; ">&#45;&#45;&nbsp;build&nbsp;two&nbsp;new&nbsp;trees&nbsp;to&nbsp;insert&nbsp;into&nbsp;application</span>
<br/><span style="color: blue; ">declare</span>&nbsp;<span style="color: #8000FF; ">@new_tree</span>&nbsp;<span style="color: black; font-style: italic; ">[xml]</span>&nbsp;<span style="color: silver; ">=</span>&nbsp;<span style="color: red; ">N'&#60;new_tree>&#60;level_01&nbsp;data=&quot;some&nbsp;data&quot;>&#60;level_02>Data&nbsp;goes&nbsp;in&nbsp;level&nbsp;2&#60;/level_02>&#60;/level_01>&#60;/new_tree>'</span><span style="color: silver; ">;</span>
<br/><span style="color: blue; ">declare</span>&nbsp;<span style="color: #8000FF; ">@another_new_tree</span>&nbsp;<span style="color: black; font-style: italic; ">[xml]</span>&nbsp;<span style="color: silver; ">=</span>&nbsp;<span style="color: red; ">N'&#60;another_new_tree&nbsp;has_data=&quot;maybe&quot;>But&nbsp;do&nbsp;you&nbsp;care?&#60;/another_new_tree>'</span><span style="color: silver; ">;</span>
<br/><span style="color: green; font-style: italic; ">&#45;&#45;</span>
<br/><span style="color: green; font-style: italic; ">&#45;&#45;&nbsp;Insert&nbsp;the&nbsp;new&nbsp;objects</span>
<br/><span style="color: blue; ">set</span>&nbsp;<span style="color: #8000FF; ">@application</span><span style="color: silver; ">.</span><span style="color: #FF0080; font-weight: bold; ">modify</span><span style="color: maroon; ">(</span><span style="color: red; ">'insert&nbsp;attribute&nbsp;sales_person_count&nbsp;{sql:variable(&quot;@count&quot;)}&nbsp;as&nbsp;first&nbsp;into&nbsp;(/application_tree)[1]'</span><span style="color: maroon; ">)</span><span style="color: silver; ">;</span>
<br/><span style="color: blue; ">set</span>&nbsp;<span style="color: #8000FF; ">@application</span><span style="color: silver; ">.</span><span style="color: #FF0080; font-weight: bold; ">modify</span><span style="color: maroon; ">(</span><span style="color: red; ">'insert&nbsp;attribute&nbsp;sum_of_bonuses&nbsp;{sql:variable(&quot;@sum&quot;)}&nbsp;as&nbsp;last&nbsp;into&nbsp;(/application_tree)[1]'</span><span style="color: maroon; ">)</span>
<br/><span style="color: blue; ">set</span>&nbsp;<span style="color: #8000FF; ">@application</span><span style="color: silver; ">.</span><span style="color: #FF0080; font-weight: bold; ">modify</span><span style="color: maroon; ">(</span><span style="color: red; ">'insert&nbsp;sql:variable(&quot;@new_tree&quot;)&nbsp;as&nbsp;first&nbsp;into&nbsp;(/application_tree)[1]'</span><span style="color: maroon; ">)</span><span style="color: silver; ">;</span>
<br/><span style="color: blue; ">set</span>&nbsp;<span style="color: #8000FF; ">@application</span><span style="color: silver; ">.</span><span style="color: #FF0080; font-weight: bold; ">modify</span><span style="color: maroon; ">(</span><span style="color: red; ">'insert&nbsp;sql:variable(&quot;@another_new_tree&quot;)&nbsp;after&nbsp;(/application_tree/new_tree/level_01)[1]'</span><span style="color: maroon; ">)</span><span style="color: silver; ">;</span>
<br/><span style="color: blue; ">set</span>&nbsp;<span style="color: #8000FF; ">@application</span><span style="color: silver; ">.</span><span style="color: #FF0080; font-weight: bold; ">modify</span><span style="color: maroon; ">(</span><span style="color: red; ">N'insert&nbsp;text&nbsp;{&quot;free&nbsp;text&nbsp;goes&nbsp;here&quot;}&nbsp;as&nbsp;last&nbsp;into&nbsp;(/application_tree/new_tree)[1]'</span><span style="color: maroon; ">)</span><span style="color: silver; ">;</span>
<br/><span style="color: blue; ">select</span>&nbsp;<span style="color: #8000FF; ">@application</span>&nbsp;<span style="color: blue; ">as</span>&nbsp;<span style="color: red; ">N'Complete&nbsp;New&nbsp;Tree'</span><span style="color: silver; ">;</span>
<br/><span style="color: blue; ">set</span>&nbsp;<span style="color: #8000FF; ">@application</span><span style="color: silver; ">.</span><span style="color: #FF0080; font-weight: bold; ">modify</span><span style="color: maroon; ">(</span><span style="color: red; ">N'replace&nbsp;value&nbsp;of&nbsp;(/application_tree/new_tree/text())[1]&nbsp;with&nbsp;&quot;modified&nbsp;text&nbsp;goes&nbsp;here&quot;'</span><span style="color: maroon; ">)</span><span style="color: silver; ">;</span>
<br/><span style="color: blue; ">select</span>&nbsp;<span style="color: #8000FF; ">@application</span>&nbsp;<span style="color: blue; ">as</span>&nbsp;<span style="color: red; ">N'Modified&nbsp;New&nbsp;Tree'</span><span style="color: silver; ">;</span>
<br/><span style="color: blue; ">declare</span>&nbsp;<span style="color: #8000FF; ">@n</span>&nbsp;<span style="color: black; font-style: italic; ">[sysname]</span>&nbsp;<span style="color: silver; ">=</span>&nbsp;<span style="color: red; ">N'&nbsp;-&nbsp;adding&nbsp;text&nbsp;to&nbsp;existing&nbsp;text'</span><span style="color: silver; ">;</span>
<br/><span style="color: blue; ">set</span>&nbsp;<span style="color: #8000FF; ">@application</span><span style="color: silver; ">.</span><span style="color: #FF0080; font-weight: bold; ">modify</span><span style="color: maroon; ">(</span><span style="color: red; ">N'insert&nbsp;text&nbsp;{sql:variable(&quot;@n&quot;)}&nbsp;as&nbsp;last&nbsp;into&nbsp;(/application_tree/new_tree)[1]'</span><span style="color: maroon; ">)</span><span style="color: silver; ">;</span>
<br/><span style="color: blue; ">select</span>&nbsp;<span style="color: #8000FF; ">@application</span>&nbsp;<span style="color: blue; ">as</span>&nbsp;<span style="color: red; ">N'Modified&nbsp;New&nbsp;Tree&nbsp;with&nbsp;added&nbsp;text'</span><span style="color: silver; ">;</span>
<br/><span style="color: maroon; ">go</span>
<br/><span style="color: green; font-style: italic; ">&#45;&#45;&nbsp;end&nbsp;code&nbsp;block</span>
<br/><span style="color: green; font-style: italic; ">&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;</span>
<br/><span style="color: green; font-style: italic; ">&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;</span>
<br/><span style="color: green; font-style: italic; ">&#45;&#45;&nbsp;BUILDING&nbsp;A&nbsp;TREE&nbsp;-&nbsp;DELETING&nbsp;ATTRIBUTES,&nbsp;ELEMENTS,&nbsp;AND&nbsp;ELEMENT&nbsp;TEXT</span>
<br/><span style="color: green; font-style: italic; ">&#45;&#45;&nbsp;The&nbsp;&nbsp;modify()&nbsp;method</span>
<br/><span style="color: green; font-style: italic; ">&#45;&#45;&nbsp;modify()&nbsp;to&nbsp;remove&nbsp;data&nbsp;from&nbsp;a&nbsp;tree</span>
<br/><span style="color: green; font-style: italic; ">&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;</span>
<br/><span style="color: green; font-style: italic; ">&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;</span>
<br/><span style="color: green; font-style: italic; ">&#45;&#45;&nbsp;begin&nbsp;code&nbsp;block</span>
<br/><span style="color: blue; ">declare</span>&nbsp;<span style="color: #8000FF; ">@application</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: black; font-style: italic; ">[xml]</span>&nbsp;<span style="color: silver; ">=</span>&nbsp;<span style="color: maroon; ">[xquery_demo]</span><span style="color: silver; ">.</span><span style="color: #FF0080; font-weight: bold; ">[get_person]</span><span style="color: maroon; ">(</span><span style="color: maroon; ">)</span>
<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: silver; ">,</span>&nbsp;<span style="color: #8000FF; ">@modified_tree</span>&nbsp;<span style="color: black; font-style: italic; ">[xml]</span><span style="color: silver; ">;</span>
<br/><span style="color: green; font-style: italic; ">&#45;&#45;</span>
<br/><span style="color: green; font-style: italic; ">&#45;&#45;&nbsp;build&nbsp;two&nbsp;new&nbsp;trees&nbsp;to&nbsp;add&nbsp;to&nbsp;application</span>
<br/><span style="color: blue; ">declare</span>&nbsp;<span style="color: #8000FF; ">@new_tree</span>&nbsp;<span style="color: black; font-style: italic; ">[xml]</span>&nbsp;<span style="color: silver; ">=</span>&nbsp;<span style="color: red; ">N'&#60;new_tree>&#60;level_01&nbsp;data=&quot;some&nbsp;data&quot;>&#60;Level2>Data&nbsp;goes&nbsp;in&nbsp;level&nbsp;2&#60;/Level2>&#60;/level_01>&#60;/new_tree>'</span><span style="color: silver; ">;</span>
<br/><span style="color: blue; ">declare</span>&nbsp;<span style="color: #8000FF; ">@another_new_tree</span>&nbsp;<span style="color: black; font-style: italic; ">[xml]</span>&nbsp;<span style="color: silver; ">=</span>&nbsp;<span style="color: red; ">N'&#60;another_new_tree&nbsp;hasdata=&quot;maybe&quot;>But&nbsp;do&nbsp;you&nbsp;care?&#60;/another_new_tree>'</span><span style="color: silver; ">;</span>
<br/><span style="color: green; font-style: italic; ">&#45;&#45;</span>
<br/><span style="color: green; font-style: italic; ">&#45;&#45;&nbsp;Insert&nbsp;the&nbsp;new&nbsp;trees&nbsp;into&nbsp;application</span>
<br/><span style="color: blue; ">set</span>&nbsp;<span style="color: #8000FF; ">@application</span><span style="color: silver; ">.</span><span style="color: #FF0080; font-weight: bold; ">modify</span><span style="color: maroon; ">(</span><span style="color: red; ">'insert&nbsp;sql:variable(&quot;@new_tree&quot;)&nbsp;as&nbsp;first&nbsp;into&nbsp;(/application_tree)[1]'</span><span style="color: maroon; ">)</span><span style="color: silver; ">;</span>
<br/><span style="color: blue; ">set</span>&nbsp;<span style="color: #8000FF; ">@application</span><span style="color: silver; ">.</span><span style="color: #FF0080; font-weight: bold; ">modify</span><span style="color: maroon; ">(</span><span style="color: red; ">'insert&nbsp;sql:variable(&quot;@another_new_tree&quot;)&nbsp;after&nbsp;(/application_tree/new_tree/level_01)[1]'</span><span style="color: maroon; ">)</span><span style="color: silver; ">;</span>
<br/><span style="color: green; font-style: italic; ">&#45;&#45;</span>
<br/><span style="color: green; font-style: italic; ">&#45;&#45;&nbsp;Build&nbsp;a&nbsp;modified&nbsp;tree</span>
<br/><span style="color: blue; ">set</span>&nbsp;<span style="color: #8000FF; ">@modified_tree</span><span style="color: silver; ">=</span><span style="color: #8000FF; ">@application</span><span style="color: silver; ">;</span>
<br/><span style="color: green; font-style: italic; ">&#45;&#45;</span>
<br/><span style="color: green; font-style: italic; ">&#45;&#45;&nbsp;Deleting&nbsp;an&nbsp;attribute</span>
<br/><span style="color: blue; ">set</span>&nbsp;<span style="color: #8000FF; ">@modified_tree</span><span style="color: silver; ">.</span><span style="color: #FF0080; font-weight: bold; ">modify</span><span style="color: maroon; ">(</span><span style="color: red; ">'delete&nbsp;/application_tree/new_tree/level_01/@data'</span><span style="color: maroon; ">)</span><span style="color: silver; ">;</span>
<br/><span style="color: green; font-style: italic; ">&#45;&#45;</span>
<br/><span style="color: green; font-style: italic; ">&#45;&#45;&nbsp;Deleting&nbsp;text&nbsp;in&nbsp;a&nbsp;node</span>
<br/><span style="color: blue; ">set</span>&nbsp;<span style="color: #8000FF; ">@modified_tree</span><span style="color: silver; ">.</span><span style="color: #FF0080; font-weight: bold; ">modify</span><span style="color: maroon; ">(</span><span style="color: red; ">'delete&nbsp;/application_tree/new_tree/another_new_tree/text()'</span><span style="color: maroon; ">)</span><span style="color: silver; ">;</span>
<br/><span style="color: green; font-style: italic; ">&#45;&#45;</span>
<br/><span style="color: green; font-style: italic; ">&#45;&#45;&nbsp;Deleting&nbsp;a&nbsp;node</span>
<br/><span style="color: blue; ">set</span>&nbsp;<span style="color: #8000FF; ">@modified_tree</span><span style="color: silver; ">.</span><span style="color: #FF0080; font-weight: bold; ">modify</span><span style="color: maroon; ">(</span><span style="color: red; ">'delete&nbsp;/application_tree/new_tree/another_new_tree[1]'</span><span style="color: maroon; ">)</span><span style="color: silver; ">;</span>
<br/><span style="color: blue; ">set</span>&nbsp;<span style="color: #8000FF; ">@modified_tree</span><span style="color: silver; ">.</span><span style="color: #FF0080; font-weight: bold; ">modify</span><span style="color: maroon; ">(</span><span style="color: red; ">'delete&nbsp;/application_tree/application[@first_name=&quot;LORETTA&quot;]&nbsp;[@last_name=&quot;ALLEN&quot;]'</span><span style="color: maroon; ">)</span><span style="color: silver; ">;</span>
<br/><span style="color: blue; ">select</span>&nbsp;<span style="color: #8000FF; ">@application</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: blue; ">as</span>&nbsp;<span style="color: red; ">N'Complete&nbsp;New&nbsp;Tree'</span>
<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: silver; ">,</span>&nbsp;<span style="color: #8000FF; ">@modified_tree</span>&nbsp;<span style="color: blue; ">as</span>&nbsp;<span style="color: red; ">N'Deleted&nbsp;/application_tree/new_tree/another_new_tree/text()'</span>
<br/><span style="color: maroon; ">go</span>
<br/><span style="color: green; font-style: italic; ">&#45;&#45;&nbsp;end&nbsp;code&nbsp;block</span>
<br/><span style="color: green; font-style: italic; ">&#45;&#45;</span>
<br/><span style="color: green; font-style: italic; ">&#45;&#45;&nbsp;begin</span>
<br/><span style="color: green; font-style: italic; ">&#45;&#45;&nbsp;deleting&nbsp;all&nbsp;nodes&nbsp;in&nbsp;a&nbsp;tree&nbsp;based&nbsp;on&nbsp;a&nbsp;sub-node&nbsp;or&nbsp;attribute&nbsp;on&nbsp;a&nbsp;sub&nbsp;node</span>
<br/><span style="color: green; font-style: italic; ">&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;-</span>
<br/><span style="color: blue; ">declare</span>&nbsp;<span style="color: #8000FF; ">@sequence</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: black; font-style: italic; ">[int]</span>&nbsp;<span style="color: silver; ">=</span>&nbsp;<span style="color: black; ">99</span>
<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: silver; ">,</span>&nbsp;<span style="color: #8000FF; ">@entry_builder</span>&nbsp;<span style="color: black; font-style: italic; ">xml</span>&nbsp;<span style="color: silver; ">=</span>&nbsp;<span style="color: red; ">N'&#60;chamomile:stack&nbsp;xmlns:chamomile=&quot;http://www.katherinelightsey.com/&quot;&nbsp;persistent=&quot;false&quot;&nbsp;timestamp=&quot;2014-07-18T14:16:00.7&quot;&nbsp;id=&quot;DEDCD4E5-AE0E-E411-A934-20689D66B6F7&quot;>
<br/>&nbsp;&nbsp;&#60;subject&nbsp;fqn=&quot;[mck790l8159].[mck790l8159].[chamomile].[chamomile].[repository].[set]&quot;>
<br/>&nbsp;&nbsp;&nbsp;&nbsp;&#60;description>created&nbsp;by&nbsp;[mck790l8159].[mck790l8159].[chamomile].[chamomile].[repository].[set]&#60;/description>
<br/>&nbsp;&nbsp;&#60;/subject>
<br/>&nbsp;&nbsp;&#60;object>
<br/>&nbsp;&nbsp;&nbsp;&nbsp;&#60;documentation&nbsp;fqn=&quot;[chamomile].[job].[get_change]&quot;&nbsp;stale=&quot;false&quot;&nbsp;timestamp=&quot;2014-07-18T13:56:57.76&quot;>
<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#60;text&nbsp;sequence=&quot;99&quot;>this&nbsp;job&nbsp;is&nbsp;the&nbsp;stuff,&nbsp;and&nbsp;here&nbsp;is&nbsp;some&nbsp;more&nbsp;stuff!&#60;/text>
<br/>&nbsp;&nbsp;&nbsp;&nbsp;&#60;/documentation>
<br/>&nbsp;&nbsp;&nbsp;&nbsp;&#60;documentation&nbsp;fqn=&quot;[chamomile].[job].[get_change]&quot;&nbsp;stale=&quot;false&quot;&nbsp;timestamp=&quot;2014-07-18T13:56:57.76&quot;>
<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#60;text&nbsp;sequence=&quot;99&quot;>this&nbsp;job&nbsp;is&nbsp;the&nbsp;stuff,&nbsp;and&nbsp;here&nbsp;is&nbsp;some&nbsp;more&nbsp;stuff!&nbsp;and&nbsp;yet&nbsp;more!&#60;/text>
<br/>&nbsp;&nbsp;&nbsp;&nbsp;&#60;/documentation>
<br/>&nbsp;&nbsp;&nbsp;&nbsp;&#60;documentation&nbsp;fqn=&quot;[chamomile].[job].[get_change]&quot;&nbsp;stale=&quot;false&quot;&nbsp;timestamp=&quot;2014-07-18T13:56:57.76&quot;>
<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#60;text&nbsp;sequence=&quot;99&quot;>this&nbsp;job&nbsp;is&nbsp;the&nbsp;stuff,&nbsp;and&nbsp;here&nbsp;is&nbsp;some&nbsp;more&nbsp;stuff!&nbsp;and&nbsp;yet&nbsp;more!&#60;/text>
<br/>&nbsp;&nbsp;&nbsp;&nbsp;&#60;/documentation>
<br/>&nbsp;&nbsp;&#60;/object>
<br/>&nbsp;&nbsp;&#60;result>
<br/>&nbsp;&nbsp;&nbsp;&nbsp;&#60;description>Description&nbsp;of&nbsp;result&#60;/description>
<br/>&nbsp;&nbsp;&#60;/result>
<br/>&#60;/chamomile:stack>'</span><span style="color: silver; ">;</span>
<br/><span style="color: blue; ">set</span>&nbsp;<span style="color: #8000FF; ">@entry_builder</span><span style="color: silver; ">.</span><span style="color: #FF0080; font-weight: bold; ">modify</span><span style="color: maroon; ">(</span><span style="color: red; ">'delete&nbsp;*/object/documentation[text/@sequence=sql:variable(&quot;@sequence&quot;)]'</span><span style="color: maroon; ">)</span><span style="color: silver; ">;</span>
<br/><span style="color: blue; ">select</span>&nbsp;<span style="color: #8000FF; ">@entry_builder</span><span style="color: silver; ">;</span>
<br/><span style="color: green; font-style: italic; ">&#45;&#45;&nbsp;end</span>
<br/><span style="color: green; font-style: italic; ">&#45;&#45;</span>
<br/><span style="color: green; font-style: italic; ">&#45;&#45;&nbsp;Deleting&nbsp;multiple&nbsp;records</span>
<br/><span style="color: green; font-style: italic; ">&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;</span>
<br/><span style="color: green; font-style: italic; ">&#45;&#45;&nbsp;begin&nbsp;code&nbsp;block</span>
<br/><span style="color: blue; ">declare</span>&nbsp;<span style="color: #8000FF; ">@application</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: black; font-style: italic; ">[xml]</span>&nbsp;<span style="color: silver; ">=</span>&nbsp;<span style="color: maroon; ">[xquery_demo]</span><span style="color: silver; ">.</span><span style="color: #FF0080; font-weight: bold; ">[get_person]</span><span style="color: maroon; ">(</span><span style="color: maroon; ">)</span>
<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: silver; ">,</span>&nbsp;<span style="color: #8000FF; ">@modified_tree</span>&nbsp;<span style="color: black; font-style: italic; ">[xml]</span><span style="color: silver; ">;</span>
<br/><span style="color: blue; ">set</span>&nbsp;<span style="color: #8000FF; ">@modified_tree</span><span style="color: silver; ">=</span><span style="color: #8000FF; ">@application</span><span style="color: silver; ">;</span>
<br/><span style="color: blue; ">set</span>&nbsp;<span style="color: #8000FF; ">@modified_tree</span><span style="color: silver; ">.</span><span style="color: #FF0080; font-weight: bold; ">modify</span><span style="color: maroon; ">(</span><span style="color: red; ">'delete&nbsp;/application_tree/application[@first_name=&quot;David&quot;]'</span><span style="color: maroon; ">)</span><span style="color: silver; ">;</span>
<br/><span style="color: blue; ">select</span>&nbsp;<span style="color: #8000FF; ">@application</span><span style="color: silver; ">.</span><span style="color: #FF0080; font-weight: bold; ">value</span><span style="color: maroon; ">(</span><span style="color: red; ">'count&nbsp;(/application_tree/application[@first_name=&quot;David&quot;])'</span><span style="color: silver; ">,</span>&nbsp;<span style="color: red; ">'[int]'</span><span style="color: maroon; ">)</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: blue; ">as</span>&nbsp;<span style="color: red; ">N'How&nbsp;many&nbsp;Kenny''s&nbsp;were&nbsp;there?'</span>
<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: silver; ">,</span>&nbsp;<span style="color: #8000FF; ">@modified_tree</span><span style="color: silver; ">.</span><span style="color: #FF0080; font-weight: bold; ">value</span><span style="color: maroon; ">(</span><span style="color: red; ">'count&nbsp;(/application_tree/application[@first_name=&quot;David&quot;])'</span><span style="color: silver; ">,</span>&nbsp;<span style="color: red; ">'[int]'</span><span style="color: maroon; ">)</span>&nbsp;<span style="color: blue; ">as</span>&nbsp;<span style="color: red; ">N'How&nbsp;many&nbsp;David''s&nbsp;are&nbsp;left?'</span><span style="color: silver; ">;</span>
<br/><span style="color: maroon; ">go</span>
<br/><span style="color: green; font-style: italic; ">&#45;&#45;&nbsp;end&nbsp;code&nbsp;block</span>
<br/><span style="color: green; font-style: italic; ">&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;</span>
<br/><span style="color: green; font-style: italic; ">&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;</span>
<br/><span style="color: green; font-style: italic; ">&#45;&#45;&nbsp;EXTRACTING&nbsp;RELATIONAL&nbsp;DATA&nbsp;FROM&nbsp;A&nbsp;TREE</span>
<br/><span style="color: green; font-style: italic; ">&#45;&#45;&nbsp;The&nbsp;nodes()&nbsp;method.</span>
<br/><span style="color: green; font-style: italic; ">&#45;&#45;&nbsp;Used&nbsp;to&nbsp;parse&nbsp;an&nbsp;[xml]&nbsp;tree&nbsp;into&nbsp;relational&nbsp;data.</span>
<br/><span style="color: green; font-style: italic; ">&#45;&#45;&nbsp;Using&nbsp;the&nbsp;nodes()&nbsp;method&nbsp;you&nbsp;can&nbsp;parse&nbsp;a&nbsp;tree&nbsp;into&nbsp;individual&nbsp;nodes&nbsp;(elements)&nbsp;then&nbsp;use&nbsp;either</span>
<br/><span style="color: green; font-style: italic; ">&#45;&#45;&nbsp;&nbsp;the&nbsp;value()&nbsp;or&nbsp;query()&nbsp;methods&nbsp;to&nbsp;extract&nbsp;data.</span>
<br/><span style="color: green; font-style: italic; ">&#45;&#45;&nbsp;NO&nbsp;ONE&nbsp;EVER&nbsp;HAS&nbsp;TO&nbsp;KNOW&nbsp;THE&nbsp;DATA&nbsp;IS&nbsp;REALLY&nbsp;STORED&nbsp;IN&nbsp;[xml]!</span>
<br/><span style="color: green; font-style: italic; ">&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;</span>
<br/><span style="color: green; font-style: italic; ">&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;</span>
<br/><span style="color: green; font-style: italic; ">&#45;&#45;&nbsp;begin&nbsp;code&nbsp;block</span>
<br/><span style="color: blue; ">declare</span>&nbsp;<span style="color: #8000FF; ">@application</span>&nbsp;<span style="color: black; font-style: italic; ">[xml]</span>&nbsp;<span style="color: silver; ">=</span>&nbsp;<span style="color: maroon; ">[xquery_demo]</span><span style="color: silver; ">.</span><span style="color: #FF0080; font-weight: bold; ">[get_person]</span><span style="color: maroon; ">(</span><span style="color: maroon; ">)</span><span style="color: silver; ">;</span>
<br/><span style="color: blue; ">select</span>&nbsp;<span style="color: maroon; ">t</span><span style="color: silver; ">.</span><span style="color: maroon; ">c</span><span style="color: silver; ">.</span><span style="color: #FF0080; font-weight: bold; ">value</span><span style="color: maroon; ">(</span><span style="color: red; ">'./@first_name,'</span><span style="color: silver; ">,</span>&nbsp;<span style="color: red; ">'[sysname]'</span><span style="color: maroon; ">)</span>&nbsp;&nbsp;&nbsp;<span style="color: blue; ">as</span>&nbsp;<span style="color: red; ">N'first_name'</span>
<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: silver; ">,</span>&nbsp;<span style="color: maroon; ">t</span><span style="color: silver; ">.</span><span style="color: maroon; ">c</span><span style="color: silver; ">.</span><span style="color: #FF0080; font-weight: bold; ">value</span><span style="color: maroon; ">(</span><span style="color: red; ">'./@last_name,'</span><span style="color: silver; ">,</span>&nbsp;<span style="color: red; ">'[sysname]'</span><span style="color: maroon; ">)</span>&nbsp;&nbsp;<span style="color: blue; ">as</span>&nbsp;<span style="color: red; ">N'last_name'</span>
<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: silver; ">,</span>&nbsp;<span style="color: maroon; ">t</span><span style="color: silver; ">.</span><span style="color: maroon; ">c</span><span style="color: silver; ">.</span><span style="color: #FF0080; font-weight: bold; ">value</span><span style="color: maroon; ">(</span><span style="color: red; ">'./@first_name,'</span><span style="color: silver; ">,</span>&nbsp;<span style="color: red; ">'[sysname]'</span><span style="color: maroon; ">)</span>&nbsp;<span style="color: blue; ">as</span>&nbsp;<span style="color: red; ">N'first_name'</span>
<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: silver; ">,</span>&nbsp;<span style="color: maroon; ">t</span><span style="color: silver; ">.</span><span style="color: maroon; ">c</span><span style="color: silver; ">.</span><span style="color: #FF0080; font-weight: bold; ">value</span><span style="color: maroon; ">(</span><span style="color: red; ">'./@address,'</span><span style="color: silver; ">,</span>&nbsp;<span style="color: red; ">'[sysname]'</span><span style="color: maroon; ">)</span>&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: blue; ">as</span>&nbsp;<span style="color: red; ">N'address'</span>
<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: silver; ">,</span>&nbsp;<span style="color: maroon; ">t</span><span style="color: silver; ">.</span><span style="color: maroon; ">c</span><span style="color: silver; ">.</span><span style="color: #FF0080; font-weight: bold; ">value</span><span style="color: maroon; ">(</span><span style="color: red; ">'./@city,'</span><span style="color: silver; ">,</span>&nbsp;<span style="color: red; ">'[sysname]'</span><span style="color: maroon; ">)</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: blue; ">as</span>&nbsp;<span style="color: red; ">N'city'</span>
<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: silver; ">,</span>&nbsp;<span style="color: maroon; ">t</span><span style="color: silver; ">.</span><span style="color: maroon; ">c</span><span style="color: silver; ">.</span><span style="color: #FF0080; font-weight: bold; ">value</span><span style="color: maroon; ">(</span><span style="color: red; ">'./@zip_code,'</span><span style="color: silver; ">,</span>&nbsp;<span style="color: red; ">'[sysname]'</span><span style="color: maroon; ">)</span>&nbsp;&nbsp;&nbsp;<span style="color: blue; ">as</span>&nbsp;<span style="color: red; ">N'zip_code'</span>
<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: silver; ">,</span>&nbsp;<span style="color: maroon; ">t</span><span style="color: silver; ">.</span><span style="color: maroon; ">c</span><span style="color: silver; ">.</span><span style="color: #FF0080; font-weight: bold; ">value</span><span style="color: maroon; ">(</span><span style="color: red; ">'./@bonus'</span><span style="color: silver; ">,</span>&nbsp;<span style="color: red; ">'[sysname]'</span><span style="color: maroon; ">)</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: blue; ">as</span>&nbsp;<span style="color: red; ">N'bonus'</span>
<br/><span style="color: blue; ">from</span>&nbsp;&nbsp;&nbsp;<span style="color: #8000FF; ">@application</span><span style="color: silver; ">.</span><span style="color: #FF0080; font-weight: bold; ">nodes</span><span style="color: maroon; ">(</span><span style="color: red; ">'/application_tree/application'</span><span style="color: maroon; ">)</span>&nbsp;<span style="color: maroon; ">t</span><span style="color: maroon; ">(</span><span style="color: maroon; ">c</span><span style="color: maroon; ">)</span><span style="color: silver; ">;</span>
<br/><span style="color: maroon; ">go</span>
<br/><span style="color: green; font-style: italic; ">&#45;&#45;&nbsp;end&nbsp;code&nbsp;block</span>
<br/><span style="color: green; font-style: italic; ">&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;</span>
<br/><span style="color: green; font-style: italic; ">&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;</span>
<br/><span style="color: green; font-style: italic; ">&#45;&#45;&nbsp;EXTRACTING&nbsp;RELATIONAL&nbsp;DATA&nbsp;FROM&nbsp;A&nbsp;TREE&nbsp;USING&nbsp;A&nbsp;FILTER</span>
<br/><span style="color: green; font-style: italic; ">&#45;&#45;&nbsp;The&nbsp;nodes()&nbsp;method</span>
<br/><span style="color: green; font-style: italic; ">&#45;&#45;&nbsp;Used&nbsp;to&nbsp;parse&nbsp;an&nbsp;[xml]&nbsp;tree&nbsp;into&nbsp;relational&nbsp;data</span>
<br/><span style="color: green; font-style: italic; ">&#45;&#45;&nbsp;May&nbsp;include&nbsp;filters</span>
<br/><span style="color: green; font-style: italic; ">&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;</span>
<br/><span style="color: green; font-style: italic; ">&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;</span>
<br/><span style="color: green; font-style: italic; ">&#45;&#45;&nbsp;begin&nbsp;code&nbsp;block</span>
<br/><span style="color: blue; ">declare</span>&nbsp;<span style="color: #8000FF; ">@application</span>&nbsp;<span style="color: black; font-style: italic; ">[xml]</span>&nbsp;<span style="color: silver; ">=</span>&nbsp;<span style="color: maroon; ">[xquery_demo]</span><span style="color: silver; ">.</span><span style="color: #FF0080; font-weight: bold; ">[get_person]</span><span style="color: maroon; ">(</span><span style="color: maroon; ">)</span><span style="color: silver; ">;</span>
<br/><span style="color: blue; ">select</span>&nbsp;<span style="color: maroon; ">t</span><span style="color: silver; ">.</span><span style="color: maroon; ">c</span><span style="color: silver; ">.</span><span style="color: #FF0080; font-weight: bold; ">value</span><span style="color: maroon; ">(</span><span style="color: red; ">'./@first_name,'</span><span style="color: silver; ">,</span>&nbsp;<span style="color: red; ">'[sysname]'</span><span style="color: maroon; ">)</span>&nbsp;&nbsp;&nbsp;<span style="color: blue; ">as</span>&nbsp;<span style="color: red; ">N'first_name'</span>
<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: silver; ">,</span>&nbsp;<span style="color: maroon; ">t</span><span style="color: silver; ">.</span><span style="color: maroon; ">c</span><span style="color: silver; ">.</span><span style="color: #FF0080; font-weight: bold; ">value</span><span style="color: maroon; ">(</span><span style="color: red; ">'./@last_name,'</span><span style="color: silver; ">,</span>&nbsp;<span style="color: red; ">'[sysname]'</span><span style="color: maroon; ">)</span>&nbsp;&nbsp;<span style="color: blue; ">as</span>&nbsp;<span style="color: red; ">N'last_name'</span>
<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: silver; ">,</span>&nbsp;<span style="color: maroon; ">t</span><span style="color: silver; ">.</span><span style="color: maroon; ">c</span><span style="color: silver; ">.</span><span style="color: #FF0080; font-weight: bold; ">value</span><span style="color: maroon; ">(</span><span style="color: red; ">'./@first_name,'</span><span style="color: silver; ">,</span>&nbsp;<span style="color: red; ">'[sysname]'</span><span style="color: maroon; ">)</span>&nbsp;<span style="color: blue; ">as</span>&nbsp;<span style="color: red; ">N'first_name'</span>
<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: silver; ">,</span>&nbsp;<span style="color: maroon; ">t</span><span style="color: silver; ">.</span><span style="color: maroon; ">c</span><span style="color: silver; ">.</span><span style="color: #FF0080; font-weight: bold; ">value</span><span style="color: maroon; ">(</span><span style="color: red; ">'./@address,'</span><span style="color: silver; ">,</span>&nbsp;<span style="color: red; ">'[sysname]'</span><span style="color: maroon; ">)</span>&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: blue; ">as</span>&nbsp;<span style="color: red; ">N'address'</span>
<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: silver; ">,</span>&nbsp;<span style="color: maroon; ">t</span><span style="color: silver; ">.</span><span style="color: maroon; ">c</span><span style="color: silver; ">.</span><span style="color: #FF0080; font-weight: bold; ">value</span><span style="color: maroon; ">(</span><span style="color: red; ">'./@city,'</span><span style="color: silver; ">,</span>&nbsp;<span style="color: red; ">'[sysname]'</span><span style="color: maroon; ">)</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: blue; ">as</span>&nbsp;<span style="color: red; ">N'city'</span>
<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: silver; ">,</span>&nbsp;<span style="color: maroon; ">t</span><span style="color: silver; ">.</span><span style="color: maroon; ">c</span><span style="color: silver; ">.</span><span style="color: #FF0080; font-weight: bold; ">value</span><span style="color: maroon; ">(</span><span style="color: red; ">'./@zip_code,'</span><span style="color: silver; ">,</span>&nbsp;<span style="color: red; ">'[sysname]'</span><span style="color: maroon; ">)</span>&nbsp;&nbsp;&nbsp;<span style="color: blue; ">as</span>&nbsp;<span style="color: red; ">N'zip_code'</span>
<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: silver; ">,</span>&nbsp;<span style="color: maroon; ">t</span><span style="color: silver; ">.</span><span style="color: maroon; ">c</span><span style="color: silver; ">.</span><span style="color: #FF0080; font-weight: bold; ">value</span><span style="color: maroon; ">(</span><span style="color: red; ">'./@bonus'</span><span style="color: silver; ">,</span>&nbsp;<span style="color: red; ">'[sysname]'</span><span style="color: maroon; ">)</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: blue; ">as</span>&nbsp;<span style="color: red; ">N'bonus'</span>
<br/><span style="color: blue; ">from</span>&nbsp;&nbsp;&nbsp;<span style="color: #8000FF; ">@application</span><span style="color: silver; ">.</span><span style="color: #FF0080; font-weight: bold; ">nodes</span><span style="color: maroon; ">(</span><span style="color: red; ">'/application_tree/application[@last_name=&quot;Tsoflias&quot;]'</span><span style="color: maroon; ">)</span>&nbsp;<span style="color: maroon; ">t</span><span style="color: maroon; ">(</span><span style="color: maroon; ">c</span><span style="color: maroon; ">)</span><span style="color: silver; ">;</span>
<br/><span style="color: maroon; ">go</span>
<br/><span style="color: green; font-style: italic; ">&#45;&#45;&nbsp;end&nbsp;code&nbsp;block</span>
<br/><span style="color: green; font-style: italic; ">&#45;&#45;</span>
<br/><span style="color: green; font-style: italic; ">&#45;&#45;&nbsp;May&nbsp;include&nbsp;multiple&nbsp;filters</span>
<br/><span style="color: green; font-style: italic; ">&#45;&#45;&nbsp;begin&nbsp;code&nbsp;block</span>
<br/><span style="color: blue; ">declare</span>&nbsp;<span style="color: #8000FF; ">@application</span>&nbsp;<span style="color: black; font-style: italic; ">[xml]</span>&nbsp;<span style="color: silver; ">=</span>&nbsp;<span style="color: maroon; ">[xquery_demo]</span><span style="color: silver; ">.</span><span style="color: #FF0080; font-weight: bold; ">[get_person]</span><span style="color: maroon; ">(</span><span style="color: maroon; ">)</span><span style="color: silver; ">;</span>
<br/><span style="color: blue; ">select</span>&nbsp;<span style="color: maroon; ">t</span><span style="color: silver; ">.</span><span style="color: maroon; ">c</span><span style="color: silver; ">.</span><span style="color: #FF0080; font-weight: bold; ">value</span><span style="color: maroon; ">(</span><span style="color: red; ">'./@first_name,'</span><span style="color: silver; ">,</span>&nbsp;<span style="color: red; ">'[sysname]'</span><span style="color: maroon; ">)</span>&nbsp;&nbsp;&nbsp;<span style="color: blue; ">as</span>&nbsp;<span style="color: red; ">N'first_name'</span>
<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: silver; ">,</span>&nbsp;<span style="color: maroon; ">t</span><span style="color: silver; ">.</span><span style="color: maroon; ">c</span><span style="color: silver; ">.</span><span style="color: #FF0080; font-weight: bold; ">value</span><span style="color: maroon; ">(</span><span style="color: red; ">'./@last_name,'</span><span style="color: silver; ">,</span>&nbsp;<span style="color: red; ">'[sysname]'</span><span style="color: maroon; ">)</span>&nbsp;&nbsp;<span style="color: blue; ">as</span>&nbsp;<span style="color: red; ">N'last_name'</span>
<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: silver; ">,</span>&nbsp;<span style="color: maroon; ">t</span><span style="color: silver; ">.</span><span style="color: maroon; ">c</span><span style="color: silver; ">.</span><span style="color: #FF0080; font-weight: bold; ">value</span><span style="color: maroon; ">(</span><span style="color: red; ">'./@first_name,'</span><span style="color: silver; ">,</span>&nbsp;<span style="color: red; ">'[sysname]'</span><span style="color: maroon; ">)</span>&nbsp;<span style="color: blue; ">as</span>&nbsp;<span style="color: red; ">N'first_name'</span>
<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: silver; ">,</span>&nbsp;<span style="color: maroon; ">t</span><span style="color: silver; ">.</span><span style="color: maroon; ">c</span><span style="color: silver; ">.</span><span style="color: #FF0080; font-weight: bold; ">value</span><span style="color: maroon; ">(</span><span style="color: red; ">'./@address,'</span><span style="color: silver; ">,</span>&nbsp;<span style="color: red; ">'[sysname]'</span><span style="color: maroon; ">)</span>&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: blue; ">as</span>&nbsp;<span style="color: red; ">N'address'</span>
<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: silver; ">,</span>&nbsp;<span style="color: maroon; ">t</span><span style="color: silver; ">.</span><span style="color: maroon; ">c</span><span style="color: silver; ">.</span><span style="color: #FF0080; font-weight: bold; ">value</span><span style="color: maroon; ">(</span><span style="color: red; ">'./@city,'</span><span style="color: silver; ">,</span>&nbsp;<span style="color: red; ">'[sysname]'</span><span style="color: maroon; ">)</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: blue; ">as</span>&nbsp;<span style="color: red; ">N'city'</span>
<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: silver; ">,</span>&nbsp;<span style="color: maroon; ">t</span><span style="color: silver; ">.</span><span style="color: maroon; ">c</span><span style="color: silver; ">.</span><span style="color: #FF0080; font-weight: bold; ">value</span><span style="color: maroon; ">(</span><span style="color: red; ">'./@zip_code,'</span><span style="color: silver; ">,</span>&nbsp;<span style="color: red; ">'[sysname]'</span><span style="color: maroon; ">)</span>&nbsp;&nbsp;&nbsp;<span style="color: blue; ">as</span>&nbsp;<span style="color: red; ">N'zip_code'</span>
<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: silver; ">,</span>&nbsp;<span style="color: maroon; ">t</span><span style="color: silver; ">.</span><span style="color: maroon; ">c</span><span style="color: silver; ">.</span><span style="color: #FF0080; font-weight: bold; ">value</span><span style="color: maroon; ">(</span><span style="color: red; ">'./@bonus'</span><span style="color: silver; ">,</span>&nbsp;<span style="color: red; ">'[sysname]'</span><span style="color: maroon; ">)</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: blue; ">as</span>&nbsp;<span style="color: red; ">N'bonus'</span>
<br/><span style="color: blue; ">from</span>&nbsp;&nbsp;&nbsp;<span style="color: #8000FF; ">@application</span><span style="color: silver; ">.</span><span style="color: #FF0080; font-weight: bold; ">nodes</span><span style="color: maroon; ">(</span><span style="color: red; ">'/application_tree/application[@state=&quot;Washington&quot;][@bonus&nbsp;gt&nbsp;1000]'</span><span style="color: maroon; ">)</span>&nbsp;<span style="color: maroon; ">t</span><span style="color: maroon; ">(</span><span style="color: maroon; ">c</span><span style="color: maroon; ">)</span><span style="color: silver; ">;</span>
<br/><span style="color: maroon; ">go</span>
<br/><span style="color: green; font-style: italic; ">&#45;&#45;&nbsp;end&nbsp;code&nbsp;block</span>
<br/><span style="color: green; font-style: italic; ">&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;</span>
<br/><span style="color: green; font-style: italic; ">&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;</span>
<br/><span style="color: green; font-style: italic; ">&#45;&#45;&nbsp;DETERMINE&nbsp;IF&nbsp;A&nbsp;NODE&nbsp;OR&nbsp;LEAF&nbsp;EXISTS</span>
<br/><span style="color: green; font-style: italic; ">&#45;&#45;&nbsp;The&nbsp;exist()&nbsp;method</span>
<br/><span style="color: green; font-style: italic; ">&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;</span>
<br/><span style="color: green; font-style: italic; ">&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;</span>
<br/><span style="color: green; font-style: italic; ">&#45;&#45;&nbsp;begin&nbsp;code&nbsp;block</span>
<br/><span style="color: blue; ">declare</span>&nbsp;<span style="color: #8000FF; ">@application</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: black; font-style: italic; ">[xml]</span>&nbsp;<span style="color: silver; ">=</span>&nbsp;<span style="color: maroon; ">[xquery_demo]</span><span style="color: silver; ">.</span><span style="color: #FF0080; font-weight: bold; ">[get_person]</span><span style="color: maroon; ">(</span><span style="color: maroon; ">)</span>
<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: silver; ">,</span>&nbsp;<span style="color: #8000FF; ">@application_tree</span>&nbsp;<span style="color: black; font-style: italic; ">[sysname]</span>&nbsp;<span style="color: silver; ">=</span>&nbsp;<span style="color: red; ">N'application_tree'</span>
<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: silver; ">,</span>&nbsp;<span style="color: #8000FF; ">@not_here_node</span>&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: black; font-style: italic; ">[sysname]</span>&nbsp;<span style="color: silver; ">=</span>&nbsp;<span style="color: red; ">N'not_here_node'</span><span style="color: silver; ">;</span>
<br/><span style="color: blue; ">select</span>
<br/><span style="color: green; font-style: italic; ">&#45;&#45;</span>
<br/><span style="color: green; font-style: italic; ">&#45;&#45;&nbsp;Determine&nbsp;if&nbsp;there&nbsp;is&nbsp;a&nbsp;node&nbsp;named&nbsp;application_tree</span>
<br/><span style="color: blue; ">case</span>&nbsp;<span style="color: #8000FF; ">@application</span><span style="color: silver; ">.</span><span style="color: #FF0080; font-weight: bold; ">exist</span><span style="color: maroon; ">(</span><span style="color: red; ">'//*[local-name()=sql:variable(&quot;@application_tree&quot;)]'</span><span style="color: maroon; ">)</span>
<br/>&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: blue; ">when</span>&nbsp;<span style="color: black; ">1</span>
<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: blue; ">then</span>
<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: red; ">N'There&nbsp;is&nbsp;an&nbsp;application_tree&nbsp;as&nbsp;it&nbsp;should&nbsp;be!'</span>
<br/>&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: blue; ">else</span>
<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: red; ">N'There&nbsp;is&nbsp;no&nbsp;application_tree&nbsp;bute&nbsp;there&nbsp;should&nbsp;be!'</span>
<br/><span style="color: blue; ">end</span>&nbsp;&nbsp;&nbsp;<span style="color: blue; ">as</span>&nbsp;<span style="color: red; ">N'application_tree&nbsp;exists'</span>
<br/><span style="color: green; font-style: italic; ">&#45;&#45;</span>
<br/><span style="color: green; font-style: italic; ">&#45;&#45;&nbsp;Determine&nbsp;if&nbsp;there&nbsp;is&nbsp;a&nbsp;node&nbsp;named&nbsp;not_here_node</span>
<br/><span style="color: silver; ">,</span>&nbsp;<span style="color: blue; ">case</span>&nbsp;<span style="color: #8000FF; ">@application</span><span style="color: silver; ">.</span><span style="color: #FF0080; font-weight: bold; ">exist</span><span style="color: maroon; ">(</span><span style="color: red; ">'//*[local-name()=sql:variable(&quot;@not_here_node&quot;)]'</span><span style="color: maroon; ">)</span>
<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: blue; ">when</span>&nbsp;<span style="color: black; ">1</span>
<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: blue; ">then</span>
<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: red; ">N'There&nbsp;is&nbsp;an&nbsp;not_here_node&nbsp;but&nbsp;it&nbsp;should&nbsp;notbe!'</span>
<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: blue; ">else</span>
<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: red; ">N'There&nbsp;is&nbsp;no&nbsp;not_here_node&nbsp;nor&nbsp;should&nbsp;there&nbsp;be!'</span>
<br/>&nbsp;&nbsp;<span style="color: blue; ">end</span>&nbsp;<span style="color: blue; ">as</span>&nbsp;<span style="color: red; ">N'not_here_node&nbsp;does&nbsp;not&nbsp;exist'</span>
<br/><span style="color: green; font-style: italic; ">&#45;&#45;</span>
<br/><span style="color: green; font-style: italic; ">&#45;&#45;&nbsp;Determine&nbsp;if&nbsp;there&nbsp;are&nbsp;elements&nbsp;with&nbsp;the&nbsp;first_name&nbsp;attribute&nbsp;of&nbsp;BOBBY</span>
<br/><span style="color: silver; ">,</span>&nbsp;<span style="color: blue; ">case</span>&nbsp;<span style="color: #8000FF; ">@application</span><span style="color: silver; ">.</span><span style="color: #FF0080; font-weight: bold; ">exist</span><span style="color: maroon; ">(</span><span style="color: red; ">'application_tree/application[@first_name=&quot;Ranjit&quot;]'</span><span style="color: maroon; ">)</span>
<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: blue; ">when</span>&nbsp;<span style="color: black; ">1</span>
<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: blue; ">then</span>
<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: red; ">N'There&nbsp;are&nbsp;some&nbsp;Ranjit''s!'</span>
<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: blue; ">else</span>
<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: red; ">N'No&nbsp;Ranjit''s!'</span>
<br/>&nbsp;&nbsp;<span style="color: blue; ">end</span>&nbsp;<span style="color: blue; ">as</span>&nbsp;<span style="color: red; ">N'first_name_Ranjit'</span>
<br/><span style="color: green; font-style: italic; ">&#45;&#45;</span>
<br/><span style="color: green; font-style: italic; ">&#45;&#45;&nbsp;Determine&nbsp;if&nbsp;there&nbsp;is&nbsp;an&nbsp;element&nbsp;with&nbsp;first_name="KATHERINE"&nbsp;and&nbsp;@last_name="LIGHTSEY"</span>
<br/><span style="color: silver; ">,</span>&nbsp;<span style="color: blue; ">case</span>&nbsp;<span style="color: #8000FF; ">@application</span><span style="color: silver; ">.</span><span style="color: #FF0080; font-weight: bold; ">exist</span><span style="color: maroon; ">(</span><span style="color: red; ">'application_tree/application[@first_name=&quot;Stephen&quot;]&nbsp;[@last_name=&quot;Jiang&quot;]'</span><span style="color: maroon; ">)</span>
<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: blue; ">when</span>&nbsp;<span style="color: black; ">1</span>
<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: blue; ">then</span>
<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: red; ">N'Stephen&nbsp;Jiang&nbsp;was&nbsp;here!'</span>
<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: blue; ">else</span>
<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: red; ">N'We&nbsp;haven''t&nbsp;seen&nbsp;Stephen!'</span>
<br/>&nbsp;&nbsp;<span style="color: blue; ">end</span>&nbsp;<span style="color: blue; ">as</span>&nbsp;<span style="color: red; ">N'Was&nbsp;Stephen&nbsp;Here?'</span>
<br/><span style="color: silver; ">,</span>
<br/><span style="color: green; font-style: italic; ">&#45;&#45;</span>
<br/><span style="color: green; font-style: italic; ">&#45;&#45;&nbsp;Determine&nbsp;if&nbsp;there&nbsp;is&nbsp;a&nbsp;tree&nbsp;element&nbsp;of&nbsp;NotReallyHere</span>
<br/><span style="color: blue; ">case</span>&nbsp;<span style="color: #8000FF; ">@application</span><span style="color: silver; ">.</span><span style="color: #FF0080; font-weight: bold; ">exist</span><span style="color: maroon; ">(</span><span style="color: red; ">'application_tree/NotReallyHere'</span><span style="color: maroon; ">)</span>
<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: blue; ">when</span>&nbsp;<span style="color: black; ">1</span>
<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: blue; ">then</span>
<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: red; ">N'This&nbsp;isn''t&nbsp;supposed&nbsp;to&nbsp;be&nbsp;here!'</span>
<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: blue; ">else</span>
<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: red; ">N'No!&nbsp;NotReallyHere&nbsp;really&nbsp;isn''t&nbsp;here!'</span>
<br/>&nbsp;&nbsp;<span style="color: blue; ">end</span>&nbsp;<span style="color: blue; ">as</span>&nbsp;<span style="color: red; ">N'Is&nbsp;NotReallyHere&nbsp;here?'</span>
<br/><span style="color: silver; ">,</span>
<br/><span style="color: green; font-style: italic; ">&#45;&#45;</span>
<br/><span style="color: green; font-style: italic; ">&#45;&#45;&nbsp;Determine&nbsp;if&nbsp;there&nbsp;is&nbsp;a&nbsp;tree&nbsp;element&nbsp;of&nbsp;NewNode</span>
<br/><span style="color: blue; ">case</span>&nbsp;<span style="color: #8000FF; ">@application</span><span style="color: silver; ">.</span><span style="color: #FF0080; font-weight: bold; ">exist</span><span style="color: maroon; ">(</span><span style="color: red; ">'application_tree/NewNode'</span><span style="color: maroon; ">)</span>
<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: blue; ">when</span>&nbsp;<span style="color: black; ">1</span>
<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: blue; ">then</span>
<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: red; ">N'NewNode&nbsp;is&nbsp;here&nbsp;but&nbsp;it&nbsp;is&nbsp;not&nbsp;supposed&nbsp;to&nbsp;be!'</span>
<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: blue; ">else</span>
<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: red; ">N'No!&nbsp;NewNode&nbsp;is&nbsp;not&nbsp;supposed&nbsp;to&nbsp;be&nbsp;here!'</span>
<br/>&nbsp;&nbsp;<span style="color: blue; ">end</span>&nbsp;<span style="color: blue; ">as</span>&nbsp;<span style="color: red; ">N'Is&nbsp;NewNode&nbsp;here?'</span><span style="color: silver; ">;</span>
<br/><span style="color: maroon; ">go</span>
<br/><span style="color: green; font-style: italic; ">&#45;&#45;&nbsp;end&nbsp;code&nbsp;block</span>
<br/><span style="color: green; font-style: italic; ">&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;</span>
<br/><span style="color: green; font-style: italic; ">&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;</span>
<br/><span style="color: green; font-style: italic; ">&#45;&#45;&nbsp;REAL&nbsp;WORLD&nbsp;EXAMPLE</span>
<br/><span style="color: green; font-style: italic; ">&#45;&#45;&nbsp;A&nbsp;logging&nbsp;application&nbsp;-&nbsp;Used&nbsp;to&nbsp;allow&nbsp;heterogenous&nbsp;applications&nbsp;to&nbsp;log&nbsp;heterogenous&nbsp;and&nbsp;complex&nbsp;data.</span>
<br/><span style="color: green; font-style: italic; ">&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;</span>
<br/><span style="color: green; font-style: italic; ">&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;</span>
<br/><span style="color: green; font-style: italic; ">&#45;&#45;&nbsp;begin&nbsp;code&nbsp;block</span>
<br/><span style="color: blue; ">if</span>&nbsp;<span style="color: fuchsia; font-style: italic; ">object_id</span><span style="color: maroon; ">(</span><span style="color: red; ">N'[xquery_demo].[log]'</span><span style="color: silver; ">,</span>&nbsp;<span style="color: red; ">N'U'</span><span style="color: maroon; ">)</span>&nbsp;<span style="color: blue; ">is</span>&nbsp;<span style="color: blue; ">not</span>&nbsp;<span style="color: blue; ">null</span>
<br/>&nbsp;&nbsp;<span style="color: blue; ">drop</span>&nbsp;<span style="color: blue; ">table</span>&nbsp;<span style="color: maroon; ">[xquery_demo]</span><span style="color: silver; ">.</span><span style="color: maroon; ">[log]</span><span style="color: silver; ">;</span>
<br/><span style="color: maroon; ">go</span>
<br/><span style="color: blue; ">create</span>&nbsp;<span style="color: blue; ">table</span>&nbsp;<span style="color: maroon; ">[xquery_demo]</span><span style="color: silver; ">.</span><span style="color: maroon; ">[log]</span>&nbsp;<span style="color: maroon; ">(</span>
<br/>&nbsp;&nbsp;<span style="color: maroon; ">[id]</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: black; font-style: italic; ">[int]</span>&nbsp;<span style="color: blue; ">identity</span>&nbsp;<span style="color: maroon; ">(</span><span style="color: black; ">1</span><span style="color: silver; ">,</span>&nbsp;<span style="color: black; ">1</span><span style="color: maroon; ">)</span>&nbsp;<span style="color: blue; ">not</span>&nbsp;<span style="color: blue; ">null</span>&nbsp;<span style="color: blue; ">primary</span>&nbsp;<span style="color: blue; ">key</span>&nbsp;<span style="color: blue; ">clustered</span>
<br/>&nbsp;&nbsp;<span style="color: silver; ">,</span>&nbsp;<span style="color: maroon; ">[entry]</span>&nbsp;<span style="color: black; font-style: italic; ">[xml]</span>&nbsp;<span style="color: blue; ">not</span>&nbsp;<span style="color: blue; ">null</span>
<br/>&nbsp;&nbsp;<span style="color: maroon; ">)</span><span style="color: silver; ">;</span>
<br/><span style="color: blue; ">insert</span>&nbsp;<span style="color: blue; ">into</span>&nbsp;<span style="color: maroon; ">[xquery_demo]</span><span style="color: silver; ">.</span><span style="color: maroon; ">[log]</span>
<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: maroon; ">(</span><span style="color: maroon; ">[entry]</span><span style="color: maroon; ">)</span>
<br/><span style="color: blue; ">values</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: maroon; ">(</span><span style="color: red; ">N'&#60;log>log&nbsp;data&nbsp;goes&nbsp;here&#60;/log>'</span><span style="color: maroon; ">)</span><span style="color: silver; ">;</span>
<br/><span style="color: blue; ">insert</span>&nbsp;<span style="color: blue; ">into</span>&nbsp;<span style="color: maroon; ">[xquery_demo]</span><span style="color: silver; ">.</span><span style="color: maroon; ">[log]</span>
<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: maroon; ">(</span><span style="color: maroon; ">[entry]</span><span style="color: maroon; ">)</span>
<br/><span style="color: blue; ">values</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: maroon; ">(</span><span style="color: red; ">N'&#60;log&nbsp;timestamp=&quot;'</span>
<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: silver; ">+</span>&nbsp;<span style="color: fuchsia; font-style: italic; ">cast</span><span style="color: maroon; ">(</span><span style="color: blue; ">current_timestamp</span>&nbsp;<span style="color: blue; ">as</span>&nbsp;<span style="color: black; font-style: italic; ">[sysname]</span><span style="color: maroon; ">)</span>
<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: silver; ">+</span>&nbsp;<span style="color: red; ">'&quot;&nbsp;>&#60;business_application_01>
<br/>	&#60;table&nbsp;group=&quot;job_group&quot;&nbsp;application=&quot;application_01&quot;&nbsp;table=&quot;table_name&quot;&nbsp;>
<br/>		&#60;job&nbsp;job_name=&quot;job_name&quot;&nbsp;author=&quot;klightsey&quot;&nbsp;>
<br/>			&#60;notes_tree>
<br/>				&#60;note>note&nbsp;text&#60;/note>
<br/>				&#60;note>note&nbsp;text&#60;/note>
<br/>			&#60;/notes_tree>
<br/>		&#60;/job>
<br/>	&#60;/table>&#60;/business_application_01>&#60;/log>'</span><span style="color: maroon; ">)</span><span style="color: silver; ">;</span>
<br/><span style="color: blue; ">insert</span>&nbsp;<span style="color: blue; ">into</span>&nbsp;<span style="color: maroon; ">[xquery_demo]</span><span style="color: silver; ">.</span><span style="color: maroon; ">[log]</span>
<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: maroon; ">(</span><span style="color: maroon; ">[entry]</span><span style="color: maroon; ">)</span>
<br/><span style="color: blue; ">values</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: maroon; ">(</span><span style="color: red; ">N'&#60;log&nbsp;>&#60;business_application_01>
<br/>	&#60;table&nbsp;table=&quot;table_name&quot;&nbsp;>
<br/>			&#60;notes_tree>
<br/>				&#60;note>note&nbsp;text&#60;/note>
<br/>				&#60;note>note&nbsp;text&#60;/note>
<br/>			&#60;/notes_tree>
<br/>	&#60;/table>&#60;/business_application_01>&#60;/log>'</span><span style="color: maroon; ">)</span><span style="color: silver; ">;</span>
<br/><span style="color: blue; ">insert</span>&nbsp;<span style="color: blue; ">into</span>&nbsp;<span style="color: maroon; ">[xquery_demo]</span><span style="color: silver; ">.</span><span style="color: maroon; ">[log]</span>
<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: maroon; ">(</span><span style="color: maroon; ">[entry]</span><span style="color: maroon; ">)</span>
<br/><span style="color: blue; ">values</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: maroon; ">(</span><span style="color: red; ">N'&#60;log>&#60;ssis&nbsp;job_name=&quot;ssisjob1&quot;&nbsp;/>&#60;problem>Well&nbsp;here&nbsp;is&nbsp;your&nbsp;problem!&#60;/problem>&#60;/log>'</span><span style="color: maroon; ">)</span><span style="color: silver; ">;</span>
<br/><span style="color: blue; ">insert</span>&nbsp;<span style="color: blue; ">into</span>&nbsp;<span style="color: maroon; ">[xquery_demo]</span><span style="color: silver; ">.</span><span style="color: maroon; ">[log]</span>
<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: maroon; ">(</span><span style="color: maroon; ">[entry]</span><span style="color: maroon; ">)</span>
<br/><span style="color: blue; ">values</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: maroon; ">(</span><span style="color: red; ">N'&#60;log>&#60;ssis&nbsp;job_name=&quot;ssisjob1&quot;&nbsp;/>&#60;problem>The&nbsp;crankshaft&nbsp;broke!&#60;/problem>&#60;/log>'</span><span style="color: maroon; ">)</span><span style="color: silver; ">;</span>
<br/><span style="color: blue; ">insert</span>&nbsp;<span style="color: blue; ">into</span>&nbsp;<span style="color: maroon; ">[xquery_demo]</span><span style="color: silver; ">.</span><span style="color: maroon; ">[log]</span>
<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: maroon; ">(</span><span style="color: maroon; ">[entry]</span><span style="color: maroon; ">)</span>
<br/><span style="color: blue; ">values</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: maroon; ">(</span><span style="color: red; ">N'&#60;log>&#60;ssis&nbsp;job_name=&quot;ssisjob1&quot;&nbsp;/>&#60;problem>Help!&nbsp;I&nbsp;have&nbsp;fallen&nbsp;and&nbsp;I&nbsp;cannot&nbsp;get&nbsp;up!&#60;/problem>&#60;/log>'</span><span style="color: maroon; ">)</span><span style="color: silver; ">;</span>
<br/><span style="color: blue; ">insert</span>&nbsp;<span style="color: blue; ">into</span>&nbsp;<span style="color: maroon; ">[xquery_demo]</span><span style="color: silver; ">.</span><span style="color: maroon; ">[log]</span>
<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: maroon; ">(</span><span style="color: maroon; ">[entry]</span><span style="color: maroon; ">)</span>
<br/><span style="color: blue; ">values</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: maroon; ">(</span><span style="color: red; ">N'&#60;log&nbsp;application=&quot;ssis&quot;&nbsp;timestamp=&quot;'</span>
<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: silver; ">+</span>&nbsp;<span style="color: fuchsia; font-style: italic; ">cast</span><span style="color: maroon; ">(</span><span style="color: blue; ">current_timestamp</span>&nbsp;<span style="color: blue; ">as</span>&nbsp;<span style="color: black; font-style: italic; ">varchar</span><span style="color: maroon; ">(</span><span style="color: black; ">4000</span><span style="color: maroon; ">)</span><span style="color: maroon; ">)</span>
<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: silver; ">+</span>&nbsp;<span style="color: red; ">'&quot;>&#60;ssis&nbsp;job_name=&quot;ssisjob2&quot;&nbsp;/>&#60;problem>Another&nbsp;problem!&#60;/problem>&#60;/log>'</span><span style="color: maroon; ">)</span><span style="color: silver; ">;</span>
<br/><span style="color: blue; ">insert</span>&nbsp;<span style="color: blue; ">into</span>&nbsp;<span style="color: maroon; ">[xquery_demo]</span><span style="color: silver; ">.</span><span style="color: maroon; ">[log]</span>
<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: maroon; ">(</span><span style="color: maroon; ">[entry]</span><span style="color: maroon; ">)</span>
<br/><span style="color: blue; ">values</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: maroon; ">(</span><span style="color: red; ">N'&#60;log&nbsp;application=&quot;ssis&quot;&nbsp;timestamp=&quot;'</span>
<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: silver; ">+</span>&nbsp;<span style="color: fuchsia; font-style: italic; ">cast</span><span style="color: maroon; ">(</span><span style="color: blue; ">current_timestamp</span>&nbsp;<span style="color: blue; ">as</span>&nbsp;<span style="color: black; font-style: italic; ">varchar</span><span style="color: maroon; ">(</span><span style="color: black; ">4000</span><span style="color: maroon; ">)</span><span style="color: maroon; ">)</span>
<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: silver; ">+</span>&nbsp;<span style="color: red; ">'&quot;>&#60;ssis&nbsp;job_name=&quot;ssisjob2&quot;&nbsp;/>&#60;problem>Many&nbsp;problems&nbsp;here!&#60;/problem>&#60;/log>'</span><span style="color: maroon; ">)</span><span style="color: silver; ">;</span>
<br/><span style="color: blue; ">insert</span>&nbsp;<span style="color: blue; ">into</span>&nbsp;<span style="color: maroon; ">[xquery_demo]</span><span style="color: silver; ">.</span><span style="color: maroon; ">[log]</span>
<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: maroon; ">(</span><span style="color: maroon; ">[entry]</span><span style="color: maroon; ">)</span>
<br/><span style="color: blue; ">values</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: maroon; ">(</span><span style="color: red; ">N'&#60;log&nbsp;application=&quot;ssis&quot;&nbsp;timestamp=&quot;'</span>
<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: silver; ">+</span>&nbsp;<span style="color: fuchsia; font-style: italic; ">cast</span><span style="color: maroon; ">(</span><span style="color: blue; ">current_timestamp</span>&nbsp;<span style="color: blue; ">as</span>&nbsp;<span style="color: black; font-style: italic; ">varchar</span><span style="color: maroon; ">(</span><span style="color: black; ">4000</span><span style="color: maroon; ">)</span><span style="color: maroon; ">)</span>
<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: silver; ">+</span>&nbsp;<span style="color: red; ">'&quot;&nbsp;test=&quot;test&quot;>&#60;ssis&nbsp;job_name=&quot;ssisjob2&quot;&nbsp;/>&#60;problem>Katherine&nbsp;ran&nbsp;out&nbsp;of&nbsp;stuff&nbsp;to&nbsp;type&nbsp;about!&#60;/problem>&#60;/log>'</span><span style="color: maroon; ">)</span><span style="color: silver; ">;</span>
<br/><span style="color: maroon; ">go</span>
<br/><span style="color: blue; ">declare</span>&nbsp;<span style="color: #8000FF; ">@log_entry</span>&nbsp;<span style="color: black; font-style: italic; ">[xml]</span>&nbsp;<span style="color: silver; ">=</span>&nbsp;<span style="color: red; ">N'&#60;log&nbsp;timestamp=&quot;'</span>
<br/>&nbsp;&nbsp;<span style="color: silver; ">+</span>&nbsp;<span style="color: fuchsia; font-style: italic; ">cast</span><span style="color: maroon; ">(</span><span style="color: blue; ">current_timestamp</span>&nbsp;<span style="color: blue; ">as</span>&nbsp;<span style="color: black; font-style: italic; ">[sysname]</span><span style="color: maroon; ">)</span>
<br/>&nbsp;&nbsp;<span style="color: silver; ">+</span>&nbsp;<span style="color: red; ">'&quot;&nbsp;>
<br/>&#60;business_application_01>
<br/>	&#60;table&nbsp;&nbsp;group=&quot;ACCOUNTING_LOAD&quot;&nbsp;application=&quot;FINANCE&quot;&nbsp;table=&quot;table&quot;&nbsp;>
<br/>		&#60;job&nbsp;job_name=&quot;job_name2&quot;&nbsp;author=&quot;klightsey&quot;&nbsp;>
<br/>			&#60;notes_tree>
<br/>				&#60;note>notes&nbsp;notes&nbsp;1&#60;/note>
<br/>				&#60;note>&nbsp;notes&nbsp;2&#60;/note>
<br/>				&#60;note>SQL_ND_PR_CASHCOLLECTIONTOTALS&nbsp;notes&nbsp;3&#60;/note>
<br/>			&#60;/notes_tree>
<br/>		&#60;/job>
<br/>	&#60;/table>
<br/>&#60;/business_application_01>&#60;/log>'</span><span style="color: silver; ">;</span>
<br/><span style="color: blue; ">insert</span>&nbsp;<span style="color: blue; ">into</span>&nbsp;<span style="color: maroon; ">[xquery_demo]</span><span style="color: silver; ">.</span><span style="color: maroon; ">[log]</span>
<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: maroon; ">(</span><span style="color: maroon; ">[entry]</span><span style="color: maroon; ">)</span>
<br/><span style="color: blue; ">values</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: maroon; ">(</span><span style="color: #8000FF; ">@log_entry</span><span style="color: maroon; ">)</span><span style="color: silver; ">;</span>
<br/><span style="color: maroon; ">go</span>
<br/><span style="color: blue; ">declare</span>&nbsp;<span style="color: #8000FF; ">@log_entry</span>&nbsp;<span style="color: black; font-style: italic; ">[xml]</span>&nbsp;<span style="color: silver; ">=</span>&nbsp;<span style="color: red; ">N'&#60;log&nbsp;timestamp=&quot;'</span>
<br/>&nbsp;&nbsp;<span style="color: silver; ">+</span>&nbsp;<span style="color: fuchsia; font-style: italic; ">cast</span><span style="color: maroon; ">(</span><span style="color: blue; ">current_timestamp</span>&nbsp;<span style="color: blue; ">as</span>&nbsp;<span style="color: black; font-style: italic; ">[sysname]</span><span style="color: maroon; ">)</span>
<br/>&nbsp;&nbsp;<span style="color: silver; ">+</span>&nbsp;<span style="color: red; ">'&quot;&nbsp;>
<br/>&nbsp;&nbsp;&#60;business_application_01>
<br/>&nbsp;&nbsp;	&#60;table&nbsp;&nbsp;group=&quot;job_group&quot;&nbsp;application=&quot;FINANCE&quot;&nbsp;table=&quot;table&quot;&nbsp;>
<br/>&nbsp;&nbsp;		&#60;job&nbsp;job_name=&quot;DUM_ND_ACCOUNTING_LOAD_BRIDGE&quot;&nbsp;author=&quot;klightsey&quot;&nbsp;>
<br/>&nbsp;&nbsp;			&#60;notes_tree>
<br/>&nbsp;&nbsp;				&#60;note>&nbsp;notes&nbsp;1&#60;/note>
<br/>&nbsp;&nbsp;				&#60;note>notes&nbsp;2&#60;/note>
<br/>&nbsp;&nbsp;			&#60;/notes_tree>
<br/>&nbsp;&nbsp;		&#60;/job>
<br/>&nbsp;&nbsp;	&#60;/table>
<br/>&nbsp;&nbsp;&#60;/business_application_01>&#60;/log>'</span><span style="color: silver; ">;</span>
<br/><span style="color: blue; ">insert</span>&nbsp;<span style="color: blue; ">into</span>&nbsp;<span style="color: maroon; ">[xquery_demo]</span><span style="color: silver; ">.</span><span style="color: maroon; ">[log]</span>
<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: maroon; ">(</span><span style="color: maroon; ">[entry]</span><span style="color: maroon; ">)</span>
<br/><span style="color: blue; ">values</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: maroon; ">(</span><span style="color: #8000FF; ">@log_entry</span><span style="color: maroon; ">)</span><span style="color: silver; ">;</span>
<br/><span style="color: maroon; ">go</span>
<br/><span style="color: green; font-style: italic; ">&#45;&#45;</span>
<br/><span style="color: green; font-style: italic; ">&#45;&#45;&nbsp;Insert&nbsp;two&nbsp;jobs</span>
<br/><span style="color: blue; ">declare</span>&nbsp;<span style="color: #8000FF; ">@log_entry</span>&nbsp;<span style="color: black; font-style: italic; ">[xml]</span>&nbsp;<span style="color: silver; ">=</span>&nbsp;<span style="color: red; ">N'&#60;log&nbsp;timestamp=&quot;'</span>
<br/>&nbsp;&nbsp;<span style="color: silver; ">+</span>&nbsp;<span style="color: fuchsia; font-style: italic; ">cast</span><span style="color: maroon; ">(</span><span style="color: blue; ">current_timestamp</span>&nbsp;<span style="color: blue; ">as</span>&nbsp;<span style="color: black; font-style: italic; ">[sysname]</span><span style="color: maroon; ">)</span>
<br/>&nbsp;&nbsp;<span style="color: silver; ">+</span>&nbsp;<span style="color: red; ">'&quot;&nbsp;>
<br/>&nbsp;&nbsp;&#60;business_application_01>
<br/>&nbsp;&nbsp;	&#60;table&nbsp;&nbsp;group=&quot;job&nbsp;group&quot;&nbsp;application=&quot;FINANCE&quot;&nbsp;table=&quot;table&quot;&nbsp;>
<br/>&nbsp;&nbsp;		&#60;job&nbsp;job_name=&quot;job&nbsp;name&quot;&nbsp;author=&quot;klightsey&quot;&nbsp;>
<br/>&nbsp;&nbsp;			&#60;notes_tree>
<br/>&nbsp;&nbsp;				&#60;note>job&nbsp;name&nbsp;notes&nbsp;1&#60;/note>
<br/>&nbsp;&nbsp;			&#60;/notes_tree>
<br/>&nbsp;&nbsp;		&#60;/job>
<br/>&nbsp;&nbsp;	&#60;/table>
<br/>&nbsp;&nbsp;&#60;/business_application_01>&#60;/log>'</span><span style="color: silver; ">;</span>
<br/><span style="color: blue; ">insert</span>&nbsp;<span style="color: blue; ">into</span>&nbsp;<span style="color: maroon; ">[xquery_demo]</span><span style="color: silver; ">.</span><span style="color: maroon; ">[log]</span>
<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: maroon; ">(</span><span style="color: maroon; ">[entry]</span><span style="color: maroon; ">)</span>
<br/><span style="color: blue; ">values</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: maroon; ">(</span><span style="color: #8000FF; ">@log_entry</span><span style="color: maroon; ">)</span><span style="color: silver; ">;</span>
<br/><span style="color: maroon; ">go</span>
<br/><span style="color: blue; ">declare</span>&nbsp;<span style="color: #8000FF; ">@log_entry</span>&nbsp;<span style="color: black; font-style: italic; ">[xml]</span>&nbsp;<span style="color: silver; ">=</span>&nbsp;<span style="color: red; ">N'&#60;log&nbsp;timestamp=&quot;'</span>
<br/>&nbsp;&nbsp;<span style="color: silver; ">+</span>&nbsp;<span style="color: fuchsia; font-style: italic; ">cast</span><span style="color: maroon; ">(</span><span style="color: blue; ">current_timestamp</span>&nbsp;<span style="color: blue; ">as</span>&nbsp;<span style="color: black; font-style: italic; ">[sysname]</span><span style="color: maroon; ">)</span>
<br/>&nbsp;&nbsp;<span style="color: silver; ">+</span>&nbsp;<span style="color: red; ">'&quot;&nbsp;>
<br/>&nbsp;&nbsp;&#60;business_application_01>
<br/>&nbsp;&nbsp;	&#60;table&nbsp;&nbsp;group=&quot;job&nbsp;group&quot;&nbsp;application=&quot;FINANCE&quot;&nbsp;table=&quot;table&quot;&nbsp;>
<br/>&nbsp;&nbsp;		&#60;job&nbsp;job_name=&quot;job&nbsp;name&quot;&nbsp;author=&quot;klightsey&quot;&nbsp;>
<br/>&nbsp;&nbsp;			&#60;notes_tree>
<br/>&nbsp;&nbsp;				&#60;note>&nbsp;notes&nbsp;1&#60;/note>
<br/>&nbsp;&nbsp;			&#60;/notes_tree>
<br/>&nbsp;&nbsp;		&#60;/job>
<br/>&nbsp;&nbsp;	&#60;/table>
<br/>&nbsp;&nbsp;&#60;/business_application_01>&#60;/log>'</span><span style="color: silver; ">;</span>
<br/><span style="color: blue; ">insert</span>&nbsp;<span style="color: blue; ">into</span>&nbsp;<span style="color: maroon; ">[xquery_demo]</span><span style="color: silver; ">.</span><span style="color: maroon; ">[log]</span>
<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: maroon; ">(</span><span style="color: maroon; ">[entry]</span><span style="color: maroon; ">)</span>
<br/><span style="color: blue; ">values</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: maroon; ">(</span><span style="color: #8000FF; ">@log_entry</span><span style="color: maroon; ">)</span><span style="color: silver; ">;</span>
<br/><span style="color: maroon; ">go</span>
<br/><span style="color: blue; ">declare</span>&nbsp;<span style="color: #8000FF; ">@log_entry</span>&nbsp;<span style="color: black; font-style: italic; ">[xml]</span>&nbsp;<span style="color: silver; ">=</span>&nbsp;<span style="color: red; ">N'&#60;log&nbsp;timestamp=&quot;'</span>
<br/>&nbsp;&nbsp;<span style="color: silver; ">+</span>&nbsp;<span style="color: fuchsia; font-style: italic; ">cast</span><span style="color: maroon; ">(</span><span style="color: blue; ">current_timestamp</span>&nbsp;<span style="color: blue; ">as</span>&nbsp;<span style="color: black; font-style: italic; ">[sysname]</span><span style="color: maroon; ">)</span>
<br/>&nbsp;&nbsp;<span style="color: silver; ">+</span>&nbsp;<span style="color: red; ">'&quot;&nbsp;>
<br/>&nbsp;&nbsp;&#60;business_application_01>
<br/>&nbsp;&nbsp;	&#60;table&nbsp;&nbsp;group=&quot;job&nbsp;group&quot;&nbsp;application=&quot;FINANCE&quot;&nbsp;table=&quot;table&quot;&nbsp;>
<br/>&nbsp;&nbsp;		&#60;job&nbsp;job_name=&quot;job&nbsp;name&quot;&nbsp;author=&quot;klightsey&quot;&nbsp;>
<br/>&nbsp;&nbsp;			&#60;notes_tree>
<br/>&nbsp;&nbsp;				&#60;note>&nbsp;notes&nbsp;on&nbsp;another&nbsp;job&#60;/note>
<br/>&nbsp;&nbsp;			&#60;/notes_tree>
<br/>&nbsp;&nbsp;		&#60;/job>
<br/>&nbsp;&nbsp;	&#60;/table>
<br/>&nbsp;&nbsp;&#60;/business_application_01>&#60;/log>'</span><span style="color: silver; ">;</span>
<br/><span style="color: blue; ">insert</span>&nbsp;<span style="color: blue; ">into</span>&nbsp;<span style="color: maroon; ">[xquery_demo]</span><span style="color: silver; ">.</span><span style="color: maroon; ">[log]</span>
<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: maroon; ">(</span><span style="color: maroon; ">[entry]</span><span style="color: maroon; ">)</span>
<br/><span style="color: blue; ">values</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: maroon; ">(</span><span style="color: #8000FF; ">@log_entry</span><span style="color: maroon; ">)</span><span style="color: silver; ">;</span>
<br/><span style="color: blue; ">select</span>&nbsp;<span style="color: maroon; ">[entry]</span>
<br/><span style="color: blue; ">from</span>&nbsp;&nbsp;&nbsp;<span style="color: maroon; ">[xquery_demo]</span><span style="color: silver; ">.</span><span style="color: maroon; ">[log]</span><span style="color: silver; ">;</span>
<br/><span style="color: blue; ">select</span>&nbsp;<span style="color: maroon; ">[entry]</span>
<br/><span style="color: blue; ">from</span>&nbsp;&nbsp;&nbsp;<span style="color: maroon; ">[xquery_demo]</span><span style="color: silver; ">.</span><span style="color: maroon; ">[log]</span>
<br/><span style="color: blue; ">where</span>&nbsp;&nbsp;<span style="color: maroon; ">[entry]</span><span style="color: silver; ">.</span><span style="color: #FF0080; font-weight: bold; ">value</span><span style="color: maroon; ">(</span><span style="color: red; ">'local-name((/log/*)[1])'</span><span style="color: silver; ">,</span>&nbsp;<span style="color: red; ">'[sysname]'</span><span style="color: maroon; ">)</span>&nbsp;<span style="color: silver; ">=</span>&nbsp;<span style="color: red; ">N'business_application_01'</span><span style="color: silver; ">;</span>
<br/><span style="color: blue; ">select</span>&nbsp;<span style="color: maroon; ">[entry]</span>
<br/><span style="color: blue; ">from</span>&nbsp;&nbsp;&nbsp;<span style="color: maroon; ">[xquery_demo]</span><span style="color: silver; ">.</span><span style="color: maroon; ">[log]</span>
<br/><span style="color: blue; ">where</span>&nbsp;&nbsp;<span style="color: maroon; ">[entry]</span><span style="color: silver; ">.</span><span style="color: #FF0080; font-weight: bold; ">value</span><span style="color: maroon; ">(</span><span style="color: red; ">'(/log/business_application_01/table/job/@job_name)[1]'</span><span style="color: silver; ">,</span>&nbsp;<span style="color: red; ">'[sysname]'</span><span style="color: maroon; ">)</span>&nbsp;<span style="color: silver; ">=</span>&nbsp;<span style="color: red; ">N'job&nbsp;name'</span><span style="color: silver; ">;</span>
<br/><span style="color: blue; ">select</span>&nbsp;<span style="color: maroon; ">[entry]</span>
<br/><span style="color: blue; ">from</span>&nbsp;&nbsp;&nbsp;<span style="color: maroon; ">[xquery_demo]</span><span style="color: silver; ">.</span><span style="color: maroon; ">[log]</span>
<br/><span style="color: blue; ">where</span>&nbsp;&nbsp;<span style="color: maroon; ">[entry]</span><span style="color: silver; ">.</span><span style="color: #FF0080; font-weight: bold; ">value</span><span style="color: maroon; ">(</span><span style="color: red; ">'(/log/business_application_01/table/@group)[1]'</span><span style="color: silver; ">,</span>&nbsp;<span style="color: red; ">'[sysname]'</span><span style="color: maroon; ">)</span>&nbsp;<span style="color: silver; ">=</span>&nbsp;<span style="color: red; ">N'job&nbsp;group'</span><span style="color: silver; ">;</span>
<br/><span style="color: green; font-style: italic; ">&#45;&#45;&nbsp;end&nbsp;code&nbsp;block</span>
<br/><span style="color: green; font-style: italic; ">&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;</span>
<br/><span style="color: green; font-style: italic; ">&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;</span>
<br/><span style="color: green; font-style: italic; ">&#45;&#45;&nbsp;USING&nbsp;TYPED&nbsp;[xml]&nbsp;TO&nbsp;ENSURE&nbsp;DATA&nbsp;CONFORMS&nbsp;TO&nbsp;REQUIREMENTS</span>
<br/><span style="color: green; font-style: italic; ">&#45;&#45;&nbsp;Using&nbsp;a&nbsp;schema&nbsp;to&nbsp;ensure&nbsp;data&nbsp;types.</span>
<br/><span style="color: green; font-style: italic; ">&#45;&#45;&nbsp;[xml]&nbsp;Schema&nbsp;Definition&nbsp;Tool&nbsp;(Xsd.exe):&nbsp;http://msdn.microsoft.com/en-us/library/x6c1kb0s(v=VS.71).aspx</span>
<br/><span style="color: green; font-style: italic; ">&#45;&#45;&nbsp;&nbsp;(Installed&nbsp;in&nbsp;\\dfs.com\root\Dept-IT\_EDM\users\KatherineELightsey\Tools\XSD)</span>
<br/><span style="color: green; font-style: italic; ">&#45;&#45;&nbsp;http://www.w3.org/[xml]/Schema:&nbsp;[xml]&nbsp;Schemas&nbsp;express&nbsp;shared&nbsp;vocabularies&nbsp;and&nbsp;allow&nbsp;machines&nbsp;to&nbsp;carry&nbsp;out&nbsp;rules&nbsp;made&nbsp;by&nbsp;people.&nbsp;</span>
<br/><span style="color: green; font-style: italic; ">&#45;&#45;&nbsp;&nbsp;They&nbsp;provide&nbsp;a&nbsp;means&nbsp;for&nbsp;defining&nbsp;the&nbsp;structure,&nbsp;content&nbsp;and&nbsp;semantics&nbsp;of&nbsp;[xml]&nbsp;documents.</span>
<br/><span style="color: green; font-style: italic; ">&#45;&#45;&nbsp;note&nbsp;that&nbsp;[xml]&nbsp;SCHEMA&nbsp;is&nbsp;different&nbsp;from&nbsp;[xml]&nbsp;STYLESHEETS!&nbsp;[xml]&nbsp;STYLESHEETS&nbsp;are&nbsp;a&nbsp;set&nbsp;of&nbsp;processing&nbsp;instructions.</span>
<br/><span style="color: green; font-style: italic; ">&#45;&#45;&nbsp;http://www.w3.org/TR/[xml]-stylesheet/:&nbsp;This&nbsp;document&nbsp;allows&nbsp;style&nbsp;sheets&nbsp;to&nbsp;be&nbsp;associated&nbsp;with&nbsp;an&nbsp;[xml]&nbsp;document&nbsp;by&nbsp;</span>
<br/><span style="color: green; font-style: italic; ">&#45;&#45;&nbsp;&nbsp;including&nbsp;one&nbsp;or&nbsp;more&nbsp;processing&nbsp;instructions&nbsp;with&nbsp;a&nbsp;target&nbsp;of&nbsp;[xml]-stylesheet&nbsp;in&nbsp;the&nbsp;document's&nbsp;prolog.</span>
<br/><span style="color: green; font-style: italic; ">&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;</span>
<br/><span style="color: green; font-style: italic; ">&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;</span>
<br/><span style="color: green; font-style: italic; ">&#45;&#45;&nbsp;begin&nbsp;code&nbsp;block</span>
<br/><span style="color: green; font-style: italic; ">&#45;&#45;</span>
<br/><span style="color: green; font-style: italic; ">&#45;&#45;&nbsp;Without&nbsp;typed&nbsp;data&nbsp;we&nbsp;can&nbsp;still&nbsp;insert&nbsp;garbage&nbsp;into&nbsp;[xquery_demo].[log]</span>
<br/><span style="color: blue; ">insert</span>&nbsp;<span style="color: blue; ">into</span>&nbsp;<span style="color: maroon; ">[xquery_demo]</span><span style="color: silver; ">.</span><span style="color: maroon; ">[log]</span>
<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: maroon; ">(</span><span style="color: maroon; ">[entry]</span><span style="color: maroon; ">)</span>
<br/><span style="color: blue; ">values</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: maroon; ">(</span><span style="color: red; ">N'&#60;SomethingCompletelyDifferent>Garbage&nbsp;data&#60;/SomethingCompletelyDifferent>'</span><span style="color: maroon; ">)</span><span style="color: silver; ">;</span>
<br/><span style="color: green; font-style: italic; ">&#45;&#45;</span>
<br/><span style="color: green; font-style: italic; ">&#45;&#45;&nbsp;Create&nbsp;an&nbsp;[xml]&nbsp;SCHEMA&nbsp;COLLECTION&nbsp;which&nbsp;specifies&nbsp;the&nbsp;minimum&nbsp;requirements&nbsp;for&nbsp;[xquery_demo].[log]</span>
<br/><span style="color: blue; ">if</span>&nbsp;<span style="color: blue; ">exists</span>
<br/>&nbsp;&nbsp;&nbsp;<span style="color: maroon; ">(</span><span style="color: blue; ">select</span>&nbsp;<span style="color: maroon; ">xml_collection_id</span>
<br/>&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: blue; ">from</span>&nbsp;&nbsp;&nbsp;<span style="color: maroon; ">sys</span><span style="color: silver; ">.</span><span style="color: maroon; ">xml_schema_collections</span>&nbsp;<span style="color: blue; ">as</span>&nbsp;<span style="color: maroon; ">xsc</span>
<br/>&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: blue; ">where</span>&nbsp;&nbsp;<span style="color: maroon; ">xsc</span><span style="color: silver; ">.</span><span style="color: blue; ">name</span>&nbsp;<span style="color: silver; ">=</span>&nbsp;<span style="color: red; ">'xsd_log'</span>
<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: blue; ">and</span>&nbsp;<span style="color: maroon; ">xsc</span><span style="color: silver; ">.</span><span style="color: maroon; ">schema_id</span>&nbsp;<span style="color: silver; ">=</span>&nbsp;<span style="color: #FF0080; font-weight: bold; ">schema_id</span><span style="color: maroon; ">(</span><span style="color: red; ">N'xquery_demo'</span><span style="color: maroon; ">)</span><span style="color: maroon; ">)</span>
<br/>&nbsp;&nbsp;<span style="color: blue; ">drop</span>&nbsp;<span style="color: maroon; ">xml</span>&nbsp;<span style="color: blue; ">schema</span>&nbsp;<span style="color: maroon; ">collection</span>&nbsp;<span style="color: maroon; ">[xquery_demo]</span><span style="color: silver; ">.</span><span style="color: maroon; ">[xsd_log]</span><span style="color: silver; ">;</span>
<br/><span style="color: maroon; ">go</span>
<br/><span style="color: blue; ">create</span>&nbsp;<span style="color: maroon; ">xml</span>&nbsp;<span style="color: blue; ">schema</span>&nbsp;<span style="color: maroon; ">collection</span>&nbsp;<span style="color: maroon; ">[xquery_demo]</span><span style="color: silver; ">.</span><span style="color: maroon; ">[xsd_log]</span>&nbsp;<span style="color: blue; ">as</span>&nbsp;<span style="color: red; ">N'&#60;xsd:schema&nbsp;xmlns:xsd=&quot;http://www.w3.org/2001/XMLSchema&quot;>
<br/>&nbsp;&nbsp;&#60;xsd:element&nbsp;name=&quot;NewDataSet&quot;>
<br/>&nbsp;&nbsp;&nbsp;&nbsp;&#60;xsd:complexType>
<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#60;xsd:complexContent>
<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#60;xsd:restriction&nbsp;base=&quot;xsd:anyType&quot;>
<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#60;xsd:choice&nbsp;minOccurs=&quot;0&quot;&nbsp;maxOccurs=&quot;unbounded&quot;>
<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#60;xsd:element&nbsp;ref=&quot;log&quot;&nbsp;/>
<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#60;/xsd:choice>
<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#60;/xsd:restriction>
<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#60;/xsd:complexContent>
<br/>&nbsp;&nbsp;&nbsp;&nbsp;&#60;/xsd:complexType>
<br/>&nbsp;&nbsp;&#60;/xsd:element>
<br/>&nbsp;&nbsp;&#60;xsd:element&nbsp;name=&quot;log&quot;>
<br/>&nbsp;&nbsp;&nbsp;&nbsp;&#60;xsd:complexType>
<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#60;xsd:complexContent>
<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#60;xsd:restriction&nbsp;base=&quot;xsd:anyType&quot;>
<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#60;xsd:sequence>
<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#60;xsd:element&nbsp;name=&quot;business_application_01&quot;&nbsp;maxOccurs=&quot;unbounded&quot;>
<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#60;xsd:complexType>
<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#60;xsd:complexContent>
<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#60;xsd:restriction&nbsp;base=&quot;xsd:anyType&quot;>
<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#60;xsd:sequence>
<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#60;xsd:element&nbsp;name=&quot;table&quot;&nbsp;maxOccurs=&quot;unbounded&quot;>
<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#60;xsd:complexType>
<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#60;xsd:complexContent>
<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#60;xsd:restriction&nbsp;base=&quot;xsd:anyType&quot;>
<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#60;xsd:sequence>
<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#60;xsd:element&nbsp;name=&quot;job&quot;&nbsp;maxOccurs=&quot;unbounded&quot;>
<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#60;xsd:complexType>
<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#60;xsd:complexContent>
<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#60;xsd:restriction&nbsp;base=&quot;xsd:anyType&quot;>
<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#60;xsd:sequence>
<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#60;xsd:element&nbsp;name=&quot;notes_tree&quot;&nbsp;maxOccurs=&quot;unbounded&quot;>
<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#60;xsd:complexType>
<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#60;xsd:complexContent>
<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#60;xsd:restriction&nbsp;base=&quot;xsd:anyType&quot;>
<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#60;xsd:sequence>
<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#60;xsd:element&nbsp;name=&quot;note&quot;&nbsp;maxOccurs=&quot;unbounded&quot;&nbsp;nillable=&quot;true&quot;>
<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#60;xsd:complexType>
<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#60;xsd:simpleContent>
<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#60;xsd:extension&nbsp;base=&quot;xsd:string&quot;&nbsp;/>
<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#60;/xsd:simpleContent>
<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#60;/xsd:complexType>
<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#60;/xsd:element>
<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#60;/xsd:sequence>
<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#60;/xsd:restriction>
<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#60;/xsd:complexContent>
<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#60;/xsd:complexType>
<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#60;/xsd:element>
<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#60;/xsd:sequence>
<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#60;xsd:attribute&nbsp;name=&quot;job_name&quot;&nbsp;type=&quot;xsd:string&quot;&nbsp;use=&quot;required&quot;&nbsp;/>
<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#60;xsd:attribute&nbsp;name=&quot;author&quot;&nbsp;type=&quot;xsd:string&quot;&nbsp;/>
<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#60;/xsd:restriction>
<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#60;/xsd:complexContent>
<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#60;/xsd:complexType>
<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#60;/xsd:element>
<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#60;/xsd:sequence>
<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#60;xsd:attribute&nbsp;name=&quot;group&quot;&nbsp;type=&quot;xsd:string&quot;&nbsp;use=&quot;required&quot;&nbsp;/>
<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#60;xsd:attribute&nbsp;name=&quot;application&quot;&nbsp;type=&quot;xsd:string&quot;&nbsp;use=&quot;required&quot;&nbsp;/>
<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#60;xsd:attribute&nbsp;name=&quot;table&quot;&nbsp;type=&quot;xsd:string&quot;&nbsp;use=&quot;required&quot;&nbsp;/>
<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#60;/xsd:restriction>
<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#60;/xsd:complexContent>
<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#60;/xsd:complexType>
<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#60;/xsd:element>
<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#60;/xsd:sequence>
<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#60;/xsd:restriction>
<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#60;/xsd:complexContent>
<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#60;/xsd:complexType>
<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#60;/xsd:element>
<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#60;/xsd:sequence>
<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#60;xsd:attribute&nbsp;name=&quot;timestamp&quot;&nbsp;type=&quot;xsd:string&quot;&nbsp;use=&quot;required&quot;&nbsp;/>
<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#60;/xsd:restriction>
<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#60;/xsd:complexContent>
<br/>&nbsp;&nbsp;&nbsp;&nbsp;&#60;/xsd:complexType>
<br/>&nbsp;&nbsp;&#60;/xsd:element>
<br/>&#60;/xsd:schema>'</span><span style="color: silver; ">;</span>
<br/><span style="color: maroon; ">go</span>
<br/><span style="color: blue; ">select</span>&nbsp;<span style="color: #FF0080; font-weight: bold; ">xml_schema_namespace</span><span style="color: maroon; ">(</span><span style="color: red; ">N'xquery_demo'</span><span style="color: silver; ">,</span>&nbsp;<span style="color: red; ">N'xsd_log'</span><span style="color: maroon; ">)</span><span style="color: silver; ">;</span>
<br/><span style="color: maroon; ">go</span>
<br/><span style="color: green; font-style: italic; ">&#45;&#45;&nbsp;end&nbsp;code&nbsp;block</span>
<br/><span style="color: green; font-style: italic; ">&#45;&#45;&nbsp;begin&nbsp;code&nbsp;block</span>
<br/><span style="color: green; font-style: italic; ">&#45;&#45;</span>
<br/><span style="color: green; font-style: italic; ">&#45;&#45;&nbsp;Recreate&nbsp;[xquery_demo].[log]&nbsp;specifying&nbsp;column&nbsp;[entry]&nbsp;as&nbsp;TYPED&nbsp;[xml]&nbsp;using&nbsp;created</span>
<br/><span style="color: blue; ">if</span>&nbsp;<span style="color: fuchsia; font-style: italic; ">object_id</span><span style="color: maroon; ">(</span><span style="color: red; ">N'[xquery_demo].[log]'</span><span style="color: silver; ">,</span>&nbsp;<span style="color: red; ">N'U'</span><span style="color: maroon; ">)</span>&nbsp;<span style="color: blue; ">is</span>&nbsp;<span style="color: blue; ">not</span>&nbsp;<span style="color: blue; ">null</span>
<br/>&nbsp;&nbsp;<span style="color: blue; ">drop</span>&nbsp;<span style="color: blue; ">table</span>&nbsp;<span style="color: maroon; ">[xquery_demo]</span><span style="color: silver; ">.</span><span style="color: maroon; ">[log]</span><span style="color: silver; ">;</span>
<br/><span style="color: maroon; ">go</span>
<br/><span style="color: blue; ">create</span>&nbsp;<span style="color: blue; ">table</span>&nbsp;<span style="color: maroon; ">[xquery_demo]</span><span style="color: silver; ">.</span><span style="color: maroon; ">[log]</span>&nbsp;<span style="color: maroon; ">(</span>
<br/>&nbsp;&nbsp;<span style="color: maroon; ">[id]</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: black; font-style: italic; ">[int]</span>&nbsp;<span style="color: blue; ">identity</span><span style="color: maroon; ">(</span><span style="color: black; ">1</span><span style="color: silver; ">,</span>&nbsp;<span style="color: black; ">1</span><span style="color: maroon; ">)</span>&nbsp;<span style="color: blue; ">not</span>&nbsp;<span style="color: blue; ">null</span>&nbsp;<span style="color: blue; ">primary</span>&nbsp;<span style="color: blue; ">key</span>&nbsp;<span style="color: blue; ">clustered</span>
<br/>&nbsp;&nbsp;<span style="color: silver; ">,</span>&nbsp;<span style="color: maroon; ">[entry]</span>&nbsp;<span style="color: black; font-style: italic; ">xml</span>&nbsp;<span style="color: maroon; ">(</span><span style="color: maroon; ">[xquery_demo]</span><span style="color: silver; ">.</span><span style="color: maroon; ">[xsd_log]</span><span style="color: maroon; ">)</span>
<br/>&nbsp;&nbsp;<span style="color: maroon; ">)</span><span style="color: silver; ">;</span>
<br/><span style="color: maroon; ">go</span>
<br/><span style="color: blue; ">insert</span>&nbsp;<span style="color: blue; ">into</span>&nbsp;<span style="color: maroon; ">[xquery_demo]</span><span style="color: silver; ">.</span><span style="color: maroon; ">[log]</span>
<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: maroon; ">(</span><span style="color: maroon; ">[entry]</span><span style="color: maroon; ">)</span>
<br/><span style="color: blue; ">values</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: maroon; ">(</span><span style="color: red; ">N'&#60;log&nbsp;timestamp=&quot;'</span>
<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: silver; ">+</span>&nbsp;<span style="color: fuchsia; font-style: italic; ">cast</span><span style="color: maroon; ">(</span><span style="color: blue; ">current_timestamp</span>&nbsp;<span style="color: blue; ">as</span>&nbsp;<span style="color: black; font-style: italic; ">[sysname]</span><span style="color: maroon; ">)</span>
<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: silver; ">+</span>&nbsp;<span style="color: red; ">'&quot;&nbsp;>
<br/>&nbsp;&nbsp;&#60;business_application_01>
<br/>&nbsp;&nbsp;	&#60;table&nbsp;&nbsp;group=&quot;job&nbsp;group&quot;&nbsp;application=&quot;FINANCE&quot;&nbsp;table=&quot;table&quot;&nbsp;>
<br/>&nbsp;&nbsp;		&#60;job&nbsp;job_name=&quot;job&nbsp;name&quot;&nbsp;author=&quot;klightsey&quot;&nbsp;>
<br/>&nbsp;&nbsp;			&#60;notes_tree>
<br/>&nbsp;&nbsp;				&#60;note>&nbsp;notes&nbsp;on&nbsp;another&nbsp;job&#60;/note>
<br/>&nbsp;&nbsp;			&#60;/notes_tree>
<br/>&nbsp;&nbsp;		&#60;/job>
<br/>&nbsp;&nbsp;	&#60;/table>
<br/>&nbsp;&nbsp;&#60;/business_application_01>&#60;/log>'</span><span style="color: maroon; ">)</span><span style="color: silver; ">;</span>
<br/><span style="color: blue; ">select</span>&nbsp;<span style="color: maroon; ">[id]</span>
<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: silver; ">,</span>&nbsp;<span style="color: maroon; ">[entry]</span>
<br/><span style="color: blue; ">from</span>&nbsp;&nbsp;&nbsp;<span style="color: maroon; ">[xquery_demo]</span><span style="color: silver; ">.</span><span style="color: maroon; ">[log]</span><span style="color: silver; ">;</span>
<br/><span style="color: maroon; ">go</span>
<br/><span style="color: green; font-style: italic; ">&#45;&#45;&nbsp;end&nbsp;code&nbsp;block</span>
<br/><span style="color: green; font-style: italic; ">&#45;&#45;&nbsp;begin&nbsp;code&nbsp;block</span>
<br/><span style="color: green; font-style: italic; ">&#45;&#45;</span>
<br/><span style="color: green; font-style: italic; ">&#45;&#45;&nbsp;job_name&nbsp;is&nbsp;required!</span>
<br/><span style="color: blue; ">insert</span>&nbsp;<span style="color: blue; ">into</span>&nbsp;<span style="color: maroon; ">[xquery_demo]</span><span style="color: silver; ">.</span><span style="color: maroon; ">[log]</span>
<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: maroon; ">(</span><span style="color: maroon; ">[entry]</span><span style="color: maroon; ">)</span>
<br/><span style="color: blue; ">values</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: maroon; ">(</span><span style="color: red; ">N'&#60;log&nbsp;timestamp=&quot;'</span>
<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: silver; ">+</span>&nbsp;<span style="color: fuchsia; font-style: italic; ">cast</span><span style="color: maroon; ">(</span><span style="color: blue; ">current_timestamp</span>&nbsp;<span style="color: blue; ">as</span>&nbsp;<span style="color: black; font-style: italic; ">[sysname]</span><span style="color: maroon; ">)</span>
<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: silver; ">+</span>&nbsp;<span style="color: red; ">'&quot;&nbsp;>
<br/>&nbsp;&nbsp;&#60;business_application_01>
<br/>&nbsp;&nbsp;	&#60;table&nbsp;&nbsp;group=&quot;group&nbsp;name&quot;&nbsp;application=&quot;FINANCE&quot;&nbsp;table=&quot;table&quot;&nbsp;>
<br/>&nbsp;&nbsp;		&#60;job&nbsp;&nbsp;author=&quot;klightsey&quot;&nbsp;>
<br/>&nbsp;&nbsp;			&#60;notes_tree>
<br/>&nbsp;&nbsp;				&#60;note>notes&nbsp;on&nbsp;another&nbsp;job&#60;/note>
<br/>&nbsp;&nbsp;			&#60;/notes_tree>
<br/>&nbsp;&nbsp;		&#60;/job>
<br/>&nbsp;&nbsp;	&#60;/table>
<br/>&nbsp;&nbsp;&#60;/business_application_01>&#60;/log>'</span><span style="color: maroon; ">)</span><span style="color: silver; ">;</span>
<br/><span style="color: green; font-style: italic; ">&#45;&#45;&nbsp;end&nbsp;code&nbsp;block</span>
<br/><span style="color: green; font-style: italic; ">&#45;&#45;&nbsp;begin&nbsp;code&nbsp;block</span>
<br/><span style="color: green; font-style: italic; ">&#45;&#45;</span>
<br/><span style="color: green; font-style: italic; ">&#45;&#45;&nbsp;timestamp&nbsp;is&nbsp;required!</span>
<br/><span style="color: blue; ">insert</span>&nbsp;<span style="color: blue; ">into</span>&nbsp;<span style="color: maroon; ">[xquery_demo]</span><span style="color: silver; ">.</span><span style="color: maroon; ">[log]</span>
<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: maroon; ">(</span><span style="color: maroon; ">[entry]</span><span style="color: maroon; ">)</span>
<br/><span style="color: blue; ">values</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: maroon; ">(</span><span style="color: red; ">N'&#60;log&nbsp;>
<br/>&nbsp;&nbsp;&#60;business_application_01>
<br/>&nbsp;&nbsp;	&#60;table&nbsp;&nbsp;group=&quot;ACS_PAYMENT&quot;&nbsp;application=&quot;FINANCE&quot;&nbsp;table=&quot;D_ACS_PAYMENT&quot;&nbsp;>
<br/>&nbsp;&nbsp;		&#60;job&nbsp;job_name=&quot;FTR_ND_ACS_PAYMENT&quot;&nbsp;author=&quot;klightsey&quot;&nbsp;>
<br/>&nbsp;&nbsp;			&#60;notes_tree>
<br/>&nbsp;&nbsp;				&#60;note>CMD_ND_ACS_PAYMENT_LASERUTIL&nbsp;notes&nbsp;on&nbsp;another&nbsp;job&#60;/note>
<br/>&nbsp;&nbsp;			&#60;/notes_tree>
<br/>&nbsp;&nbsp;		&#60;/job>
<br/>&nbsp;&nbsp;	&#60;/table>
<br/>&nbsp;&nbsp;&#60;/business_application_01>&#60;/log>'</span><span style="color: maroon; ">)</span><span style="color: silver; ">;</span>
<br/><span style="color: green; font-style: italic; ">&#45;&#45;&nbsp;end&nbsp;code&nbsp;block</span>
<br/><span style="color: green; font-style: italic; ">&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;</span>
<br/><span style="color: green; font-style: italic; ">&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;</span>
<br/><span style="color: green; font-style: italic; ">&#45;&#45;&nbsp;Setting&nbsp;up&nbsp;the&nbsp;logging&nbsp;table&nbsp;to&nbsp;allow&nbsp;entries&nbsp;of&nbsp;multiple&nbsp;types</span>
<br/><span style="color: green; font-style: italic; ">&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;</span>
<br/><span style="color: green; font-style: italic; ">&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;</span>
<br/><span style="color: green; font-style: italic; ">&#45;&#45;&nbsp;begin&nbsp;code&nbsp;block</span>
<br/><span style="color: blue; ">if</span>&nbsp;<span style="color: fuchsia; font-style: italic; ">object_id</span><span style="color: maroon; ">(</span><span style="color: red; ">N'[xquery_demo].[log]'</span><span style="color: silver; ">,</span>&nbsp;<span style="color: red; ">N'U'</span><span style="color: maroon; ">)</span>&nbsp;<span style="color: blue; ">is</span>&nbsp;<span style="color: blue; ">not</span>&nbsp;<span style="color: blue; ">null</span>
<br/>&nbsp;&nbsp;<span style="color: blue; ">drop</span>&nbsp;<span style="color: blue; ">table</span>&nbsp;<span style="color: maroon; ">[xquery_demo]</span><span style="color: silver; ">.</span><span style="color: maroon; ">[log]</span><span style="color: silver; ">;</span>
<br/><span style="color: maroon; ">go</span>
<br/><span style="color: blue; ">create</span>&nbsp;<span style="color: blue; ">table</span>&nbsp;<span style="color: maroon; ">[xquery_demo]</span><span style="color: silver; ">.</span><span style="color: maroon; ">[log]</span>&nbsp;<span style="color: maroon; ">(</span>
<br/>&nbsp;&nbsp;<span style="color: maroon; ">[id]</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: black; font-style: italic; ">[int]</span>&nbsp;<span style="color: blue; ">identity</span>&nbsp;<span style="color: blue; ">primary</span>&nbsp;<span style="color: blue; ">key</span>
<br/>&nbsp;&nbsp;<span style="color: silver; ">,</span>&nbsp;<span style="color: maroon; ">[entry]</span>&nbsp;<span style="color: black; font-style: italic; ">[xml]</span>
<br/>&nbsp;&nbsp;<span style="color: maroon; ">)</span><span style="color: silver; ">;</span>
<br/><span style="color: maroon; ">go</span>
<br/><span style="color: blue; ">if</span>&nbsp;<span style="color: blue; ">exists</span>
<br/>&nbsp;&nbsp;&nbsp;<span style="color: maroon; ">(</span><span style="color: blue; ">select</span>&nbsp;<span style="color: maroon; ">xml_collection_id</span>
<br/>&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: blue; ">from</span>&nbsp;&nbsp;&nbsp;<span style="color: maroon; ">sys</span><span style="color: silver; ">.</span><span style="color: maroon; ">xml_schema_collections</span>&nbsp;<span style="color: blue; ">as</span>&nbsp;<span style="color: maroon; ">xsc</span>
<br/>&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: blue; ">where</span>&nbsp;&nbsp;<span style="color: maroon; ">xsc</span><span style="color: silver; ">.</span><span style="color: blue; ">name</span>&nbsp;<span style="color: silver; ">=</span>&nbsp;<span style="color: red; ">'xsd_log'</span>
<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: blue; ">and</span>&nbsp;<span style="color: maroon; ">xsc</span><span style="color: silver; ">.</span><span style="color: maroon; ">schema_id</span>&nbsp;<span style="color: silver; ">=</span>&nbsp;<span style="color: #FF0080; font-weight: bold; ">schema_id</span><span style="color: maroon; ">(</span><span style="color: red; ">N'xquery_demo'</span><span style="color: maroon; ">)</span><span style="color: maroon; ">)</span>
<br/>&nbsp;&nbsp;<span style="color: blue; ">drop</span>&nbsp;<span style="color: maroon; ">xml</span>&nbsp;<span style="color: blue; ">schema</span>&nbsp;<span style="color: maroon; ">collection</span>&nbsp;<span style="color: maroon; ">[xquery_demo]</span><span style="color: silver; ">.</span><span style="color: maroon; ">[xsd_log]</span><span style="color: silver; ">;</span>
<br/><span style="color: maroon; ">go</span>
<br/><span style="color: blue; ">create</span>&nbsp;<span style="color: maroon; ">xml</span>&nbsp;<span style="color: blue; ">schema</span>&nbsp;<span style="color: maroon; ">collection</span>&nbsp;<span style="color: maroon; ">[xquery_demo]</span><span style="color: silver; ">.</span><span style="color: maroon; ">[xsd_log]</span>&nbsp;<span style="color: blue; ">as</span>&nbsp;<span style="color: red; ">N'&#60;?xml&nbsp;version=&quot;1.0&quot;&nbsp;encoding=&quot;utf-16&quot;?>
<br/>&#60;xs:schema&nbsp;id=&quot;NewDataSet&quot;&nbsp;xmlns=&quot;&quot;&nbsp;xmlns:xs=&quot;http://www.w3.org/2001/XMLSchema&quot;&nbsp;xmlns:msdata=&quot;urn:schemas-microsoft-com:[xml]-msdata&quot;>
<br/>&nbsp;&nbsp;&#60;xs:element&nbsp;name=&quot;log&quot;>
<br/>&nbsp;&nbsp;&nbsp;&nbsp;&#60;xs:complexType>
<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#60;xs:sequence>
<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#60;xs:any&nbsp;minOccurs=&quot;0&quot;&nbsp;maxOccurs=&quot;unbounded&quot;
<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;processContents=&quot;lax&quot;/>
<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#60;/xs:sequence>
<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#60;xs:attribute&nbsp;name=&quot;timestamp&quot;&nbsp;type=&quot;xs:string&quot;&nbsp;use=&quot;required&quot;&nbsp;/>
<br/>&nbsp;&nbsp;&nbsp;&nbsp;&#60;/xs:complexType>
<br/>&nbsp;&nbsp;&#60;/xs:element>
<br/>&nbsp;&nbsp;&#60;xs:element&nbsp;name=&quot;NewDataSet&quot;&nbsp;msdata:IsDataSet=&quot;true&quot;&nbsp;msdata:UseCurrentLocale=&quot;true&quot;>
<br/>&nbsp;&nbsp;&nbsp;&nbsp;&#60;xs:complexType>
<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#60;xs:choice&nbsp;minOccurs=&quot;0&quot;&nbsp;maxOccurs=&quot;unbounded&quot;>
<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#60;xs:element&nbsp;ref=&quot;log&quot;&nbsp;/>
<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#60;/xs:choice>
<br/>&nbsp;&nbsp;&nbsp;&nbsp;&#60;/xs:complexType>
<br/>&nbsp;&nbsp;&#60;/xs:element>
<br/>&#60;/xs:schema>'</span><span style="color: silver; ">;</span>
<br/><span style="color: maroon; ">go</span><span style="color: blue; ">declare</span>&nbsp;<span style="color: #8000FF; ">@x</span>&nbsp;<span style="color: maroon; ">[xml]</span>&nbsp;<span style="color: maroon; ">(</span><span style="color: maroon; ">[xquery_demo]</span><span style="color: silver; ">.</span><span style="color: maroon; ">[xsd_log]</span><span style="color: maroon; ">)</span>&nbsp;<span style="color: silver; ">=</span>&nbsp;<span style="color: red; ">N'&#60;log&nbsp;timestamp=&quot;'</span>
<br/>&nbsp;&nbsp;<span style="color: silver; ">+</span>&nbsp;<span style="color: maroon; ">cast</span><span style="color: maroon; ">(</span><span style="color: blue; ">current_timestamp</span>&nbsp;<span style="color: blue; ">as</span>&nbsp;<span style="color: maroon; ">[sysname]</span><span style="color: maroon; ">)</span>&nbsp;<span style="color: silver; ">+</span>&nbsp;<span style="color: red; ">'&quot;&nbsp;/>'</span><span style="color: silver; ">;</span>
<br/><span style="color: blue; ">select</span>&nbsp;<span style="color: #8000FF; ">@x</span><span style="color: silver; ">;</span>
<br/><span style="color: maroon; ">go</span><span style="color: blue; ">declare</span>&nbsp;<span style="color: #8000FF; ">@x</span>&nbsp;<span style="color: maroon; ">[xml]</span>&nbsp;<span style="color: maroon; ">(</span><span style="color: maroon; ">[xquery_demo]</span><span style="color: silver; ">.</span><span style="color: maroon; ">[xsd_log]</span><span style="color: maroon; ">)</span>&nbsp;<span style="color: silver; ">=</span>&nbsp;<span style="color: red; ">N'&#60;log&nbsp;timestamp=&quot;'</span>
<br/>&nbsp;&nbsp;<span style="color: silver; ">+</span>&nbsp;<span style="color: maroon; ">cast</span><span style="color: maroon; ">(</span><span style="color: blue; ">current_timestamp</span>&nbsp;<span style="color: blue; ">as</span>&nbsp;<span style="color: maroon; ">[sysname]</span><span style="color: maroon; ">)</span>&nbsp;<span style="color: silver; ">+</span>&nbsp;<span style="color: red; ">'&quot;&nbsp;/>'</span><span style="color: silver; ">;</span>
<br/><span style="color: blue; ">set</span>&nbsp;<span style="color: #8000FF; ">@x</span><span style="color: silver; ">=</span>&nbsp;<span style="color: red; ">N'&#60;log&nbsp;timestamp=&quot;'</span>
<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: silver; ">+</span>&nbsp;<span style="color: fuchsia; font-style: italic; ">cast</span><span style="color: maroon; ">(</span><span style="color: blue; ">current_timestamp</span>&nbsp;<span style="color: blue; ">as</span>&nbsp;<span style="color: black; font-style: italic; ">[sysname]</span><span style="color: maroon; ">)</span>
<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: silver; ">+</span>&nbsp;<span style="color: red; ">'&quot;&nbsp;>&#60;business_application_01&nbsp;/>&#60;/log>'</span><span style="color: silver; ">;</span>
<br/><span style="color: blue; ">select</span>&nbsp;<span style="color: #8000FF; ">@x</span>
<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: silver; ">,</span>&nbsp;<span style="color: maroon; ">t</span><span style="color: silver; ">.</span><span style="color: maroon; ">c</span><span style="color: silver; ">.</span><span style="color: #FF0080; font-weight: bold; ">query</span><span style="color: maroon; ">(</span><span style="color: red; ">'.'</span><span style="color: maroon; ">)</span>&nbsp;<span style="color: blue; ">as</span>&nbsp;<span style="color: maroon; ">result</span>
<br/><span style="color: blue; ">from</span>&nbsp;&nbsp;&nbsp;<span style="color: #8000FF; ">@x</span><span style="color: silver; ">.</span><span style="color: #FF0080; font-weight: bold; ">nodes</span><span style="color: maroon; ">(</span><span style="color: red; ">'/log/*'</span><span style="color: maroon; ">)</span>&nbsp;<span style="color: maroon; ">t</span><span style="color: maroon; ">(</span><span style="color: maroon; ">c</span><span style="color: maroon; ">)</span><span style="color: silver; ">;</span>
<br/><span style="color: green; font-style: italic; ">&#45;&#45;&nbsp;end&nbsp;code&nbsp;block</span>
<br/><span style="color: green; font-style: italic; ">&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;</span>
<br/><span style="color: green; font-style: italic; ">&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;</span>
<br/><span style="color: green; font-style: italic; ">&#45;&#45;&nbsp;TYPED&nbsp;[xml]&nbsp;PARAMETERS</span>
<br/><span style="color: green; font-style: italic; ">&#45;&#45;&nbsp;Using&nbsp;a&nbsp;schema&nbsp;to&nbsp;ensure&nbsp;that&nbsp;a&nbsp;parameter&nbsp;is&nbsp;loaded&nbsp;with&nbsp;TYPED&nbsp;[xml]&nbsp;data</span>
<br/><span style="color: green; font-style: italic; ">&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;</span>
<br/><span style="color: green; font-style: italic; ">&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;</span>
<br/><span style="color: green; font-style: italic; ">&#45;&#45;&nbsp;begin&nbsp;code&nbsp;block</span>
<br/><span style="color: blue; ">if</span>&nbsp;<span style="color: blue; ">exists</span>
<br/>&nbsp;&nbsp;&nbsp;<span style="color: maroon; ">(</span><span style="color: blue; ">select</span>&nbsp;<span style="color: maroon; ">xml_collection_id</span>
<br/>&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: blue; ">from</span>&nbsp;&nbsp;&nbsp;<span style="color: maroon; ">sys</span><span style="color: silver; ">.</span><span style="color: maroon; ">xml_schema_collections</span>&nbsp;<span style="color: blue; ">as</span>&nbsp;<span style="color: maroon; ">xsc</span>
<br/>&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: blue; ">where</span>&nbsp;&nbsp;<span style="color: maroon; ">xsc</span><span style="color: silver; ">.</span><span style="color: blue; ">name</span>&nbsp;<span style="color: silver; ">=</span>&nbsp;<span style="color: red; ">'xsd_log_business_application_01'</span>
<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: blue; ">and</span>&nbsp;<span style="color: maroon; ">xsc</span><span style="color: silver; ">.</span><span style="color: maroon; ">schema_id</span>&nbsp;<span style="color: silver; ">=</span>&nbsp;<span style="color: #FF0080; font-weight: bold; ">schema_id</span><span style="color: maroon; ">(</span><span style="color: red; ">N'xquery_demo'</span><span style="color: maroon; ">)</span><span style="color: maroon; ">)</span>
<br/>&nbsp;&nbsp;<span style="color: blue; ">drop</span>&nbsp;<span style="color: maroon; ">xml</span>&nbsp;<span style="color: blue; ">schema</span>&nbsp;<span style="color: maroon; ">collection</span>&nbsp;<span style="color: maroon; ">[xquery_demo]</span><span style="color: silver; ">.</span><span style="color: maroon; ">[xsd_log_business_application_01]</span><span style="color: silver; ">;</span>
<br/><span style="color: maroon; ">go</span>
<br/><span style="color: blue; ">create</span>&nbsp;<span style="color: maroon; ">xml</span>&nbsp;<span style="color: blue; ">schema</span>&nbsp;<span style="color: maroon; ">collection</span>&nbsp;<span style="color: maroon; ">[xquery_demo]</span><span style="color: silver; ">.</span><span style="color: maroon; ">[xsd_log_business_application_01]</span>&nbsp;<span style="color: blue; ">as</span>&nbsp;<span style="color: red; ">N'&#60;?xml&nbsp;version=&quot;1.0&quot;&nbsp;encoding=&quot;utf-16&quot;?>
<br/>&#60;xs:schema&nbsp;id=&quot;business_application_01&quot;&nbsp;xmlns=&quot;&quot;&nbsp;xmlns:xs=&quot;http://www.w3.org/2001/XMLSchema&quot;&nbsp;xmlns:msdata=&quot;urn:schemas-microsoft-com:[xml]-msdata&quot;>
<br/>&nbsp;&nbsp;&#60;xs:element&nbsp;name=&quot;business_application_01&quot;&nbsp;msdata:IsDataSet=&quot;true&quot;&nbsp;msdata:UseCurrentLocale=&quot;true&quot;>
<br/>&nbsp;&nbsp;&nbsp;&nbsp;&#60;xs:complexType>
<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#60;xs:choice&nbsp;minOccurs=&quot;1&quot;&nbsp;maxOccurs=&quot;unbounded&quot;>
<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#60;xs:element&nbsp;name=&quot;table&quot;>
<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#60;xs:complexType>
<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#60;xs:sequence>
<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#60;xs:element&nbsp;name=&quot;job&quot;&nbsp;minOccurs=&quot;1&quot;&nbsp;maxOccurs=&quot;unbounded&quot;>
<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#60;xs:complexType>
<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#60;xs:sequence>
<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#60;xs:element&nbsp;name=&quot;notes_tree&quot;&nbsp;minOccurs=&quot;1&quot;&nbsp;maxOccurs=&quot;unbounded&quot;>
<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#60;xs:complexType>
<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#60;xs:sequence>
<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#60;xs:element&nbsp;name=&quot;note&quot;&nbsp;nillable=&quot;true&quot;&nbsp;minOccurs=&quot;1&quot;&nbsp;maxOccurs=&quot;unbounded&quot;>
<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#60;xs:complexType>
<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#60;xs:simpleContent&nbsp;msdata:ColumnName=&quot;note_text&quot;&nbsp;msdata:Ordinal=&quot;0&quot;>
<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#60;xs:extension&nbsp;base=&quot;xs:string&quot;>
<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#60;/xs:extension>
<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#60;/xs:simpleContent>
<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#60;/xs:complexType>
<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#60;/xs:element>
<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#60;/xs:sequence>
<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#60;/xs:complexType>
<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#60;/xs:element>
<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#60;/xs:sequence>
<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#60;xs:attribute&nbsp;name=&quot;job_name&quot;&nbsp;type=&quot;xs:string&quot;&nbsp;use=&quot;required&quot;&nbsp;/>
<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#60;xs:attribute&nbsp;name=&quot;author&quot;&nbsp;type=&quot;xs:string&quot;&nbsp;use=&quot;required&quot;&nbsp;/>
<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#60;/xs:complexType>
<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#60;/xs:element>
<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#60;/xs:sequence>
<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#60;xs:attribute&nbsp;name=&quot;group&quot;&nbsp;type=&quot;xs:string&quot;&nbsp;use=&quot;required&quot;&nbsp;/>
<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#60;xs:attribute&nbsp;name=&quot;application&quot;&nbsp;type=&quot;xs:string&quot;&nbsp;use=&quot;required&quot;&nbsp;/>
<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#60;xs:attribute&nbsp;name=&quot;table&quot;&nbsp;type=&quot;xs:string&quot;&nbsp;use=&quot;required&quot;&nbsp;/>
<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#60;/xs:complexType>
<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#60;/xs:element>
<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#60;/xs:choice>
<br/>&nbsp;&nbsp;&nbsp;&nbsp;&#60;/xs:complexType>
<br/>&nbsp;&nbsp;&#60;/xs:element>
<br/>&#60;/xs:schema>'</span><span style="color: silver; ">;</span>
<br/><span style="color: maroon; ">go</span>
<br/><span style="color: blue; ">if</span>&nbsp;<span style="color: blue; ">exists</span>
<br/>&nbsp;&nbsp;&nbsp;<span style="color: maroon; ">(</span><span style="color: blue; ">select</span>&nbsp;<span style="color: maroon; ">xml_collection_id</span>
<br/>&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: blue; ">from</span>&nbsp;&nbsp;&nbsp;<span style="color: maroon; ">sys</span><span style="color: silver; ">.</span><span style="color: maroon; ">xml_schema_collections</span>&nbsp;<span style="color: blue; ">as</span>&nbsp;<span style="color: maroon; ">xsc</span>
<br/>&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: blue; ">where</span>&nbsp;&nbsp;<span style="color: maroon; ">xsc</span><span style="color: silver; ">.</span><span style="color: blue; ">name</span>&nbsp;<span style="color: silver; ">=</span>&nbsp;<span style="color: red; ">'xsd_log_business_application_02'</span>
<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: blue; ">and</span>&nbsp;<span style="color: maroon; ">xsc</span><span style="color: silver; ">.</span><span style="color: maroon; ">schema_id</span>&nbsp;<span style="color: silver; ">=</span>&nbsp;<span style="color: #FF0080; font-weight: bold; ">schema_id</span><span style="color: maroon; ">(</span><span style="color: red; ">N'xquery_demo'</span><span style="color: maroon; ">)</span><span style="color: maroon; ">)</span>
<br/>&nbsp;&nbsp;<span style="color: blue; ">drop</span>&nbsp;<span style="color: maroon; ">xml</span>&nbsp;<span style="color: blue; ">schema</span>&nbsp;<span style="color: maroon; ">collection</span>&nbsp;<span style="color: maroon; ">[xquery_demo]</span><span style="color: silver; ">.</span><span style="color: maroon; ">xsd_log_business_application_02</span><span style="color: silver; ">;</span>
<br/><span style="color: maroon; ">go</span>
<br/><span style="color: blue; ">create</span>&nbsp;<span style="color: maroon; ">xml</span>&nbsp;<span style="color: blue; ">schema</span>&nbsp;<span style="color: maroon; ">collection</span>&nbsp;<span style="color: maroon; ">[xquery_demo]</span><span style="color: silver; ">.</span><span style="color: maroon; ">xsd_log_business_application_02</span>&nbsp;<span style="color: blue; ">as</span>&nbsp;<span style="color: red; ">N'&#60;?xml&nbsp;version=&quot;1.0&quot;&nbsp;encoding=&quot;utf-16&quot;?>
<br/>&#60;xs:schema&nbsp;id=&quot;ssis&quot;&nbsp;xmlns=&quot;&quot;&nbsp;xmlns:xs=&quot;http://www.w3.org/2001/XMLSchema&quot;&nbsp;xmlns:msdata=&quot;urn:schemas-microsoft-com:[xml]-msdata&quot;>
<br/>&nbsp;&nbsp;&#60;xs:element&nbsp;name=&quot;ssis&quot;&nbsp;msdata:IsDataSet=&quot;true&quot;&nbsp;msdata:UseCurrentLocale=&quot;true&quot;>
<br/>&nbsp;&nbsp;&nbsp;&nbsp;&#60;xs:complexType>
<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#60;xs:choice&nbsp;minOccurs=&quot;1&quot;&nbsp;maxOccurs=&quot;unbounded&quot;>
<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#60;xs:element&nbsp;name=&quot;application&quot;>
<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#60;xs:complexType>
<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#60;xs:sequence>
<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#60;xs:element&nbsp;name=&quot;notes_tree&quot;&nbsp;minOccurs=&quot;1&quot;&nbsp;maxOccurs=&quot;unbounded&quot;>
<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#60;xs:complexType>
<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#60;xs:sequence>
<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#60;xs:element&nbsp;name=&quot;note&quot;&nbsp;nillable=&quot;true&quot;&nbsp;minOccurs=&quot;1&quot;&nbsp;maxOccurs=&quot;unbounded&quot;>
<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#60;xs:complexType>
<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#60;xs:simpleContent&nbsp;msdata:ColumnName=&quot;note_text&quot;&nbsp;msdata:Ordinal=&quot;0&quot;>
<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#60;xs:extension&nbsp;base=&quot;xs:string&quot;>
<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#60;/xs:extension>
<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#60;/xs:simpleContent>
<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#60;/xs:complexType>
<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#60;/xs:element>
<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#60;/xs:sequence>
<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#60;/xs:complexType>
<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#60;/xs:element>
<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#60;xs:element&nbsp;name=&quot;Data&quot;&nbsp;minOccurs=&quot;0&quot;&nbsp;maxOccurs=&quot;unbounded&quot;>
<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#60;xs:complexType>
<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#60;xs:sequence>
<br/>					&#60;xs:any&nbsp;minOccurs=&quot;0&quot;&nbsp;maxOccurs=&quot;unbounded&quot;&nbsp;processContents=&quot;lax&quot;/>
<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#60;/xs:sequence>
<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#60;/xs:complexType>
<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#60;/xs:element>
<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#60;/xs:sequence>
<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#60;/xs:complexType>
<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#60;/xs:element>
<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#60;/xs:choice>
<br/>&nbsp;&nbsp;&nbsp;&nbsp;&#60;/xs:complexType>
<br/>&nbsp;&nbsp;&#60;/xs:element>
<br/>&#60;/xs:schema>'</span><span style="color: silver; ">;</span>
<br/><span style="color: maroon; ">go</span>
<br/><span style="color: green; font-style: italic; ">&#45;&#45;&nbsp;end&nbsp;code&nbsp;block</span>
<br/><span style="color: green; font-style: italic; ">&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;</span>
<br/><span style="color: green; font-style: italic; ">&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;</span>
<br/><span style="color: green; font-style: italic; ">&#45;&#45;&nbsp;&nbsp;CREATE&nbsp;A&nbsp;PROCEDURE&nbsp;TO&nbsp;BUILD&nbsp;A&nbsp;TYPED&nbsp;LOG&nbsp;ENTRY</span>
<br/><span style="color: green; font-style: italic; ">&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;</span>
<br/><span style="color: green; font-style: italic; ">&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;</span>
<br/><span style="color: green; font-style: italic; ">&#45;&#45;&nbsp;begin&nbsp;code&nbsp;block</span>
<br/><span style="color: blue; ">if</span>&nbsp;<span style="color: fuchsia; font-style: italic; ">object_id</span><span style="color: maroon; ">(</span><span style="color: red; ">'[xquery_demo].[set.log]'</span><span style="color: silver; ">,</span>&nbsp;<span style="color: red; ">N'P'</span><span style="color: maroon; ">)</span>&nbsp;<span style="color: blue; ">is</span>&nbsp;<span style="color: blue; ">not</span>&nbsp;<span style="color: blue; ">null</span>
<br/>&nbsp;&nbsp;<span style="color: blue; ">drop</span>&nbsp;<span style="color: blue; ">procedure</span>&nbsp;<span style="color: maroon; ">[xquery_demo]</span><span style="color: silver; ">.</span><span style="color: maroon; ">[set.log]</span><span style="color: silver; ">;</span>
<br/><span style="color: maroon; ">go</span>
<br/><span style="color: blue; ">create</span>&nbsp;<span style="color: blue; ">procedure</span>&nbsp;<span style="color: maroon; ">[xquery_demo]</span><span style="color: silver; ">.</span><span style="color: #FF0080; font-weight: bold; ">[set.log]</span>
<br/>&nbsp;&nbsp;<span style="color: #8000FF; ">@entry</span>&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: black; font-style: italic; ">xml</span>&nbsp;<span style="color: maroon; ">(</span><span style="color: maroon; ">[xquery_demo]</span><span style="color: silver; ">.</span><span style="color: maroon; ">[xsd_log]</span><span style="color: maroon; ">)</span>
<br/>&nbsp;&nbsp;<span style="color: silver; ">,</span>&nbsp;<span style="color: #8000FF; ">@output</span>&nbsp;<span style="color: black; font-style: italic; ">[xml]</span>&nbsp;<span style="color: maroon; ">output</span>
<br/><span style="color: blue; ">as</span>
<br/>&nbsp;&nbsp;<span style="color: blue; ">begin</span>
<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: blue; ">declare</span>&nbsp;<span style="color: #8000FF; ">@ssis_log_entry</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: black; font-style: italic; ">xml</span>&nbsp;<span style="color: maroon; ">(</span><span style="color: maroon; ">[xquery_demo]</span><span style="color: silver; ">.</span><span style="color: maroon; ">xsd_log_business_application_02</span><span style="color: maroon; ">)</span>
<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: silver; ">,</span>&nbsp;<span style="color: green; font-style: italic; ">&#45;&#45;&nbsp;Variable&nbsp;is&nbsp;TYPED&nbsp;so&nbsp;it&nbsp;will&nbsp;only&nbsp;accept&nbsp;valid&nbsp;data</span>
<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #8000FF; ">@application_01_entry</span>&nbsp;<span style="color: black; font-style: italic; ">xml</span>&nbsp;<span style="color: maroon; ">(</span><span style="color: maroon; ">[xquery_demo]</span><span style="color: silver; ">.</span><span style="color: maroon; ">[xsd_log_business_application_01]</span><span style="color: maroon; ">)</span>
<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: silver; ">,</span>&nbsp;<span style="color: green; font-style: italic; ">&#45;&#45;&nbsp;Variable&nbsp;is&nbsp;TYPED&nbsp;so&nbsp;it&nbsp;will&nbsp;only&nbsp;accept&nbsp;valid&nbsp;data</span>
<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #8000FF; ">@xerror</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: black; font-style: italic; ">[xml]</span>&nbsp;<span style="color: silver; ">=</span>&nbsp;<span style="color: red; ">N'&#60;error>&#60;Message&nbsp;/>&#60;ValidDataTypes&nbsp;/>&#60;/error>'</span>
<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: silver; ">,</span>&nbsp;<span style="color: #8000FF; ">@typed_log</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: black; font-style: italic; ">xml</span>&nbsp;<span style="color: maroon; ">(</span><span style="color: maroon; ">[xquery_demo]</span><span style="color: silver; ">.</span><span style="color: maroon; ">[xsd_log]</span><span style="color: maroon; ">)</span>
<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: silver; ">,</span>&nbsp;<span style="color: #8000FF; ">@builderx</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: black; font-style: italic; ">[xml]</span>
<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: silver; ">,</span>&nbsp;<span style="color: #8000FF; ">@typed_logbuilder</span>&nbsp;&nbsp;&nbsp;<span style="color: black; font-style: italic; ">[xml]</span>&nbsp;<span style="color: silver; ">=</span>&nbsp;<span style="color: red; ">N'&#60;log&nbsp;/>'</span>
<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: silver; ">,</span>&nbsp;<span style="color: #8000FF; ">@log_entry</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: black; font-style: italic; ">[xml]</span>
<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: silver; ">,</span>&nbsp;<span style="color: #8000FF; ">@local_name</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: black; font-style: italic; ">[sysname]</span>
<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: silver; ">,</span>&nbsp;<span style="color: #8000FF; ">@timestamp</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: black; font-style: italic; ">datetime</span>&nbsp;<span style="color: silver; ">=</span>&nbsp;<span style="color: blue; ">current_timestamp</span>
<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: silver; ">,</span>&nbsp;<span style="color: #8000FF; ">@identity</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: black; font-style: italic; ">[int]</span>
<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: silver; ">,</span>&nbsp;<span style="color: #8000FF; ">@message</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: black; font-style: italic; ">nvarchar</span>&nbsp;<span style="color: maroon; ">(</span><span style="color: black; ">1000</span><span style="color: maroon; ">)</span><span style="color: silver; ">=</span><span style="color: red; ">N''</span>
<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: silver; ">,</span>&nbsp;<span style="color: #8000FF; ">@error_message</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: black; font-style: italic; ">nvarchar</span>&nbsp;<span style="color: maroon; ">(</span><span style="color: black; ">1000</span><span style="color: maroon; ">)</span><span style="color: silver; ">=</span><span style="color: red; ">N''</span>
<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: silver; ">,</span>&nbsp;<span style="color: #8000FF; ">@allowed_types</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: black; font-style: italic; ">[xml]</span>&nbsp;<span style="color: silver; ">=</span>&nbsp;<span style="color: red; ">N'&#60;allowed_elements>&#60;element&nbsp;local_name=&quot;ssis&quot;&nbsp;/>&#60;element&nbsp;local_name=&quot;business_application_01&quot;&nbsp;/>&#60;/allowed_elements>'</span><span style="color: silver; ">;</span>
<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: blue; ">set</span>&nbsp;<span style="color: #8000FF; ">@log_entry</span>&nbsp;<span style="color: silver; ">=</span>&nbsp;<span style="color: #8000FF; ">@entry</span><span style="color: silver; ">;</span>
<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: blue; ">set</span>&nbsp;<span style="color: #8000FF; ">@local_name</span>&nbsp;<span style="color: silver; ">=</span>&nbsp;<span style="color: fuchsia; font-style: italic; ">coalesce</span><span style="color: maroon; ">(</span><span style="color: #8000FF; ">@entry</span><span style="color: silver; ">.</span><span style="color: #FF0080; font-weight: bold; ">value</span><span style="color: maroon; ">(</span><span style="color: red; ">'local-name((/*/*)[1])'</span><span style="color: silver; ">,</span>&nbsp;<span style="color: red; ">'[sysname]'</span><span style="color: maroon; ">)</span><span style="color: silver; ">,</span>&nbsp;<span style="color: red; ">N'NULL'</span><span style="color: maroon; ">)</span><span style="color: silver; ">;</span>
<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: blue; ">begin</span>&nbsp;<span style="color: maroon; ">try</span>
<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: blue; ">if</span>&nbsp;<span style="color: #8000FF; ">@local_name</span>&nbsp;<span style="color: silver; ">=</span>&nbsp;<span style="color: red; ">N'ssis'</span>
<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: blue; ">begin</span>
<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: green; font-style: italic; ">&#45;&#45;&nbsp;Validate&nbsp;Data&nbsp;is&nbsp;correctly&nbsp;TYPED.&nbsp;Since&nbsp;the&nbsp;variable&nbsp;is&nbsp;typed,&nbsp;an&nbsp;invalid&nbsp;[xml]&nbsp;structure&nbsp;will&nbsp;result&nbsp;in&nbsp;an&nbsp;error.</span>
<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: blue; ">set</span>&nbsp;<span style="color: #8000FF; ">@ssis_log_entry</span>&nbsp;<span style="color: silver; ">=</span>&nbsp;<span style="color: maroon; ">(</span><span style="color: blue; ">select</span>&nbsp;<span style="color: maroon; ">t</span><span style="color: silver; ">.</span><span style="color: maroon; ">c</span><span style="color: silver; ">.</span><span style="color: #FF0080; font-weight: bold; ">query</span><span style="color: maroon; ">(</span><span style="color: red; ">'.'</span><span style="color: maroon; ">)</span>&nbsp;<span style="color: blue; ">as</span>&nbsp;<span style="color: maroon; ">result</span>
<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: blue; ">from</span>&nbsp;&nbsp;&nbsp;<span style="color: #8000FF; ">@entry</span><span style="color: silver; ">.</span><span style="color: #FF0080; font-weight: bold; ">nodes</span><span style="color: maroon; ">(</span><span style="color: red; ">'/log/*'</span><span style="color: maroon; ">)</span>&nbsp;<span style="color: maroon; ">t</span><span style="color: maroon; ">(</span><span style="color: maroon; ">c</span><span style="color: maroon; ">)</span><span style="color: maroon; ">)</span><span style="color: silver; ">;</span>
<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: blue; ">insert</span>&nbsp;<span style="color: blue; ">into</span>&nbsp;<span style="color: maroon; ">[xquery_demo]</span><span style="color: silver; ">.</span><span style="color: maroon; ">[log]</span>
<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: maroon; ">(</span><span style="color: maroon; ">[entry]</span><span style="color: maroon; ">)</span>
<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: blue; ">values</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: maroon; ">(</span><span style="color: #8000FF; ">@entry</span><span style="color: maroon; ">)</span><span style="color: silver; ">;</span>
<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: blue; ">set</span>&nbsp;<span style="color: #8000FF; ">@output</span>&nbsp;<span style="color: silver; ">=</span>&nbsp;<span style="color: red; ">N'&#60;output&nbsp;id=&quot;'</span>
<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: silver; ">+</span>&nbsp;<span style="color: fuchsia; font-style: italic; ">cast</span><span style="color: maroon; ">(</span><span style="color: fuchsia; font-style: italic; ">@@identity</span>&nbsp;<span style="color: blue; ">as</span>&nbsp;<span style="color: black; font-style: italic; ">[sysname]</span><span style="color: maroon; ">)</span>
<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: silver; ">+</span>&nbsp;<span style="color: red; ">'&quot;&nbsp;application=&quot;'</span>&nbsp;<span style="color: silver; ">+</span>&nbsp;<span style="color: #8000FF; ">@local_name</span>&nbsp;<span style="color: silver; ">+</span>&nbsp;<span style="color: red; ">'&quot;>&#60;result>'</span>
<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: silver; ">+</span>&nbsp;<span style="color: #8000FF; ">@local_name</span>
<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: silver; ">+</span>&nbsp;<span style="color: red; ">'&nbsp;log&nbsp;entry&nbsp;inserted&#60;/result>&#60;/output>'</span><span style="color: silver; ">;</span>
<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: blue; ">set</span>&nbsp;<span style="color: #8000FF; ">@output</span><span style="color: silver; ">.</span><span style="color: #FF0080; font-weight: bold; ">modify</span><span style="color: maroon; ">(</span><span style="color: red; ">'insert&nbsp;sql:variable(&quot;@log_entry&quot;)&nbsp;as&nbsp;last&nbsp;into&nbsp;(/output)[1]'</span><span style="color: maroon; ">)</span><span style="color: silver; ">;</span>
<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: blue; ">end</span>
<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: blue; ">else</span>&nbsp;<span style="color: blue; ">if</span>&nbsp;<span style="color: #8000FF; ">@local_name</span>&nbsp;<span style="color: silver; ">=</span>&nbsp;<span style="color: red; ">N'business_application_01'</span>
<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: blue; ">begin</span>
<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: green; font-style: italic; ">&#45;&#45;&nbsp;Validate&nbsp;Data&nbsp;is&nbsp;correctly&nbsp;TYPED.&nbsp;Since&nbsp;the&nbsp;variable&nbsp;is&nbsp;typed,&nbsp;an&nbsp;invalid&nbsp;[xml]&nbsp;structure&nbsp;will&nbsp;result&nbsp;in&nbsp;an&nbsp;error.</span>
<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: blue; ">set</span>&nbsp;<span style="color: #8000FF; ">@application_01_entry</span>&nbsp;<span style="color: silver; ">=</span>&nbsp;<span style="color: maroon; ">(</span><span style="color: blue; ">select</span>&nbsp;<span style="color: maroon; ">t</span><span style="color: silver; ">.</span><span style="color: maroon; ">c</span><span style="color: silver; ">.</span><span style="color: #FF0080; font-weight: bold; ">query</span><span style="color: maroon; ">(</span><span style="color: red; ">'.'</span><span style="color: maroon; ">)</span>&nbsp;<span style="color: blue; ">as</span>&nbsp;<span style="color: maroon; ">result</span>
<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: blue; ">from</span>&nbsp;&nbsp;&nbsp;<span style="color: #8000FF; ">@entry</span><span style="color: silver; ">.</span><span style="color: #FF0080; font-weight: bold; ">nodes</span><span style="color: maroon; ">(</span><span style="color: red; ">'/log/*'</span><span style="color: maroon; ">)</span>&nbsp;<span style="color: maroon; ">t</span><span style="color: maroon; ">(</span><span style="color: maroon; ">c</span><span style="color: maroon; ">)</span><span style="color: maroon; ">)</span><span style="color: silver; ">;</span>
<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: blue; ">insert</span>&nbsp;<span style="color: blue; ">into</span>&nbsp;<span style="color: maroon; ">[xquery_demo]</span><span style="color: silver; ">.</span><span style="color: maroon; ">[log]</span>
<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: maroon; ">(</span><span style="color: maroon; ">[entry]</span><span style="color: maroon; ">)</span>
<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: blue; ">values</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: maroon; ">(</span><span style="color: #8000FF; ">@entry</span><span style="color: maroon; ">)</span><span style="color: silver; ">;</span>
<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: blue; ">set</span>&nbsp;<span style="color: #8000FF; ">@output</span>&nbsp;<span style="color: silver; ">=</span>&nbsp;<span style="color: red; ">N'&#60;output&nbsp;id=&quot;'</span>
<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: silver; ">+</span>&nbsp;<span style="color: fuchsia; font-style: italic; ">cast</span><span style="color: maroon; ">(</span><span style="color: fuchsia; font-style: italic; ">@@identity</span>&nbsp;<span style="color: blue; ">as</span>&nbsp;<span style="color: black; font-style: italic; ">[sysname]</span><span style="color: maroon; ">)</span>
<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: silver; ">+</span>&nbsp;<span style="color: red; ">'&quot;&nbsp;application=&quot;'</span>&nbsp;<span style="color: silver; ">+</span>&nbsp;<span style="color: #8000FF; ">@local_name</span>&nbsp;<span style="color: silver; ">+</span>&nbsp;<span style="color: red; ">'&quot;>&#60;result>'</span>
<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: silver; ">+</span>&nbsp;<span style="color: #8000FF; ">@local_name</span>
<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: silver; ">+</span>&nbsp;<span style="color: red; ">'&nbsp;log&nbsp;entry&nbsp;inserted&#60;/result>&#60;/output>'</span><span style="color: silver; ">;</span>
<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: blue; ">set</span>&nbsp;<span style="color: #8000FF; ">@output</span><span style="color: silver; ">.</span><span style="color: #FF0080; font-weight: bold; ">modify</span><span style="color: maroon; ">(</span><span style="color: red; ">'insert&nbsp;sql:variable(&quot;@log_entry&quot;)&nbsp;as&nbsp;last&nbsp;into&nbsp;(/output)[1]'</span><span style="color: maroon; ">)</span><span style="color: silver; ">;</span>
<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: blue; ">end</span>
<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: blue; ">else</span>
<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: blue; ">begin</span>
<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: blue; ">set</span>&nbsp;<span style="color: #8000FF; ">@error_message</span>&nbsp;<span style="color: silver; ">=</span>&nbsp;<span style="color: red; ">N'&#60;output>&#60;result>Local&nbsp;name&nbsp;not&nbsp;found&nbsp;in&nbsp;allowed&nbsp;types&nbsp;for&nbsp;log&nbsp;entry&#60;/result>&#60;/output>'</span><span style="color: silver; ">;</span>
<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: blue; ">raiserror</span>&nbsp;<span style="color: maroon; ">(</span><span style="color: #8000FF; ">@error_message</span><span style="color: silver; ">,</span><span style="color: black; ">16</span><span style="color: silver; ">,</span><span style="color: black; ">1</span><span style="color: maroon; ">)</span><span style="color: silver; ">;</span>
<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: blue; ">end</span>
<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: blue; ">end</span>&nbsp;<span style="color: maroon; ">try</span>
<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: blue; ">begin</span>&nbsp;<span style="color: maroon; ">catch</span>
<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: blue; ">set</span>&nbsp;<span style="color: #8000FF; ">@output</span>&nbsp;<span style="color: silver; ">=</span>&nbsp;<span style="color: red; ">N'&#60;output&nbsp;local_name=&quot;'</span>&nbsp;<span style="color: silver; ">+</span>&nbsp;<span style="color: #8000FF; ">@local_name</span>
<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: silver; ">+</span>&nbsp;<span style="color: red; ">'&quot;&nbsp;>
<br/>							&#60;result>Failed&nbsp;to&nbsp;process&nbsp;log&nbsp;entry.&#60;/result>
<br/>							&#60;error>
<br/>								&#60;ERROR_MESSAGE>'</span>
<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: silver; ">+</span>&nbsp;<span style="color: fuchsia; font-style: italic; ">replace</span><span style="color: maroon; ">(</span><span style="color: #FF0080; font-weight: bold; ">error_message</span><span style="color: maroon; ">(</span><span style="color: maroon; ">)</span><span style="color: silver; ">,</span>&nbsp;<span style="color: red; ">''''</span><span style="color: silver; ">,</span>&nbsp;<span style="color: red; ">''''''</span><span style="color: maroon; ">)</span>
<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: silver; ">+</span>&nbsp;<span style="color: red; ">'&#60;/ERROR_MESSAGE>
<br/>								&#60;ERROR_PROCEDURE>'</span>
<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: silver; ">+</span>&nbsp;<span style="color: #FF0080; font-weight: bold; ">error_procedure</span><span style="color: maroon; ">(</span><span style="color: maroon; ">)</span>&nbsp;<span style="color: silver; ">+</span>&nbsp;<span style="color: red; ">'&#60;/ERROR_PROCEDURE>
<br/>								&#60;ERROR_LINE>'</span>
<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: silver; ">+</span>&nbsp;<span style="color: fuchsia; font-style: italic; ">cast</span><span style="color: maroon; ">(</span><span style="color: #FF0080; font-weight: bold; ">error_line</span><span style="color: maroon; ">(</span><span style="color: maroon; ">)</span><span style="color: blue; ">as</span>&nbsp;<span style="color: black; font-style: italic; ">[sysname]</span><span style="color: maroon; ">)</span>
<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: silver; ">+</span>&nbsp;<span style="color: red; ">'&#60;/ERROR_LINE>
<br/>								&#60;ERROR_NUMBER>'</span>
<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: silver; ">+</span>&nbsp;<span style="color: fuchsia; font-style: italic; ">cast</span><span style="color: maroon; ">(</span><span style="color: #FF0080; font-weight: bold; ">error_number</span><span style="color: maroon; ">(</span><span style="color: maroon; ">)</span><span style="color: blue; ">as</span>&nbsp;<span style="color: black; font-style: italic; ">[sysname]</span><span style="color: maroon; ">)</span>
<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: silver; ">+</span>&nbsp;<span style="color: red; ">'&#60;/ERROR_NUMBER>
<br/>							&#60;/error>
<br/>						&#60;entry/>
<br/>						&nbsp;&#60;/output>'</span><span style="color: silver; ">;</span>
<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: blue; ">set</span>&nbsp;<span style="color: #8000FF; ">@output</span><span style="color: silver; ">.</span><span style="color: #FF0080; font-weight: bold; ">modify</span><span style="color: maroon; ">(</span><span style="color: red; ">'insert&nbsp;sql:variable(&quot;@allowed_types&quot;)&nbsp;as&nbsp;first&nbsp;into&nbsp;(/output)[1]'</span><span style="color: maroon; ">)</span><span style="color: silver; ">;</span>
<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: blue; ">set</span>&nbsp;<span style="color: #8000FF; ">@output</span><span style="color: silver; ">.</span><span style="color: #FF0080; font-weight: bold; ">modify</span><span style="color: maroon; ">(</span><span style="color: red; ">'insert&nbsp;sql:variable(&quot;@log_entry&quot;)&nbsp;as&nbsp;last&nbsp;into&nbsp;(/output/entry)[1]'</span><span style="color: maroon; ">)</span><span style="color: silver; ">;</span>
<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: blue; ">end</span>&nbsp;<span style="color: maroon; ">catch</span>
<br/>&nbsp;&nbsp;<span style="color: blue; ">end</span>
<br/><span style="color: maroon; ">go</span>
<br/><span style="color: green; font-style: italic; ">&#45;&#45;&nbsp;end&nbsp;code&nbsp;block</span>
<br/><span style="color: green; font-style: italic; ">&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;</span>
<br/><span style="color: green; font-style: italic; ">&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;</span>
<br/><span style="color: green; font-style: italic; ">&#45;&#45;&nbsp;&nbsp;ONLY&nbsp;ENTRIES&nbsp;TYPED&nbsp;WITH&nbsp;ONE&nbsp;OF&nbsp;THE&nbsp;TWO&nbsp;XSD&nbsp;ARE&nbsp;ALLOWED</span>
<br/><span style="color: green; font-style: italic; ">&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;</span>
<br/><span style="color: green; font-style: italic; ">&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;</span>
<br/><span style="color: green; font-style: italic; ">&#45;&#45;&nbsp;begin&nbsp;code&nbsp;block</span>
<br/><span style="color: green; font-style: italic; ">&#45;&#45;</span>
<br/><span style="color: green; font-style: italic; ">&#45;&#45;&nbsp;This&nbsp;entry&nbsp;will&nbsp;be&nbsp;allowed&nbsp;as&nbsp;it&nbsp;conforms&nbsp;to&nbsp;[xquery_demo].xsd_log_business_application_02</span>
<br/><span style="color: blue; ">declare</span>&nbsp;<span style="color: #8000FF; ">@entry</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: maroon; ">[xml]</span>&nbsp;<span style="color: maroon; ">(</span><span style="color: maroon; ">[xquery_demo]</span><span style="color: silver; ">.</span><span style="color: maroon; ">[xsd_log]</span><span style="color: maroon; ">)</span>
<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: silver; ">,</span>&nbsp;<span style="color: #8000FF; ">@x</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: maroon; ">[xml]</span>&nbsp;<span style="color: maroon; ">(</span><span style="color: maroon; ">[xquery_demo]</span><span style="color: silver; ">.</span><span style="color: maroon; ">[xsd_log]</span><span style="color: maroon; ">)</span>
<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: silver; ">,</span>&nbsp;<span style="color: #8000FF; ">@log_ssis</span>&nbsp;&nbsp;&nbsp;<span style="color: maroon; ">[xml]</span>&nbsp;<span style="color: maroon; ">(</span><span style="color: maroon; ">[xquery_demo]</span><span style="color: silver; ">.</span><span style="color: maroon; ">xsd_log_business_application_02</span><span style="color: maroon; ">)</span>
<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: silver; ">,</span>&nbsp;<span style="color: #8000FF; ">@log_entry</span>&nbsp;&nbsp;<span style="color: maroon; ">[xml]</span>
<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: silver; ">,</span>&nbsp;<span style="color: #8000FF; ">@log_insert</span>&nbsp;<span style="color: maroon; ">[xml]</span>
<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: silver; ">,</span>&nbsp;<span style="color: #8000FF; ">@output</span>&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: maroon; ">[xml]</span><span style="color: silver; ">;</span>
<br/><span style="color: blue; ">set</span>&nbsp;<span style="color: #8000FF; ">@entry</span>&nbsp;<span style="color: silver; ">=</span>&nbsp;<span style="color: red; ">N'&#60;log&nbsp;timestamp=&quot;'</span>
<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: silver; ">+</span>&nbsp;<span style="color: fuchsia; font-style: italic; ">cast</span><span style="color: maroon; ">(</span><span style="color: blue; ">current_timestamp</span>&nbsp;<span style="color: blue; ">as</span>&nbsp;<span style="color: black; font-style: italic; ">[sysname]</span><span style="color: maroon; ">)</span>
<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: silver; ">+</span>&nbsp;<span style="color: red; ">'&quot;&nbsp;/>'</span><span style="color: silver; ">;</span>
<br/><span style="color: blue; ">set</span>&nbsp;<span style="color: #8000FF; ">@log_ssis</span>&nbsp;<span style="color: silver; ">=</span>&nbsp;<span style="color: red; ">N'&#60;ssis>
<br/>	&#60;application>
<br/>		&#60;notes_tree>
<br/>			&#60;note>note&nbsp;text&#60;/note>
<br/>			&#60;note>note&nbsp;text&#60;/note>
<br/>		&#60;/notes_tree>
<br/>	&#60;/application>&#60;/ssis>'</span><span style="color: silver; ">;</span>
<br/><span style="color: blue; ">set</span>&nbsp;<span style="color: #8000FF; ">@log_insert</span>&nbsp;<span style="color: silver; ">=</span>&nbsp;<span style="color: #8000FF; ">@log_ssis</span><span style="color: silver; ">;</span>
<br/><span style="color: blue; ">set</span>&nbsp;<span style="color: #8000FF; ">@log_entry</span>&nbsp;<span style="color: silver; ">=</span>&nbsp;<span style="color: #8000FF; ">@entry</span><span style="color: silver; ">;</span>
<br/><span style="color: blue; ">set</span>&nbsp;<span style="color: #8000FF; ">@log_entry</span><span style="color: silver; ">.</span><span style="color: #FF0080; font-weight: bold; ">modify</span><span style="color: maroon; ">(</span><span style="color: red; ">'insert&nbsp;sql:variable(&quot;@log_insert&quot;)&nbsp;into&nbsp;(/log)[1]'</span><span style="color: maroon; ">)</span><span style="color: silver; ">;</span>
<br/><span style="color: blue; ">execute</span>&nbsp;<span style="color: maroon; ">[xquery_demo]</span><span style="color: silver; ">.</span><span style="color: #FF0080; font-weight: bold; ">[set.log]</span>
<br/>&nbsp;&nbsp;<span style="color: #8000FF; ">@entry</span>&nbsp;&nbsp;&nbsp;<span style="color: silver; ">=</span><span style="color: #8000FF; ">@log_entry</span>
<br/>&nbsp;&nbsp;<span style="color: silver; ">,</span>&nbsp;<span style="color: #8000FF; ">@output</span><span style="color: silver; ">=</span><span style="color: #8000FF; ">@output</span>&nbsp;<span style="color: maroon; ">output</span>
<br/><span style="color: blue; ">select</span>&nbsp;<span style="color: maroon; ">[entry]</span>
<br/><span style="color: blue; ">from</span>&nbsp;&nbsp;&nbsp;<span style="color: maroon; ">[xquery_demo]</span><span style="color: silver; ">.</span><span style="color: maroon; ">[log]</span>
<br/><span style="color: blue; ">where</span>&nbsp;&nbsp;<span style="color: maroon; ">[id]</span>&nbsp;<span style="color: silver; ">=</span>&nbsp;<span style="color: #8000FF; ">@output</span><span style="color: silver; ">.</span><span style="color: #FF0080; font-weight: bold; ">value</span><span style="color: maroon; ">(</span><span style="color: red; ">'(/output/@id)[1]'</span><span style="color: silver; ">,</span>&nbsp;<span style="color: red; ">'[int]'</span><span style="color: maroon; ">)</span><span style="color: silver; ">;</span>
<br/><span style="color: maroon; ">go</span>
<br/><span style="color: green; font-style: italic; ">&#45;&#45;&nbsp;end&nbsp;code&nbsp;block</span>
<br/><span style="color: green; font-style: italic; ">&#45;&#45;&nbsp;begin&nbsp;code&nbsp;block</span>
<br/><span style="color: green; font-style: italic; ">&#45;&#45;</span>
<br/><span style="color: green; font-style: italic; ">&#45;&#45;&nbsp;This&nbsp;entry&nbsp;will&nbsp;be&nbsp;allowed&nbsp;as&nbsp;it&nbsp;conforms&nbsp;to&nbsp;[xquery_demo].[xsd_log_business_application_01]</span>
<br/><span style="color: blue; ">declare</span>&nbsp;<span style="color: #8000FF; ">@entry</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: maroon; ">[xml]</span>&nbsp;<span style="color: maroon; ">(</span><span style="color: maroon; ">[xquery_demo]</span><span style="color: silver; ">.</span><span style="color: maroon; ">[xsd_log]</span><span style="color: maroon; ">)</span>
<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: silver; ">,</span>&nbsp;<span style="color: #8000FF; ">@x</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: maroon; ">[xml]</span>&nbsp;<span style="color: maroon; ">(</span><span style="color: maroon; ">[xquery_demo]</span><span style="color: silver; ">.</span><span style="color: maroon; ">[xsd_log]</span><span style="color: maroon; ">)</span>
<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: silver; ">,</span>&nbsp;<span style="color: #8000FF; ">@log_business_application_01</span>&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: maroon; ">[xml]</span>&nbsp;<span style="color: maroon; ">(</span><span style="color: maroon; ">[xquery_demo]</span><span style="color: silver; ">.</span><span style="color: maroon; ">[xsd_log_business_application_01]</span><span style="color: maroon; ">)</span>
<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: silver; ">,</span>&nbsp;<span style="color: #8000FF; ">@log_entry</span>&nbsp;&nbsp;<span style="color: maroon; ">[xml]</span>
<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: silver; ">,</span>&nbsp;<span style="color: #8000FF; ">@log_insert</span>&nbsp;<span style="color: maroon; ">[xml]</span>
<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: silver; ">,</span>&nbsp;<span style="color: #8000FF; ">@output</span>&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: maroon; ">[xml]</span><span style="color: silver; ">;</span>
<br/><span style="color: blue; ">set</span>&nbsp;<span style="color: #8000FF; ">@entry</span>&nbsp;<span style="color: silver; ">=</span>&nbsp;<span style="color: red; ">N'&#60;log&nbsp;timestamp=&quot;'</span>
<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: silver; ">+</span>&nbsp;<span style="color: fuchsia; font-style: italic; ">cast</span><span style="color: maroon; ">(</span><span style="color: blue; ">current_timestamp</span>&nbsp;<span style="color: blue; ">as</span>&nbsp;<span style="color: black; font-style: italic; ">[sysname]</span><span style="color: maroon; ">)</span>
<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: silver; ">+</span>&nbsp;<span style="color: red; ">'&quot;&nbsp;/>'</span><span style="color: silver; ">;</span>
<br/><span style="color: blue; ">set</span>&nbsp;<span style="color: #8000FF; ">@log_business_application_01</span>&nbsp;<span style="color: silver; ">=</span>&nbsp;<span style="color: red; ">N'&#60;business_application_01>
<br/>		&#60;table&nbsp;&nbsp;group=&quot;ACS_PAYMENT&quot;&nbsp;application=&quot;FINANCE&quot;&nbsp;table=&quot;D_ACS_PAYMENT&quot;&nbsp;>
<br/>			&#60;job&nbsp;job_name=&quot;FTR_ND_ACS_PAYMENT&quot;&nbsp;author=&quot;klightsey&quot;&nbsp;>
<br/>				&#60;notes_tree>
<br/>					&#60;note>CMD_ND_ACS_PAYMENT_LASERUTIL&nbsp;notes&nbsp;on&nbsp;another&nbsp;job&#60;/note>
<br/>				&#60;/notes_tree>
<br/>			&#60;/job>
<br/>		&#60;/table>
<br/>	&#60;/business_application_01>'</span><span style="color: silver; ">;</span>
<br/><span style="color: blue; ">set</span>&nbsp;<span style="color: #8000FF; ">@log_insert</span>&nbsp;<span style="color: silver; ">=</span>&nbsp;<span style="color: #8000FF; ">@log_business_application_01</span><span style="color: silver; ">;</span>
<br/><span style="color: blue; ">set</span>&nbsp;<span style="color: #8000FF; ">@log_entry</span>&nbsp;<span style="color: silver; ">=</span>&nbsp;<span style="color: #8000FF; ">@entry</span><span style="color: silver; ">;</span>
<br/><span style="color: blue; ">set</span>&nbsp;<span style="color: #8000FF; ">@log_entry</span><span style="color: silver; ">.</span><span style="color: #FF0080; font-weight: bold; ">modify</span><span style="color: maroon; ">(</span><span style="color: red; ">'insert&nbsp;sql:variable(&quot;@log_insert&quot;)&nbsp;into&nbsp;(/log)[1]'</span><span style="color: maroon; ">)</span><span style="color: silver; ">;</span>
<br/><span style="color: blue; ">execute</span>&nbsp;<span style="color: maroon; ">[xquery_demo]</span><span style="color: silver; ">.</span><span style="color: #FF0080; font-weight: bold; ">[set.log]</span>
<br/>&nbsp;&nbsp;<span style="color: #8000FF; ">@entry</span>&nbsp;&nbsp;&nbsp;<span style="color: silver; ">=</span><span style="color: #8000FF; ">@log_entry</span>
<br/>&nbsp;&nbsp;<span style="color: silver; ">,</span>&nbsp;<span style="color: #8000FF; ">@output</span><span style="color: silver; ">=</span><span style="color: #8000FF; ">@output</span>&nbsp;<span style="color: maroon; ">output</span>
<br/><span style="color: blue; ">select</span>&nbsp;<span style="color: maroon; ">[entry]</span>
<br/><span style="color: blue; ">from</span>&nbsp;&nbsp;&nbsp;<span style="color: maroon; ">[xquery_demo]</span><span style="color: silver; ">.</span><span style="color: maroon; ">[log]</span>
<br/><span style="color: blue; ">where</span>&nbsp;&nbsp;<span style="color: maroon; ">[id]</span>&nbsp;<span style="color: silver; ">=</span>&nbsp;<span style="color: #8000FF; ">@output</span><span style="color: silver; ">.</span><span style="color: #FF0080; font-weight: bold; ">value</span><span style="color: maroon; ">(</span><span style="color: red; ">'(/output/@id)[1]'</span><span style="color: silver; ">,</span>&nbsp;<span style="color: red; ">'[int]'</span><span style="color: maroon; ">)</span><span style="color: silver; ">;</span>
<br/><span style="color: maroon; ">go</span>
<br/><span style="color: green; font-style: italic; ">&#45;&#45;&nbsp;end&nbsp;code&nbsp;block</span>
<br/><span style="color: green; font-style: italic; ">&#45;&#45;&nbsp;begin&nbsp;code&nbsp;block</span>
<br/><span style="color: green; font-style: italic; ">&#45;&#45;</span>
<br/><span style="color: green; font-style: italic; ">&#45;&#45;&nbsp;This&nbsp;entry&nbsp;will&nbsp;be&nbsp;allowed&nbsp;as&nbsp;it&nbsp;conforms&nbsp;to&nbsp;[xquery_demo].xsd_log_business_application_02&nbsp;even&nbsp;with&nbsp;the&nbsp;added&nbsp;ad&nbsp;hoc&nbsp;elements</span>
<br/><span style="color: blue; ">declare</span>&nbsp;<span style="color: #8000FF; ">@entry</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: maroon; ">[xml]</span>&nbsp;<span style="color: maroon; ">(</span><span style="color: maroon; ">[xquery_demo]</span><span style="color: silver; ">.</span><span style="color: maroon; ">[xsd_log]</span><span style="color: maroon; ">)</span>
<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: silver; ">,</span>&nbsp;<span style="color: #8000FF; ">@x</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: maroon; ">[xml]</span>&nbsp;<span style="color: maroon; ">(</span><span style="color: maroon; ">[xquery_demo]</span><span style="color: silver; ">.</span><span style="color: maroon; ">[xsd_log]</span><span style="color: maroon; ">)</span>
<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: silver; ">,</span>&nbsp;<span style="color: #8000FF; ">@log_ssis</span>&nbsp;&nbsp;&nbsp;<span style="color: maroon; ">[xml]</span>&nbsp;<span style="color: maroon; ">(</span><span style="color: maroon; ">[xquery_demo]</span><span style="color: silver; ">.</span><span style="color: maroon; ">xsd_log_business_application_02</span><span style="color: maroon; ">)</span>
<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: silver; ">,</span>&nbsp;<span style="color: #8000FF; ">@log_entry</span>&nbsp;&nbsp;<span style="color: maroon; ">[xml]</span>
<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: silver; ">,</span>&nbsp;<span style="color: #8000FF; ">@log_insert</span>&nbsp;<span style="color: maroon; ">[xml]</span>
<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: silver; ">,</span>&nbsp;<span style="color: #8000FF; ">@output</span>&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: maroon; ">[xml]</span><span style="color: silver; ">;</span>
<br/><span style="color: blue; ">set</span>&nbsp;<span style="color: #8000FF; ">@entry</span>&nbsp;<span style="color: silver; ">=</span>&nbsp;<span style="color: red; ">N'&#60;log&nbsp;timestamp=&quot;'</span>
<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: silver; ">+</span>&nbsp;<span style="color: fuchsia; font-style: italic; ">cast</span><span style="color: maroon; ">(</span><span style="color: blue; ">current_timestamp</span>&nbsp;<span style="color: blue; ">as</span>&nbsp;<span style="color: black; font-style: italic; ">[sysname]</span><span style="color: maroon; ">)</span>
<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: silver; ">+</span>&nbsp;<span style="color: red; ">'&quot;&nbsp;/>'</span><span style="color: silver; ">;</span>
<br/><span style="color: blue; ">set</span>&nbsp;<span style="color: #8000FF; ">@log_ssis</span>&nbsp;<span style="color: silver; ">=</span>&nbsp;<span style="color: red; ">N'&#60;ssis>
<br/>	&#60;application>
<br/>		&#60;notes_tree>
<br/>			&#60;note>note&nbsp;text&#60;/note>
<br/>			&#60;note>note&nbsp;text&#60;/note>
<br/>		&#60;/notes_tree>
<br/>		&#60;Data>
<br/>			&#60;level_01&nbsp;attr1=&quot;knock&nbsp;knock!&quot;&nbsp;>
<br/>				&#60;L2>is&nbsp;where&nbsp;it&nbsp;is&nbsp;at!&#60;/L2>
<br/>			&#60;/level_01>
<br/>			&#60;problem&nbsp;description=&quot;what&nbsp;the&nbsp;problem&nbsp;is&quot;&nbsp;/>
<br/>		&#60;/Data>
<br/>	&#60;/application>&#60;/ssis>'</span><span style="color: silver; ">;</span>
<br/><span style="color: blue; ">set</span>&nbsp;<span style="color: #8000FF; ">@log_insert</span>&nbsp;<span style="color: silver; ">=</span>&nbsp;<span style="color: #8000FF; ">@log_ssis</span><span style="color: silver; ">;</span>
<br/><span style="color: blue; ">set</span>&nbsp;<span style="color: #8000FF; ">@log_entry</span>&nbsp;<span style="color: silver; ">=</span>&nbsp;<span style="color: #8000FF; ">@entry</span><span style="color: silver; ">;</span>
<br/><span style="color: blue; ">set</span>&nbsp;<span style="color: #8000FF; ">@log_entry</span><span style="color: silver; ">.</span><span style="color: #FF0080; font-weight: bold; ">modify</span><span style="color: maroon; ">(</span><span style="color: red; ">'insert&nbsp;sql:variable(&quot;@log_insert&quot;)&nbsp;into&nbsp;(/log)[1]'</span><span style="color: maroon; ">)</span><span style="color: silver; ">;</span>
<br/><span style="color: blue; ">execute</span>&nbsp;<span style="color: maroon; ">[xquery_demo]</span><span style="color: silver; ">.</span><span style="color: #FF0080; font-weight: bold; ">[set.log]</span>
<br/>&nbsp;&nbsp;<span style="color: #8000FF; ">@entry</span>&nbsp;&nbsp;&nbsp;<span style="color: silver; ">=</span><span style="color: #8000FF; ">@log_entry</span>
<br/>&nbsp;&nbsp;<span style="color: silver; ">,</span>&nbsp;<span style="color: #8000FF; ">@output</span><span style="color: silver; ">=</span><span style="color: #8000FF; ">@output</span>&nbsp;<span style="color: maroon; ">output</span>
<br/><span style="color: blue; ">select</span>&nbsp;<span style="color: maroon; ">[entry]</span>
<br/><span style="color: blue; ">from</span>&nbsp;&nbsp;&nbsp;<span style="color: maroon; ">[xquery_demo]</span><span style="color: silver; ">.</span><span style="color: maroon; ">[log]</span>
<br/><span style="color: blue; ">where</span>&nbsp;&nbsp;<span style="color: maroon; ">[id]</span>&nbsp;<span style="color: silver; ">=</span>&nbsp;<span style="color: #8000FF; ">@output</span><span style="color: silver; ">.</span><span style="color: #FF0080; font-weight: bold; ">value</span><span style="color: maroon; ">(</span><span style="color: red; ">'(/output/@id)[1]'</span><span style="color: silver; ">,</span>&nbsp;<span style="color: red; ">'[int]'</span><span style="color: maroon; ">)</span><span style="color: silver; ">;</span>
<br/><span style="color: maroon; ">go</span>
<br/><span style="color: green; font-style: italic; ">&#45;&#45;&nbsp;end&nbsp;code&nbsp;block</span>
<br/><span style="color: green; font-style: italic; ">&#45;&#45;&nbsp;begin&nbsp;code&nbsp;block</span>
<br/><span style="color: green; font-style: italic; ">&#45;&#45;</span>
<br/><span style="color: green; font-style: italic; ">&#45;&#45;&nbsp;This&nbsp;entry&nbsp;will&nbsp;NOT&nbsp;be&nbsp;allowed&nbsp;as&nbsp;it&nbsp;does&nbsp;not&nbsp;conform&nbsp;to&nbsp;[xquery_demo].[xsd_log_business_application_01]</span>
<br/><span style="color: green; font-style: italic; ">&#45;&#45;&nbsp;&nbsp;and&nbsp;it's&nbsp;caught&nbsp;before&nbsp;the&nbsp;function&nbsp;is&nbsp;even&nbsp;called&nbsp;because&nbsp;of&nbsp;the&nbsp;use&nbsp;of&nbsp;a</span>
<br/><span style="color: green; font-style: italic; ">&#45;&#45;&nbsp;&nbsp;TYPED&nbsp;variable&nbsp;to&nbsp;build&nbsp;the&nbsp;data.</span>
<br/><span style="color: green; font-style: italic; ">&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;</span>
<br/><span style="color: blue; ">declare</span>&nbsp;<span style="color: #8000FF; ">@entry</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: maroon; ">[xml]</span>&nbsp;<span style="color: maroon; ">(</span><span style="color: maroon; ">[xquery_demo]</span><span style="color: silver; ">.</span><span style="color: maroon; ">[xsd_log]</span><span style="color: maroon; ">)</span>
<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: silver; ">,</span>&nbsp;<span style="color: #8000FF; ">@x</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: maroon; ">[xml]</span>&nbsp;<span style="color: maroon; ">(</span><span style="color: maroon; ">[xquery_demo]</span><span style="color: silver; ">.</span><span style="color: maroon; ">[xsd_log]</span><span style="color: maroon; ">)</span>
<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: silver; ">,</span>&nbsp;<span style="color: #8000FF; ">@log_business_application_01</span>&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: maroon; ">[xml]</span>&nbsp;<span style="color: maroon; ">(</span><span style="color: maroon; ">[xquery_demo]</span><span style="color: silver; ">.</span><span style="color: maroon; ">[xsd_log_business_application_01]</span><span style="color: maroon; ">)</span>
<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: silver; ">,</span>&nbsp;<span style="color: #8000FF; ">@log_entry</span>&nbsp;&nbsp;<span style="color: maroon; ">[xml]</span>
<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: silver; ">,</span>&nbsp;<span style="color: #8000FF; ">@log_insert</span>&nbsp;<span style="color: maroon; ">[xml]</span>
<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: silver; ">,</span>&nbsp;<span style="color: #8000FF; ">@output</span>&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: maroon; ">[xml]</span><span style="color: silver; ">;</span>
<br/><span style="color: blue; ">set</span>&nbsp;<span style="color: #8000FF; ">@entry</span>&nbsp;<span style="color: silver; ">=</span>&nbsp;<span style="color: red; ">N'&#60;log&nbsp;timestamp=&quot;'</span>
<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: silver; ">+</span>&nbsp;<span style="color: fuchsia; font-style: italic; ">cast</span><span style="color: maroon; ">(</span><span style="color: blue; ">current_timestamp</span>&nbsp;<span style="color: blue; ">as</span>&nbsp;<span style="color: black; font-style: italic; ">[sysname]</span><span style="color: maroon; ">)</span>
<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: silver; ">+</span>&nbsp;<span style="color: red; ">'&quot;&nbsp;/>'</span><span style="color: silver; ">;</span>
<br/><span style="color: blue; ">set</span>&nbsp;<span style="color: #8000FF; ">@log_business_application_01</span>&nbsp;<span style="color: silver; ">=</span>&nbsp;<span style="color: red; ">N'&#60;business_application_01>
<br/>		&#60;table&nbsp;&nbsp;group=&quot;ACS_PAYMENT&quot;&nbsp;application=&quot;FINANCE&quot;&nbsp;table=&quot;D_ACS_PAYMENT&quot;&nbsp;>
<br/>			&#60;job&nbsp;job_name=&quot;FTR_ND_ACS_PAYMENT&quot;&nbsp;author=&quot;klightsey&quot;&nbsp;>
<br/>				&#60;notes_tree>
<br/>					&#60;note>CMD_ND_ACS_PAYMENT_LASERUTIL&nbsp;notes&nbsp;on&nbsp;another&nbsp;job&#60;/note>
<br/>					&#60;AnElementThatIsNotInTheSchema&nbsp;/>
<br/>				&#60;/notes_tree>
<br/>			&#60;/job>
<br/>		&#60;/table>
<br/>	&#60;/business_application_01>'</span><span style="color: silver; ">;</span>
<br/><span style="color: maroon; ">go</span>
<br/><span style="color: green; font-style: italic; ">&#45;&#45;&nbsp;end&nbsp;code&nbsp;block</span>
<br/><span style="color: green; font-style: italic; ">&#45;&#45;&nbsp;begin&nbsp;code&nbsp;block</span>
<br/><span style="color: green; font-style: italic; ">&#45;&#45;</span>
<br/><span style="color: green; font-style: italic; ">&#45;&#45;&nbsp;This&nbsp;will&nbsp;NOT&nbsp;be&nbsp;allowed&nbsp;as&nbsp;it&nbsp;does&nbsp;not&nbsp;conform&nbsp;to&nbsp;[xquery_demo].[xsd_log_business_application_01]</span>
<br/><span style="color: green; font-style: italic; ">&#45;&#45;&nbsp;&nbsp;but&nbsp;because&nbsp;the&nbsp;variables&nbsp;are&nbsp;not&nbsp;typed&nbsp;it&nbsp;isn't&nbsp;caught&nbsp;until&nbsp;it&nbsp;hits&nbsp;the&nbsp;function.</span>
<br/><span style="color: green; font-style: italic; ">&#45;&#45;&nbsp;An&nbsp;error&nbsp;should&nbsp;be&nbsp;thrown&nbsp;and&nbsp;handled&nbsp;in&nbsp;the&nbsp;procedure.</span>
<br/><span style="color: blue; ">declare</span>&nbsp;<span style="color: #8000FF; ">@entry</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: black; font-style: italic; ">[xml]</span>
<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: silver; ">,</span>&nbsp;<span style="color: #8000FF; ">@x</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: black; font-style: italic; ">[xml]</span>
<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: silver; ">,</span>&nbsp;<span style="color: #8000FF; ">@log_business_application_01</span>&nbsp;<span style="color: black; font-style: italic; ">[xml]</span>
<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: silver; ">,</span>&nbsp;<span style="color: #8000FF; ">@log_entry</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: black; font-style: italic; ">[xml]</span>
<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: silver; ">,</span>&nbsp;<span style="color: #8000FF; ">@log_insert</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: black; font-style: italic; ">[xml]</span>
<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: silver; ">,</span>&nbsp;<span style="color: #8000FF; ">@output</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: black; font-style: italic; ">[xml]</span><span style="color: silver; ">;</span>
<br/><span style="color: blue; ">set</span>&nbsp;<span style="color: #8000FF; ">@entry</span>&nbsp;<span style="color: silver; ">=</span>&nbsp;<span style="color: red; ">N'&#60;log&nbsp;timestamp=&quot;'</span>
<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: silver; ">+</span>&nbsp;<span style="color: fuchsia; font-style: italic; ">cast</span><span style="color: maroon; ">(</span><span style="color: blue; ">current_timestamp</span>&nbsp;<span style="color: blue; ">as</span>&nbsp;<span style="color: black; font-style: italic; ">[sysname]</span><span style="color: maroon; ">)</span>
<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: silver; ">+</span>&nbsp;<span style="color: red; ">'&quot;&nbsp;/>'</span><span style="color: silver; ">;</span>
<br/><span style="color: blue; ">set</span>&nbsp;<span style="color: #8000FF; ">@log_business_application_01</span>&nbsp;<span style="color: silver; ">=</span>&nbsp;<span style="color: red; ">N'&#60;business_application_01>
<br/>		&#60;table_tree&nbsp;&nbsp;group=&quot;job&nbsp;group&quot;&nbsp;application=&quot;FINANCE&quot;&nbsp;table=&quot;table&quot;&nbsp;>
<br/>			&#60;job&nbsp;job_name=&quot;job&nbsp;name&quot;&nbsp;author=&quot;klightsey&quot;&nbsp;>
<br/>				&#60;notes_tree>
<br/>					&#60;note>notes&nbsp;on&nbsp;another&nbsp;job&#60;/note>
<br/>					&#60;AnElementThatIsNotInTheSchema&nbsp;/>
<br/>				&#60;/notes_tree>
<br/>			&#60;/job>
<br/>		&#60;/table_tree>
<br/>	&#60;/business_application_01>'</span><span style="color: silver; ">;</span>
<br/><span style="color: blue; ">set</span>&nbsp;<span style="color: #8000FF; ">@log_insert</span>&nbsp;<span style="color: silver; ">=</span>&nbsp;<span style="color: #8000FF; ">@log_business_application_01</span><span style="color: silver; ">;</span>
<br/><span style="color: blue; ">set</span>&nbsp;<span style="color: #8000FF; ">@log_entry</span>&nbsp;<span style="color: silver; ">=</span>&nbsp;<span style="color: #8000FF; ">@entry</span><span style="color: silver; ">;</span>
<br/><span style="color: blue; ">set</span>&nbsp;<span style="color: #8000FF; ">@log_entry</span><span style="color: silver; ">.</span><span style="color: #FF0080; font-weight: bold; ">modify</span><span style="color: maroon; ">(</span><span style="color: red; ">'insert&nbsp;sql:variable(&quot;@log_insert&quot;)&nbsp;into&nbsp;(/log)[1]'</span><span style="color: maroon; ">)</span><span style="color: silver; ">;</span>
<br/><span style="color: blue; ">execute</span>&nbsp;<span style="color: maroon; ">[xquery_demo]</span><span style="color: silver; ">.</span><span style="color: #FF0080; font-weight: bold; ">[set.log]</span>
<br/>&nbsp;&nbsp;<span style="color: #8000FF; ">@entry</span>&nbsp;&nbsp;&nbsp;<span style="color: silver; ">=</span><span style="color: #8000FF; ">@log_entry</span>
<br/>&nbsp;&nbsp;<span style="color: silver; ">,</span>&nbsp;<span style="color: #8000FF; ">@output</span><span style="color: silver; ">=</span><span style="color: #8000FF; ">@output</span>&nbsp;<span style="color: maroon; ">output</span><span style="color: silver; ">;</span>
<br/><span style="color: blue; ">select</span>&nbsp;<span style="color: #8000FF; ">@output</span>&nbsp;<span style="color: blue; ">as</span>&nbsp;<span style="color: maroon; ">[error]</span><span style="color: silver; ">;</span>
<br/><span style="color: maroon; ">go</span>
<br/><span style="color: green; font-style: italic; ">&#45;&#45;&nbsp;end&nbsp;code&nbsp;block</span>
<br/><span style="color: green; font-style: italic; ">&#45;&#45;&nbsp;begin&nbsp;code&nbsp;block</span>
<br/><span style="color: green; font-style: italic; ">&#45;&#45;</span>
<br/><span style="color: green; font-style: italic; ">&#45;&#45;&nbsp;This&nbsp;will&nbsp;NOT&nbsp;be&nbsp;allowed&nbsp;as&nbsp;it&nbsp;does&nbsp;not&nbsp;have&nbsp;an&nbsp;element&nbsp;that&nbsp;is&nbsp;allowed.</span>
<br/><span style="color: green; font-style: italic; ">&#45;&#45;&nbsp;An&nbsp;error&nbsp;should&nbsp;be&nbsp;thrown&nbsp;and&nbsp;handled&nbsp;in&nbsp;the&nbsp;procedure.</span>
<br/><span style="color: blue; ">declare</span>&nbsp;<span style="color: #8000FF; ">@entry</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: black; font-style: italic; ">[xml]</span>
<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: silver; ">,</span>&nbsp;<span style="color: #8000FF; ">@x</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: black; font-style: italic; ">[xml]</span>
<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: silver; ">,</span>&nbsp;<span style="color: #8000FF; ">@log_business_application_01</span>&nbsp;<span style="color: black; font-style: italic; ">[xml]</span>
<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: silver; ">,</span>&nbsp;<span style="color: #8000FF; ">@log_entry</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: black; font-style: italic; ">[xml]</span>
<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: silver; ">,</span>&nbsp;<span style="color: #8000FF; ">@log_insert</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: black; font-style: italic; ">[xml]</span>
<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: silver; ">,</span>&nbsp;<span style="color: #8000FF; ">@output</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: black; font-style: italic; ">[xml]</span><span style="color: silver; ">;</span>
<br/><span style="color: blue; ">set</span>&nbsp;<span style="color: #8000FF; ">@entry</span>&nbsp;<span style="color: silver; ">=</span>&nbsp;<span style="color: red; ">N'&#60;log&nbsp;timestamp=&quot;'</span>
<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: silver; ">+</span>&nbsp;<span style="color: fuchsia; font-style: italic; ">cast</span><span style="color: maroon; ">(</span><span style="color: blue; ">current_timestamp</span>&nbsp;<span style="color: blue; ">as</span>&nbsp;<span style="color: black; font-style: italic; ">[sysname]</span><span style="color: maroon; ">)</span>
<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: silver; ">+</span>&nbsp;<span style="color: red; ">'&quot;&nbsp;/>'</span><span style="color: silver; ">;</span>
<br/><span style="color: blue; ">set</span>&nbsp;<span style="color: #8000FF; ">@log_business_application_01</span>&nbsp;<span style="color: silver; ">=</span>&nbsp;<span style="color: red; ">N'&#60;NotHere>
<br/>		&#60;table&nbsp;&nbsp;group=&quot;table&nbsp;group&quot;&nbsp;application=&quot;FINANCE&quot;&nbsp;table=&quot;table&quot;&nbsp;>
<br/>			&#60;job&nbsp;job_name=&quot;FTR_ND_ACS_PAYMENT&quot;&nbsp;author=&quot;klightsey&quot;&nbsp;>
<br/>				&#60;notes_tree>
<br/>					&#60;note>notes&nbsp;on&nbsp;another&nbsp;job&#60;/note>
<br/>					&#60;AnElementThatIsNotInTheSchema&nbsp;/>
<br/>				&#60;/notes_tree>
<br/>			&#60;/job>
<br/>		&#60;/table>
<br/>	&#60;/NotHere>'</span><span style="color: silver; ">;</span>
<br/><span style="color: blue; ">set</span>&nbsp;<span style="color: #8000FF; ">@log_insert</span>&nbsp;<span style="color: silver; ">=</span>&nbsp;<span style="color: #8000FF; ">@log_business_application_01</span><span style="color: silver; ">;</span>
<br/><span style="color: blue; ">set</span>&nbsp;<span style="color: #8000FF; ">@log_entry</span>&nbsp;<span style="color: silver; ">=</span>&nbsp;<span style="color: #8000FF; ">@entry</span><span style="color: silver; ">;</span>
<br/><span style="color: blue; ">set</span>&nbsp;<span style="color: #8000FF; ">@log_entry</span><span style="color: silver; ">.</span><span style="color: #FF0080; font-weight: bold; ">modify</span><span style="color: maroon; ">(</span><span style="color: red; ">'insert&nbsp;sql:variable(&quot;@log_insert&quot;)&nbsp;into&nbsp;(/log)[1]'</span><span style="color: maroon; ">)</span><span style="color: silver; ">;</span>
<br/><span style="color: blue; ">execute</span>&nbsp;<span style="color: maroon; ">[xquery_demo]</span><span style="color: silver; ">.</span><span style="color: #FF0080; font-weight: bold; ">[set.log]</span>
<br/>&nbsp;&nbsp;<span style="color: #8000FF; ">@entry</span>&nbsp;&nbsp;&nbsp;<span style="color: silver; ">=</span><span style="color: #8000FF; ">@log_entry</span>
<br/>&nbsp;&nbsp;<span style="color: silver; ">,</span>&nbsp;<span style="color: #8000FF; ">@output</span><span style="color: silver; ">=</span><span style="color: #8000FF; ">@output</span>&nbsp;<span style="color: maroon; ">output</span><span style="color: silver; ">;</span>
<br/><span style="color: blue; ">select</span>&nbsp;<span style="color: #8000FF; ">@output</span>&nbsp;<span style="color: blue; ">as</span>&nbsp;<span style="color: maroon; ">[error]</span><span style="color: silver; ">;</span>
<br/><span style="color: maroon; ">go</span>
<br/><span style="color: green; font-style: italic; ">&#45;&#45;&nbsp;end&nbsp;code&nbsp;block</span>
<br/><span style="color: green; font-style: italic; ">&#45;&#45;&nbsp;begin&nbsp;code&nbsp;block</span>
<br/><span style="color: green; font-style: italic; ">&#45;&#45;</span>
<br/><span style="color: green; font-style: italic; ">&#45;&#45;&nbsp;This&nbsp;will&nbsp;NOT&nbsp;be&nbsp;allowed&nbsp;as&nbsp;[entry]&nbsp;is&nbsp;NULL</span>
<br/><span style="color: blue; ">declare</span>&nbsp;<span style="color: #8000FF; ">@output</span>&nbsp;<span style="color: black; font-style: italic; ">[xml]</span><span style="color: silver; ">;</span>
<br/><span style="color: blue; ">execute</span>&nbsp;<span style="color: maroon; ">[xquery_demo]</span><span style="color: silver; ">.</span><span style="color: #FF0080; font-weight: bold; ">[set.log]</span>
<br/>&nbsp;&nbsp;<span style="color: #8000FF; ">@entry</span>&nbsp;&nbsp;&nbsp;<span style="color: silver; ">=</span><span style="color: blue; ">null</span>
<br/>&nbsp;&nbsp;<span style="color: silver; ">,</span>&nbsp;<span style="color: #8000FF; ">@output</span><span style="color: silver; ">=</span><span style="color: #8000FF; ">@output</span>&nbsp;<span style="color: maroon; ">output</span><span style="color: silver; ">;</span>
<br/><span style="color: blue; ">select</span>&nbsp;<span style="color: #8000FF; ">@output</span>&nbsp;<span style="color: blue; ">as</span>&nbsp;<span style="color: maroon; ">[error]</span><span style="color: silver; ">;</span>
<br/><span style="color: maroon; ">go</span>
<br/><span style="color: green; font-style: italic; ">&#45;&#45;&nbsp;end&nbsp;code&nbsp;block</span>
<br/><span style="color: green; font-style: italic; ">&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;</span>
<br/><span style="color: green; font-style: italic; ">&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;</span>
<br/><span style="color: green; font-style: italic; ">&#45;&#45;&nbsp;&nbsp;XSD&nbsp;DATATYPES</span>
<br/><span style="color: green; font-style: italic; ">&#45;&#45;&nbsp;&nbsp;XSD&nbsp;can&nbsp;be&nbsp;typed&nbsp;to&nbsp;ensure&nbsp;the&nbsp;resultant&nbsp;TYPED&nbsp;[xml]&nbsp;meets&nbsp;requirements.</span>
<br/><span style="color: green; font-style: italic; ">&#45;&#45;&nbsp;&nbsp;XSD&nbsp;DATATYPES:&nbsp;</span>
<br/><span style="color: green; font-style: italic; ">&#45;&#45;&nbsp;&nbsp;&nbsp;&nbsp;Writing&nbsp;Typed&nbsp;Data:&nbsp;http://msdn.microsoft.com/en-us/library/vstudio/bft97s8e(v=vs.100).aspx</span>
<br/><span style="color: green; font-style: italic; ">&#45;&#45;&nbsp;&nbsp;&nbsp;&nbsp;Mapping&nbsp;SQL&nbsp;datatypes&nbsp;to&nbsp;[xml]&nbsp;Schema&nbsp;datatypes:</span>
<br/><span style="color: green; font-style: italic; ">&#45;&#45;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;http://www.w3.org/2001/sw/rdb2rdf/wiki/Mapping_SQL_datatypes_to_XML_Schema_datatypes</span>
<br/><span style="color: green; font-style: italic; ">&#45;&#45;&nbsp;&nbsp;Data&nbsp;Type&nbsp;Coercions&nbsp;and&nbsp;the&nbsp;sql:datatype&nbsp;Annotation:&nbsp;</span>
<br/><span style="color: green; font-style: italic; ">&#45;&#45;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;http://msdn.microsoft.com/en-us/library/aa258643(v=SQL.80).aspx</span>
<br/><span style="color: green; font-style: italic; ">&#45;&#45;&nbsp;&nbsp;Some&nbsp;XSD&nbsp;DATATYPES&nbsp;include:&nbsp;boolean,&nbsp;integer,&nbsp;base64Binary,&nbsp;string,&nbsp;dateTime,&nbsp;time,&nbsp;decimal,&nbsp;double,&nbsp;float,</span>
<br/><span style="color: green; font-style: italic; ">&#45;&#45;&nbsp;&nbsp;&nbsp;&nbsp;yearMonthDuration,&nbsp;dayTimeDuration</span>
<br/><span style="color: green; font-style: italic; ">&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;</span>
<br/><span style="color: green; font-style: italic; ">&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;</span>
<br/><span style="color: green; font-style: italic; ">&#45;&#45;&nbsp;begin&nbsp;code&nbsp;block</span>
<br/><span style="color: blue; ">if</span>&nbsp;<span style="color: blue; ">exists</span>
<br/>&nbsp;&nbsp;&nbsp;<span style="color: maroon; ">(</span><span style="color: blue; ">select</span>&nbsp;<span style="color: maroon; ">xml_collection_id</span>
<br/>&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: blue; ">from</span>&nbsp;&nbsp;&nbsp;<span style="color: maroon; ">sys</span><span style="color: silver; ">.</span><span style="color: maroon; ">xml_schema_collections</span>&nbsp;<span style="color: blue; ">as</span>&nbsp;<span style="color: maroon; ">xsc</span>
<br/>&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: blue; ">where</span>&nbsp;&nbsp;<span style="color: maroon; ">xsc</span><span style="color: silver; ">.</span><span style="color: blue; ">name</span>&nbsp;<span style="color: silver; ">=</span>&nbsp;<span style="color: red; ">'xsd_test_02'</span>
<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: blue; ">and</span>&nbsp;<span style="color: maroon; ">xsc</span><span style="color: silver; ">.</span><span style="color: maroon; ">schema_id</span>&nbsp;<span style="color: silver; ">=</span>&nbsp;<span style="color: #FF0080; font-weight: bold; ">schema_id</span><span style="color: maroon; ">(</span><span style="color: red; ">N'xquery_demo'</span><span style="color: maroon; ">)</span><span style="color: maroon; ">)</span>
<br/>&nbsp;&nbsp;<span style="color: blue; ">drop</span>&nbsp;<span style="color: maroon; ">xml</span>&nbsp;<span style="color: blue; ">schema</span>&nbsp;<span style="color: maroon; ">collection</span>&nbsp;<span style="color: maroon; ">[xquery_demo]</span><span style="color: silver; ">.</span><span style="color: maroon; ">[xsd_test_02]</span><span style="color: silver; ">;</span>
<br/><span style="color: maroon; ">go</span>
<br/><span style="color: blue; ">create</span>&nbsp;<span style="color: maroon; ">xml</span>&nbsp;<span style="color: blue; ">schema</span>&nbsp;<span style="color: maroon; ">collection</span>&nbsp;<span style="color: maroon; ">[xquery_demo]</span><span style="color: silver; ">.</span><span style="color: maroon; ">[xsd_test_02]</span>&nbsp;<span style="color: blue; ">as</span>&nbsp;<span style="color: red; ">N'&#60;?xml&nbsp;version=&quot;1.0&quot;&nbsp;encoding=&quot;utf-16&quot;?>
<br/>&#60;xs:schema&nbsp;id=&quot;NewDataSet&quot;&nbsp;xmlns=&quot;&quot;&nbsp;xmlns:xs=&quot;http://www.w3.org/2001/XMLSchema&quot;&nbsp;xmlns:msdata=&quot;urn:schemas-microsoft-com:xml-msdata&quot;>
<br/>&nbsp;&nbsp;&#60;xs:element&nbsp;name=&quot;log&quot;>
<br/>&nbsp;&nbsp;&nbsp;&nbsp;&#60;xs:complexType>
<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#60;xs:sequence>
<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#60;xs:element&nbsp;name=&quot;bigint&quot;&nbsp;type=&quot;xs:long&quot;&nbsp;minOccurs=&quot;0&quot;&nbsp;msdata:Ordinal=&quot;0&quot;&nbsp;/>
<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#60;xs:element&nbsp;name=&quot;float&quot;&nbsp;type=&quot;xs:double&quot;&nbsp;minOccurs=&quot;0&quot;&nbsp;msdata:Ordinal=&quot;1&quot;&nbsp;/>
<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#60;xs:element&nbsp;name=&quot;int&quot;&nbsp;type=&quot;xs:int&quot;&nbsp;minOccurs=&quot;0&quot;&nbsp;msdata:Ordinal=&quot;2&quot;&nbsp;/>
<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#60;xs:element&nbsp;name=&quot;decimal&quot;&nbsp;type=&quot;xs:decimal&quot;&nbsp;minOccurs=&quot;0&quot;&nbsp;msdata:Ordinal=&quot;3&quot;&nbsp;/>
<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#60;xs:element&nbsp;name=&quot;bit&quot;&nbsp;type=&quot;xs:boolean&quot;&nbsp;minOccurs=&quot;0&quot;&nbsp;msdata:Ordinal=&quot;4&quot;&nbsp;/>
<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#60;xs:element&nbsp;name=&quot;nvarchar-sql_variant-sysname-text-varchar-uniqueidentifier-ntext&quot;&nbsp;type=&quot;xs:string&quot;&nbsp;minOccurs=&quot;0&quot;&nbsp;msdata:Ordinal=&quot;5&quot;&nbsp;/>
<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#60;/xs:sequence>
<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#60;xs:attribute&nbsp;name=&quot;timestamp&quot;&nbsp;type=&quot;xs:dateTime&quot;&nbsp;use=&quot;required&quot;&nbsp;/>
<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#60;xs:attribute&nbsp;name=&quot;id&quot;&nbsp;type=&quot;xs:int&quot;&nbsp;use=&quot;required&quot;&nbsp;/>
<br/>&nbsp;&nbsp;&nbsp;&nbsp;&#60;/xs:complexType>
<br/>&nbsp;&nbsp;&#60;/xs:element>
<br/>&nbsp;&nbsp;&#60;xs:element&nbsp;name=&quot;NewDataSet&quot;&nbsp;msdata:IsDataSet=&quot;true&quot;&nbsp;msdata:UseCurrentLocale=&quot;true&quot;>
<br/>&nbsp;&nbsp;&nbsp;&nbsp;&#60;xs:complexType>
<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#60;xs:choice&nbsp;minOccurs=&quot;0&quot;&nbsp;maxOccurs=&quot;unbounded&quot;>
<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#60;xs:element&nbsp;ref=&quot;log&quot;&nbsp;/>
<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#60;/xs:choice>
<br/>&nbsp;&nbsp;&nbsp;&nbsp;&#60;/xs:complexType>
<br/>&nbsp;&nbsp;&#60;/xs:element>
<br/>&#60;/xs:schema>'</span>
<br/><span style="color: maroon; ">go</span><span style="color: blue; ">declare</span>&nbsp;<span style="color: #8000FF; ">@xtest</span>&nbsp;<span style="color: maroon; ">[xml]</span>&nbsp;<span style="color: maroon; ">(</span><span style="color: maroon; ">[xquery_demo]</span><span style="color: silver; ">.</span><span style="color: maroon; ">[xsd_test_02]</span><span style="color: maroon; ">)</span>&nbsp;<span style="color: silver; ">=</span>&nbsp;<span style="color: red; ">N'&#60;log&nbsp;timestamp=&quot;'</span>
<br/>&nbsp;&nbsp;<span style="color: silver; ">+</span>&nbsp;<span style="color: blue; ">convert</span><span style="color: maroon; ">(</span><span style="color: maroon; ">nvarchar</span><span style="color: maroon; ">(</span><span style="color: black; ">30</span><span style="color: maroon; ">)</span><span style="color: silver; ">,</span>&nbsp;<span style="color: blue; ">current_timestamp</span><span style="color: silver; ">,</span>&nbsp;<span style="color: black; ">126</span><span style="color: maroon; ">)</span>
<br/>&nbsp;&nbsp;<span style="color: silver; ">+</span>&nbsp;<span style="color: red; ">'&quot;&nbsp;id=&quot;5&quot;&nbsp;>
<br/>	&#60;bigint>5&#60;/bigint>
<br/>	&#60;float>4.095&#60;/float>
<br/>	&#60;int>4&#60;/int>
<br/>	&#60;decimal>10.235&#60;/decimal>
<br/>	&#60;bit>1&#60;/bit>
<br/>	&#60;nvarchar-sql_variant-sysname-text-varchar-uniqueidentifier-ntext>String&nbsp;goes&nbsp;here&#60;/nvarchar-sql_variant-sysname-text-varchar-uniqueidentifier-ntext>
<br/>&#60;/log>'</span><span style="color: silver; ">;</span>
<br/><span style="color: blue; ">select</span>&nbsp;<span style="color: #8000FF; ">@xtest</span><span style="color: silver; ">;</span>
<br/><span style="color: green; font-style: italic; ">&#45;&#45;&nbsp;end&nbsp;code&nbsp;block</span>
<br/><span style="color: green; font-style: italic; ">&#45;&#45;</span>
<br/><span style="color: green; font-style: italic; ">&#45;&#45;&nbsp;&nbsp;SECONDARY&nbsp;INDEXES&nbsp;can&nbsp;be&nbsp;created&nbsp;FOR&nbsp;VALUE,&nbsp;FOR&nbsp;PROPERTY,&nbsp;and&nbsp;FOR&nbsp;PATH</span>
<br/><span style="color: green; font-style: italic; ">&#45;&#45;&nbsp;&nbsp;PATH&nbsp;SECONDARY&nbsp;INDEXES&nbsp;are&nbsp;designed&nbsp;to&nbsp;help&nbsp;improve&nbsp;queries&nbsp;that&nbsp;contain&nbsp;a&nbsp;good&nbsp;amount&nbsp;of&nbsp;path&nbsp;expressions.&nbsp;</span>
<br/><span style="color: green; font-style: italic; ">&#45;&#45;&nbsp;&nbsp;&nbsp;&nbsp;Queries&nbsp;that&nbsp;use&nbsp;the&nbsp;exist()&nbsp;method&nbsp;are&nbsp;usually&nbsp;good&nbsp;candidates&nbsp;for&nbsp;a&nbsp;PATH&nbsp;index.</span>
<br/><span style="color: green; font-style: italic; ">&#45;&#45;&nbsp;&nbsp;PROPERTY&nbsp;SECONDARY&nbsp;INDEXES&nbsp;are&nbsp;intended&nbsp;for&nbsp;queries&nbsp;where&nbsp;the&nbsp;primary&nbsp;key&nbsp;is&nbsp;a&nbsp;known&nbsp;value,&nbsp;and&nbsp;multiple</span>
<br/><span style="color: green; font-style: italic; ">&#45;&#45;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;values&nbsp;are&nbsp;required&nbsp;from&nbsp;the&nbsp;same&nbsp;[xml]&nbsp;instance.</span>
<br/><span style="color: green; font-style: italic; ">&#45;&#45;&nbsp;&nbsp;VALUE&nbsp;SECONDARY&nbsp;INDEXES&nbsp;are&nbsp;useful&nbsp;for&nbsp;searching&nbsp;for&nbsp;known&nbsp;element&nbsp;or&nbsp;attribute&nbsp;values,&nbsp;without&nbsp;necessarily</span>
<br/><span style="color: green; font-style: italic; ">&#45;&#45;&nbsp;&nbsp;&nbsp;&nbsp;knowing&nbsp;the&nbsp;element&nbsp;or&nbsp;attribute&nbsp;names,&nbsp;or&nbsp;the&nbsp;full&nbsp;path&nbsp;to&nbsp;the&nbsp;value.&nbsp;Queries&nbsp;that&nbsp;use&nbsp;wildcards&nbsp;for</span>
<br/><span style="color: green; font-style: italic; ">&#45;&#45;&nbsp;&nbsp;&nbsp;&nbsp;portions&nbsp;of&nbsp;a&nbsp;path&nbsp;would&nbsp;probably&nbsp;benefit&nbsp;from&nbsp;a&nbsp;VALUE&nbsp;index.</span>
<br/><span style="color: green; font-style: italic; ">&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;</span>
<br/><span style="color: green; font-style: italic; ">&#45;&#45;&nbsp;begin&nbsp;code&nbsp;block</span>
<br/><span style="color: blue; ">if</span>&nbsp;<span style="color: fuchsia; font-style: italic; ">indexproperty</span>&nbsp;<span style="color: maroon; ">(</span><span style="color: fuchsia; font-style: italic; ">object_id</span><span style="color: maroon; ">(</span><span style="color: red; ">'[xquery_demo].[log]'</span><span style="color: maroon; ">)</span><span style="color: silver; ">,</span>&nbsp;<span style="color: red; ">'ix_xquery_demo_log_xlog'</span><span style="color: silver; ">,</span>&nbsp;<span style="color: red; ">'IndexID'</span><span style="color: maroon; ">)</span>&nbsp;<span style="color: blue; ">is</span>&nbsp;<span style="color: blue; ">not</span>&nbsp;<span style="color: blue; ">null</span>
<br/>&nbsp;&nbsp;<span style="color: blue; ">drop</span>&nbsp;<span style="color: blue; ">index</span>&nbsp;<span style="color: maroon; ">[ix_xquery_demo_log_xlog]</span>&nbsp;<span style="color: blue; ">on</span>&nbsp;<span style="color: maroon; ">[xquery_demo]</span><span style="color: silver; ">.</span><span style="color: maroon; ">[log]</span><span style="color: silver; ">;</span>
<br/><span style="color: maroon; ">go</span>
<br/><span style="color: blue; ">create</span>&nbsp;<span style="color: blue; ">primary</span>&nbsp;<span style="color: maroon; ">xml</span>&nbsp;<span style="color: blue; ">index</span>&nbsp;<span style="color: maroon; ">[ix_xquery_demo_log_xlog]</span>
<br/>&nbsp;&nbsp;<span style="color: blue; ">on</span>&nbsp;<span style="color: maroon; ">[xquery_demo]</span><span style="color: silver; ">.</span><span style="color: maroon; ">[log]</span>&nbsp;<span style="color: maroon; ">(</span><span style="color: maroon; ">[entry]</span><span style="color: maroon; ">)</span><span style="color: silver; ">;</span>
<br/><span style="color: maroon; ">go</span>
<br/><span style="color: blue; ">if</span>&nbsp;<span style="color: fuchsia; font-style: italic; ">indexproperty</span>&nbsp;<span style="color: maroon; ">(</span><span style="color: fuchsia; font-style: italic; ">object_id</span><span style="color: maroon; ">(</span><span style="color: red; ">'[xquery_demo].[log]'</span><span style="color: maroon; ">)</span><span style="color: silver; ">,</span>&nbsp;<span style="color: red; ">'ix_xquery_demo_log_xlog_value'</span><span style="color: silver; ">,</span>&nbsp;<span style="color: red; ">'IndexID'</span><span style="color: maroon; ">)</span>&nbsp;<span style="color: blue; ">is</span>&nbsp;<span style="color: blue; ">not</span>&nbsp;<span style="color: blue; ">null</span>
<br/>&nbsp;&nbsp;<span style="color: blue; ">drop</span>&nbsp;<span style="color: blue; ">index</span>&nbsp;<span style="color: maroon; ">[ix_xquery_demo_log_xlog_value]</span>&nbsp;<span style="color: blue; ">on</span>&nbsp;<span style="color: maroon; ">[xquery_demo]</span><span style="color: silver; ">.</span><span style="color: maroon; ">[log]</span><span style="color: silver; ">;</span>
<br/><span style="color: maroon; ">go</span>
<br/><span style="color: blue; ">create</span>&nbsp;<span style="color: maroon; ">xml</span>&nbsp;<span style="color: blue; ">index</span>&nbsp;<span style="color: maroon; ">[ix_xquery_demo_log_xlog_value]</span>
<br/>&nbsp;&nbsp;<span style="color: blue; ">on</span>&nbsp;<span style="color: maroon; ">[xquery_demo]</span><span style="color: silver; ">.</span><span style="color: maroon; ">[log]</span>&nbsp;<span style="color: maroon; ">(</span><span style="color: maroon; ">[entry]</span><span style="color: maroon; ">)</span>&nbsp;<span style="color: maroon; ">using</span>&nbsp;<span style="color: maroon; ">xml</span>&nbsp;<span style="color: blue; ">index</span>&nbsp;<span style="color: maroon; ">[ix_xquery_demo_log_xlog]</span>&nbsp;<span style="color: blue; ">for</span>&nbsp;<span style="color: maroon; ">value</span><span style="color: silver; ">;</span>
<br/><span style="color: maroon; ">go</span>
<br/><span style="color: blue; ">if</span>&nbsp;<span style="color: fuchsia; font-style: italic; ">indexproperty</span>&nbsp;<span style="color: maroon; ">(</span><span style="color: fuchsia; font-style: italic; ">object_id</span><span style="color: maroon; ">(</span><span style="color: red; ">'[xquery_demo].[log]'</span><span style="color: maroon; ">)</span><span style="color: silver; ">,</span>&nbsp;<span style="color: red; ">'ix_xquery_demo_log_xlog_property]'</span><span style="color: silver; ">,</span>&nbsp;<span style="color: red; ">'IndexID'</span><span style="color: maroon; ">)</span>&nbsp;<span style="color: blue; ">is</span>&nbsp;<span style="color: blue; ">not</span>&nbsp;<span style="color: blue; ">null</span>
<br/>&nbsp;&nbsp;<span style="color: blue; ">drop</span>&nbsp;<span style="color: blue; ">index</span>&nbsp;<span style="color: maroon; ">[ix_xquery_demo_log_xlog_property]</span>&nbsp;<span style="color: blue; ">on</span>&nbsp;<span style="color: maroon; ">[xquery_demo]</span><span style="color: silver; ">.</span><span style="color: maroon; ">[log]</span><span style="color: silver; ">;</span>
<br/><span style="color: maroon; ">go</span>
<br/><span style="color: maroon; ">go</span>
<br/><span style="color: green; font-style: italic; ">&#45;&#45;&nbsp;end&nbsp;code&nbsp;block</span>
<br/><span style="color: green; font-style: italic; ">&#45;&#45;&nbsp;begin&nbsp;code&nbsp;block</span>
<br/><span style="color: green; font-style: italic; ">&#45;&#45;</span>
<br/><span style="color: green; font-style: italic; ">&#45;&#45;&nbsp;Statistics&nbsp;are&nbsp;available&nbsp;on&nbsp;the&nbsp;indexes&nbsp;</span>
<br/><span style="color: blue; ">select</span>&nbsp;<span style="color: maroon; ">idx</span><span style="color: silver; ">.</span><span style="color: blue; ">name</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: blue; ">as</span>&nbsp;<span style="color: red; ">N'IndexName'</span>
<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: silver; ">,</span>&nbsp;<span style="color: maroon; ">idx</span><span style="color: silver; ">.</span><span style="color: maroon; ">object_id</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: blue; ">as</span>&nbsp;<span style="color: red; ">N'ObjectID'</span>
<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: silver; ">,</span>&nbsp;<span style="color: maroon; ">idx</span><span style="color: silver; ">.</span><span style="color: maroon; ">index_id</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: blue; ">as</span>&nbsp;<span style="color: red; ">N'IndexID'</span>
<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: silver; ">,</span>&nbsp;<span style="color: maroon; ">sts</span><span style="color: silver; ">.</span><span style="color: maroon; ">index_type_desc</span>&nbsp;<span style="color: blue; ">as</span>&nbsp;<span style="color: red; ">N'IndexType'</span>
<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: silver; ">,</span>&nbsp;<span style="color: maroon; ">sts</span><span style="color: silver; ">.</span><span style="color: silver; ">*</span>
<br/><span style="color: blue; ">from</span>&nbsp;&nbsp;&nbsp;<span style="color: maroon; ">sys</span><span style="color: silver; ">.</span><span style="color: maroon; ">indexes</span>&nbsp;<span style="color: blue; ">as</span>&nbsp;<span style="color: maroon; ">idx</span>
<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: blue; ">join</span>&nbsp;<span style="color: maroon; ">sys</span><span style="color: silver; ">.</span><span style="color: maroon; ">objects</span>&nbsp;<span style="color: blue; ">as</span>&nbsp;<span style="color: maroon; ">obj</span>
<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: blue; ">on</span>&nbsp;<span style="color: maroon; ">obj</span><span style="color: silver; ">.</span><span style="color: maroon; ">object_id</span>&nbsp;<span style="color: silver; ">=</span>&nbsp;<span style="color: maroon; ">idx</span><span style="color: silver; ">.</span><span style="color: maroon; ">object_id</span>
<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: blue; ">join</span>&nbsp;<span style="color: maroon; ">sys</span><span style="color: silver; ">.</span><span style="color: maroon; ">schemas</span>&nbsp;<span style="color: blue; ">as</span>&nbsp;<span style="color: maroon; ">sch</span>
<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: blue; ">on</span>&nbsp;<span style="color: maroon; ">sch</span><span style="color: silver; ">.</span><span style="color: maroon; ">schema_id</span>&nbsp;<span style="color: silver; ">=</span>&nbsp;<span style="color: maroon; ">obj</span><span style="color: silver; ">.</span><span style="color: maroon; ">schema_id</span>
<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: blue; ">left</span>&nbsp;<span style="color: blue; ">join</span>&nbsp;<span style="color: maroon; ">sys</span><span style="color: silver; ">.</span><span style="color: #FF0080; font-weight: bold; ">dm_db_index_physical_stats</span>&nbsp;<span style="color: maroon; ">(</span><span style="color: fuchsia; font-style: italic; ">db_id</span><span style="color: maroon; ">(</span><span style="color: red; ">N'chamomile'</span><span style="color: maroon; ">)</span><span style="color: silver; ">,</span>&nbsp;<span style="color: fuchsia; font-style: italic; ">object_id</span><span style="color: maroon; ">(</span><span style="color: red; ">N'[xquery_demo].[log]'</span><span style="color: maroon; ">)</span><span style="color: silver; ">,</span>&nbsp;<span style="color: blue; ">null</span><span style="color: silver; ">,</span>&nbsp;<span style="color: blue; ">null</span><span style="color: silver; ">,</span>&nbsp;<span style="color: red; ">'DETAILED'</span><span style="color: maroon; ">)</span>&nbsp;<span style="color: blue; ">as</span>&nbsp;<span style="color: maroon; ">sts</span>
<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: blue; ">on</span>&nbsp;<span style="color: maroon; ">sts</span><span style="color: silver; ">.</span><span style="color: maroon; ">object_id</span>&nbsp;<span style="color: silver; ">=</span>&nbsp;<span style="color: maroon; ">idx</span><span style="color: silver; ">.</span><span style="color: maroon; ">object_id</span>
<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: blue; ">and</span>&nbsp;<span style="color: maroon; ">idx</span><span style="color: silver; ">.</span><span style="color: maroon; ">index_id</span>&nbsp;<span style="color: silver; ">=</span>&nbsp;<span style="color: maroon; ">sts</span><span style="color: silver; ">.</span><span style="color: maroon; ">index_id</span>
<br/><span style="color: blue; ">where</span>&nbsp;&nbsp;<span style="color: maroon; ">idx</span><span style="color: silver; ">.</span><span style="color: maroon; ">type</span>&nbsp;<span style="color: silver; ">=</span>&nbsp;<span style="color: black; ">3</span>
<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: blue; ">and</span>&nbsp;<span style="color: maroon; ">sch</span><span style="color: silver; ">.</span><span style="color: blue; ">name</span>&nbsp;<span style="color: silver; ">=</span>&nbsp;<span style="color: red; ">N'xquery_demo'</span>
<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: blue; ">and</span>&nbsp;<span style="color: maroon; ">obj</span><span style="color: silver; ">.</span><span style="color: blue; ">name</span>&nbsp;<span style="color: silver; ">=</span>&nbsp;<span style="color: red; ">N'log'</span>
<br/><span style="color: blue; ">order</span>&nbsp;&nbsp;<span style="color: blue; ">by</span>&nbsp;<span style="color: maroon; ">idx</span><span style="color: silver; ">.</span><span style="color: maroon; ">index_id</span><span style="color: silver; ">;</span>
<br/><span style="color: green; font-style: italic; ">&#45;&#45;&nbsp;end&nbsp;code&nbsp;block</span>
<br/>
</span></div>


			  
			  </td>
            </tr>
          </table>
					<!--  -->
					<!-- end content table -->
				</td>
			</tr>
		</table>
		<table style="border-collapse: collapse; margin:0 auto; width:100%; margin-top:-25px;" >
			<tr>
				<td style="padding-left:25px; padding-right:25px;">
					<table class="header">
						<tr>
							<td > 
								<iframe src="./footer.html" style="border-collapse: collapse; width:100%; overflow:hidden;  border:0;" height="200" ></iframe>
							</td>
						</tr>
					</table>
				</td>
			</tr>
		</table>
	</body>
</html>