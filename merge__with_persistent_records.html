<html>
  <head>
    <meta name="generator" content="HTML Tidy for HTML5 (experimental) for Windows https://github.com/w3c/tidy-html5/tree/c63cc39" />
    <title>[th&#601;_her&#601;tik]</title>
    <link rel="shortcut icon" href=".\source\image\chamomile.ico" />
    <link rel="stylesheet" type="text/css" href=".\source\common.css" />
  </head>
  <body>
    <table width="100%" style="border-collapse: collapse;">
      <tr>
        <td colspan="2" style="padding-left:25px; padding-right:25px;">
          <iframe src="./header.html" width="100%" height="350" scrolling="no" seamless="" frameborder="0"></iframe>
        </td>
      </tr>
    </table>
    <table width="100%" style="border-collapse: collapse;">
      <tr>
        <td colspan="2" style="padding-left:25px; padding-right:25px;">
          <table class="content" width="98%" style="border-collapse: collapse;">
            <tr class="menu">
              <td colspan="2" style="padding-left:25px; padding-right:25px;">
                <iframe src="./menu__home.html" width="100%" height="55" scrolling="no" seamless="" frameborder="0"></iframe>
              </td>
            </tr>
            <tr class="menu">
              <td colspan="2" style="padding-left:25px; padding-right:25px;">
                <iframe src="./menu__presentation.html" width="100%" height="150" scrolling="no" seamless="" frameborder="0"></iframe>
              </td>
            </tr>
          </table>
        </td>
      </tr>
    </table>
    <table width="100%" style="border-collapse: collapse;">
      <tr>
        <td colspan="2" style="padding-left:25px; padding-right:25px;">
          <!--  -->
          <!-- begin content table -->
           <table class="content">
            <tr>
              <td>

<div><span style="font-family: Courier New; font-size: 10pt;">
<span style="color: blue; ">use</span>&nbsp;<span style="color: maroon; ">[chamomile]</span><span style="color: silver; ">;</span>
<br/>
<br/><span style="color: maroon; ">go</span>
<br/>
<br/><span style="color: blue; ">if</span>&nbsp;<span style="color: fuchsia; font-style: italic; ">object_id</span><span style="color: maroon; ">(</span><span style="color: red; ">N'[utility].[fruit]'</span><span style="color: silver; ">,</span>&nbsp;<span style="color: red; ">N'U'</span><span style="color: maroon; ">)</span>&nbsp;<span style="color: blue; ">is</span>&nbsp;<span style="color: blue; ">not</span>&nbsp;<span style="color: blue; ">null</span>
<br/>&nbsp;&nbsp;<span style="color: blue; ">drop</span>&nbsp;<span style="color: blue; ">table</span>&nbsp;<span style="color: maroon; ">[utility]</span><span style="color: silver; ">.</span><span style="color: maroon; ">[fruit]</span><span style="color: silver; ">;</span>
<br/>
<br/><span style="color: maroon; ">go</span>
<br/>
<br/><span style="color: blue; ">create</span>&nbsp;<span style="color: blue; ">table</span>&nbsp;<span style="color: maroon; ">[utility]</span><span style="color: silver; ">.</span><span style="color: maroon; ">[fruit]</span><span style="color: maroon; ">(</span>
<br/>&nbsp;&nbsp;<span style="color: maroon; ">[fruit]</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: black; font-style: italic; ">[sysname]</span>&nbsp;<span style="color: blue; ">primary</span>&nbsp;<span style="color: blue; ">key</span>&nbsp;<span style="color: blue; ">clustered</span>
<br/>&nbsp;&nbsp;<span style="color: silver; ">,</span>&nbsp;<span style="color: maroon; ">[color]</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: black; font-style: italic; ">[sysname]</span>
<br/>&nbsp;&nbsp;<span style="color: silver; ">,</span>&nbsp;<span style="color: maroon; ">[persistent]</span>&nbsp;<span style="color: black; font-style: italic; ">[sysname]</span>&nbsp;<span style="color: blue; ">default</span><span style="color: maroon; ">(</span>&nbsp;<span style="color: red; ">N'false'</span><span style="color: maroon; ">)</span>
<br/>&nbsp;&nbsp;<span style="color: maroon; ">)</span><span style="color: silver; ">;</span>
<br/>
<br/><span style="color: blue; ">insert</span>&nbsp;<span style="color: blue; ">into</span>&nbsp;<span style="color: maroon; ">[utility]</span><span style="color: silver; ">.</span><span style="color: maroon; ">[fruit]</span>
<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: maroon; ">(</span><span style="color: maroon; ">[fruit]</span><span style="color: silver; ">,</span><span style="color: maroon; ">[color]</span><span style="color: maroon; ">)</span>
<br/><span style="color: blue; ">values</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: maroon; ">(</span><span style="color: red; ">N'apple'</span><span style="color: silver; ">,</span><span style="color: red; ">N'red'</span><span style="color: maroon; ">)</span><span style="color: silver; ">,</span>
<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: maroon; ">(</span><span style="color: red; ">N'banana'</span><span style="color: silver; ">,</span><span style="color: red; ">N'yellow'</span><span style="color: maroon; ">)</span><span style="color: silver; ">,</span>
<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: maroon; ">(</span><span style="color: red; ">N'orange'</span><span style="color: silver; ">,</span><span style="color: red; ">N'orange'</span><span style="color: maroon; ">)</span><span style="color: silver; ">;</span>
<br/>
<br/><span style="color: blue; ">insert</span>&nbsp;<span style="color: blue; ">into</span>&nbsp;<span style="color: maroon; ">[utility]</span><span style="color: silver; ">.</span><span style="color: maroon; ">[fruit]</span>
<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: maroon; ">(</span><span style="color: maroon; ">[fruit]</span><span style="color: silver; ">,</span><span style="color: maroon; ">[color]</span><span style="color: silver; ">,</span><span style="color: maroon; ">[persistent]</span><span style="color: maroon; ">)</span>
<br/><span style="color: blue; ">values</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: maroon; ">(</span><span style="color: red; ">N'pear'</span><span style="color: silver; ">,</span><span style="color: red; ">N'green'</span><span style="color: silver; ">,</span><span style="color: red; ">N'true'</span><span style="color: maroon; ">)</span><span style="color: silver; ">;</span>
<br/>
<br/><span style="color: blue; ">select</span>&nbsp;<span style="color: silver; ">*</span>
<br/><span style="color: blue; ">from</span>&nbsp;&nbsp;&nbsp;<span style="color: maroon; ">[utility]</span><span style="color: silver; ">.</span><span style="color: maroon; ">[fruit]</span><span style="color: silver; ">;</span>
<br/>
<br/><span style="color: maroon; ">go</span>
<br/>
<br/><span style="color: blue; ">declare</span>&nbsp;<span style="color: #8000FF; ">@fruit</span>&nbsp;<span style="color: black; font-style: italic; ">[sysname]</span>&nbsp;<span style="color: silver; ">=</span>&nbsp;<span style="color: red; ">N'pear'</span><span style="color: silver; ">,</span><span style="color: #8000FF; ">@color</span>&nbsp;<span style="color: black; font-style: italic; ">[sysname]</span>&nbsp;<span style="color: silver; ">=</span>&nbsp;<span style="color: red; ">N'orange'</span><span style="color: silver; ">,</span><span style="color: #8000FF; ">@persistent</span>&nbsp;<span style="color: black; font-style: italic; ">[sysname]</span><span style="color: silver; ">;</span>
<br/>
<br/><span style="color: blue; ">with</span>&nbsp;<span style="color: maroon; ">[non_persistent]</span>
<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: blue; ">as</span>&nbsp;<span style="color: maroon; ">(</span><span style="color: blue; ">select</span>&nbsp;<span style="color: maroon; ">[fruit]</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: blue; ">as</span>&nbsp;<span style="color: maroon; ">[fruit]</span>
<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: silver; ">,</span>&nbsp;<span style="color: maroon; ">[color]</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: blue; ">as</span>&nbsp;<span style="color: maroon; ">[color]</span>
<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: silver; ">,</span>&nbsp;<span style="color: maroon; ">[persistent]</span>&nbsp;<span style="color: blue; ">as</span>&nbsp;<span style="color: maroon; ">[persistent]</span>
<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: blue; ">from</span>&nbsp;&nbsp;&nbsp;<span style="color: maroon; ">[utility]</span><span style="color: silver; ">.</span><span style="color: maroon; ">[fruit]</span><span style="color: maroon; ">)</span>
<br/><span style="color: blue; ">merge</span>&nbsp;<span style="color: blue; ">into</span>&nbsp;<span style="color: maroon; ">[non_persistent]</span>&nbsp;<span style="color: blue; ">as</span>&nbsp;<span style="color: maroon; ">target</span>
<br/><span style="color: maroon; ">using</span>&nbsp;<span style="color: maroon; ">(</span><span style="color: blue; ">values</span>&nbsp;<span style="color: maroon; ">(</span><span style="color: #8000FF; ">@fruit</span>
<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: silver; ">,</span>&nbsp;<span style="color: #8000FF; ">@color</span>
<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: silver; ">,</span>&nbsp;<span style="color: red; ">N'false'</span><span style="color: maroon; ">)</span><span style="color: maroon; ">)</span>&nbsp;<span style="color: blue; ">as</span>&nbsp;<span style="color: maroon; ">source</span>&nbsp;<span style="color: maroon; ">(</span><span style="color: maroon; ">[fruit]</span><span style="color: silver; ">,</span>&nbsp;<span style="color: maroon; ">[color]</span><span style="color: silver; ">,</span>&nbsp;<span style="color: maroon; ">[persistent]</span><span style="color: maroon; ">)</span>
<br/><span style="color: blue; ">on</span>&nbsp;<span style="color: maroon; ">target</span><span style="color: silver; ">.</span><span style="color: maroon; ">[fruit]</span>&nbsp;<span style="color: silver; ">=</span>&nbsp;<span style="color: maroon; ">source</span><span style="color: silver; ">.</span><span style="color: maroon; ">[fruit]</span>
<br/><span style="color: green; font-style: italic; ">&#45;&#45;&nbsp;only&nbsp;match&nbsp;for&nbsp;an&nbsp;update&nbsp;when&nbsp;target.[persistent]=N'false'</span>
<br/><span style="color: blue; ">when</span>&nbsp;<span style="color: maroon; ">matched</span>&nbsp;<span style="color: blue; ">and</span>&nbsp;<span style="color: maroon; ">target</span><span style="color: silver; ">.</span><span style="color: maroon; ">[persistent]</span><span style="color: silver; ">=</span><span style="color: red; ">N'false'</span>&nbsp;<span style="color: blue; ">then</span>
<br/>&nbsp;&nbsp;<span style="color: blue; ">update</span>&nbsp;<span style="color: blue; ">set</span>&nbsp;<span style="color: maroon; ">target</span><span style="color: silver; ">.</span><span style="color: maroon; ">[color]</span>&nbsp;<span style="color: silver; ">=</span>&nbsp;<span style="color: maroon; ">source</span><span style="color: silver; ">.</span><span style="color: maroon; ">[color]</span>
<br/><span style="color: green; font-style: italic; ">&#45;&#45;&nbsp;does&nbsp;not&nbsp;update&nbsp;as&nbsp;it&nbsp;was&nbsp;matched&nbsp;based&nbsp;on&nbsp;primary&nbsp;key</span>
<br/><span style="color: blue; ">when</span>&nbsp;<span style="color: blue; ">not</span>&nbsp;<span style="color: maroon; ">matched</span>&nbsp;<span style="color: blue; ">by</span>&nbsp;<span style="color: maroon; ">target</span>&nbsp;<span style="color: blue; ">then</span>
<br/>&nbsp;&nbsp;<span style="color: blue; ">insert</span>&nbsp;<span style="color: maroon; ">(</span><span style="color: maroon; ">[fruit]</span>
<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: silver; ">,</span>&nbsp;<span style="color: maroon; ">[color]</span><span style="color: maroon; ">)</span>
<br/>&nbsp;&nbsp;<span style="color: blue; ">values</span>&nbsp;<span style="color: maroon; ">(</span><span style="color: maroon; ">source</span><span style="color: silver; ">.</span><span style="color: maroon; ">[fruit]</span>
<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: silver; ">,</span>&nbsp;<span style="color: maroon; ">source</span><span style="color: silver; ">.</span><span style="color: maroon; ">[color]</span><span style="color: maroon; ">)</span>
<br/><span style="color: maroon; ">output</span>&nbsp;<span style="color: maroon; ">$action</span>
<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: silver; ">,</span>&nbsp;<span style="color: maroon; ">inserted</span><span style="color: silver; ">.</span><span style="color: silver; ">*</span>
<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: silver; ">,</span>&nbsp;<span style="color: maroon; ">deleted</span><span style="color: silver; ">.</span><span style="color: silver; ">*</span><span style="color: silver; ">;</span>
<br/>
<br/><span style="color: blue; ">select</span>&nbsp;<span style="color: silver; ">*</span>
<br/><span style="color: blue; ">from</span>&nbsp;&nbsp;&nbsp;<span style="color: maroon; ">[utility]</span><span style="color: silver; ">.</span><span style="color: maroon; ">[fruit]</span><span style="color: silver; ">;</span>
<br/>
<br/><span style="color: maroon; ">go</span>&nbsp;
</span></div>

			  
			  
              </td>
            </tr>
          </table>
  </body>
</html>
